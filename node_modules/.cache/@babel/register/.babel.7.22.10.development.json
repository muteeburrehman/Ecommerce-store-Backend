{"{\"assumptions\":{},\"sourceRoot\":\"/home/muteeb/Desktop/e-store-backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/muteeb/Desktop/e-store-backend\",\"filename\":\"/home/muteeb/Desktop/e-store-backend/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/muteeb/Desktop/e-store-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _sqlite = _interopRequireDefault(require(\"sqlite3\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar cors = require('cors');\nvar app = (0, _express[\"default\"])();\napp.use(cors());\napp.use(_bodyParser[\"default\"].json());\napp.use('/images', _express[\"default\"][\"static\"](_path[\"default\"].join(__dirname, '../assets')));\nvar db = new _sqlite[\"default\"].Database('./mock.db', _sqlite[\"default\"].OPEN_READWRITE | _sqlite[\"default\"].OPEN_CREATE, function (err) {\n  if (err) {\n    console.error(err.message);\n  } else {\n    console.log('Connected to the database');\n\n    // Create tables and perform other initializations here\n    // (Code for creating products, users, and carts tables)\n    db.run(\"\\n            CREATE TABLE IF NOT EXISTS products (\\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                name TEXT,\\n                price DOUBLE,\\n                description TEXT,\\n                imageUrl TEXT,\\n                averageRating TEXT\\n            )\\n        \", function (createErr) {\n      if (createErr) {\n        console.error('Error creating products table:', createErr.message);\n      } else {\n        console.log('Products table created successfully');\n      }\n    });\n\n    // Create the users table if it doesn't exist\n    db.run(\"\\n            CREATE TABLE IF NOT EXISTS users (\\n                id PRIMARY KEY AUTOINCREMENT,\\n                username TEXT NOT NULL,\\n                email TEXT NOT NULL,\\n                PhoneNo TEXT,\\n                cartItems TEXT DEFAULT ''\\n            )\\n        \", function (createErr) {\n      if (createErr) {\n        console.error('Error creating users table:', createErr.message);\n      } else {\n        console.log('Users table created successfully');\n      }\n    });\n    db.run(\"\\n            CREATE TABLE IF NOT EXISTS carts (\\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                user_id INTEGER, \\n                cart_item_id INTEGER,\\n                product_id INTEGER,\\n                quantity INTEGER,\\n                price DECIMAL(10, 2),\\n                total_price DECIMAL(10, 2),\\n                FOREIGN KEY (user_id) REFERENCES users(id),\\n                FOREIGN KEY (product_id) REFERENCES products(id)\\n            )\\n        \", function (createErr) {\n      if (createErr) {\n        console.error('Error creating carts table:', createErr.message);\n      } else {\n        console.log('Carts table created successfully');\n      }\n    });\n  }\n});\n\n// ... Other parts of your code ...\nfunction queryDatabase(_x, _x2) {\n  return _queryDatabase.apply(this, arguments);\n}\nfunction _queryDatabase() {\n  _queryDatabase = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(query, params) {\n    return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          return _context7.abrupt(\"return\", new Promise(function (resolve, reject) {\n            var db = new _sqlite[\"default\"].Database('./mock.db');\n            db.all(query, params, function (err, rows) {\n              if (err) {\n                reject(err);\n              } else {\n                resolve(rows);\n              }\n              db.close();\n            });\n          }));\n        case 1:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return _queryDatabase.apply(this, arguments);\n}\napp.get('/api/products', /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n    var rows;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return queryDatabase('SELECT * FROM products', []);\n        case 3:\n          rows = _context.sent;\n          res.status(200).json(rows);\n          _context.next = 10;\n          break;\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function (_x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}());\n// API route to get a user's cart items\napp.get('/api/users/:userId/cart', /*#__PURE__*/function () {\n  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res) {\n    var userId, cartItems;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          userId = req.params.userId;\n          _context2.prev = 1;\n          _context2.next = 4;\n          return queryDatabase('SELECT c.*, p.name, p.price, p.imageUrl ' + 'FROM carts c ' + 'JOIN products p ON c.product_id = p.id ' + 'WHERE c.user_id = ?', [userId]);\n        case 4:\n          cartItems = _context2.sent;\n          res.status(200).json(cartItems);\n          _context2.next = 11;\n          break;\n        case 8:\n          _context2.prev = 8;\n          _context2.t0 = _context2[\"catch\"](1);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[1, 8]]);\n  }));\n  return function (_x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.get('/api/products/:productId', /*#__PURE__*/function () {\n  var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res) {\n    var productId, product;\n    return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          productId = req.params.productId;\n          _context3.prev = 1;\n          _context3.next = 4;\n          return queryDatabase('SELECT * FROM products WHERE id = ?', [productId]);\n        case 4:\n          product = _context3.sent;\n          if (product[0]) {\n            _context3.next = 8;\n            break;\n          }\n          res.status(404).json('Could not find the product!');\n          return _context3.abrupt(\"return\");\n        case 8:\n          res.status(200).json(product[0]);\n          _context3.next = 14;\n          break;\n        case 11:\n          _context3.prev = 11;\n          _context3.t0 = _context3[\"catch\"](1);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 14:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[1, 11]]);\n  }));\n  return function (_x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}());\n\n/*\napp.post('/api/users/:userId/cart', async (req, res) => {\n    const {userId} = req.params;\n    const {productId} = req.body;\n\n    try {\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [productId]);\n        if (!product[0]) {\n            res.status(404).json('Could not find product!');\n            return;\n        }\n        await queryDatabase('UPDATE users SET cartItems = cartItems || ? || \",\" WHERE id = ?', [productId, userId]);\n        res.status(200).json(product[0]);\n    } catch (err) {\n        res.status(500).json({error: 'Database error'});\n    }\n});\n*/\n\n/*\napp.delete('/api/users/:userId/cart/:productId', async (req, res) => {\n    const {userId, productId} = req.params;\n\n    try {\n        await queryDatabase('UPDATE users SET cartItems = REPLACE(cartItems, ? || \",\", \"\") WHERE id = ?', [productId, userId]);\n        const rows = await queryDatabase('SELECT * FROM products WHERE id IN (SELECT cartItems FROM users WHERE id = ?)', [userId]);\n        res.status(200).json(rows);\n    } catch (err) {\n        res.status(500).json({error: 'Database error'});\n    }\n});\n*/\n\n//insert,update,modify\n\napp.post('/api/products', function (req, res) {\n  var _req$body = req.body,\n    id = _req$body.id,\n    name = _req$body.name,\n    price = _req$body.price,\n    description = _req$body.description,\n    imageUrl = _req$body.imageUrl,\n    averageRating = _req$body.averageRating;\n  var insertQuery = \"\\n    INSERT INTO products (name, price, description, imageUrl, averageRating)\\n    VALUES (?, ?, ?, ?, ?)\\n  \";\n  db.run(insertQuery, [name, price, description, imageUrl, averageRating], function (err) {\n    if (err) {\n      console.error(err.message);\n      res.status(500).json({\n        error: 'Failed to insert product'\n      });\n    } else {\n      res.status(201).json({\n        message: 'Product inserted successfully'\n      });\n    }\n  });\n});\n\n// API route to add to cart\napp.post('/api/users/:userId/cart', /*#__PURE__*/function () {\n  var _ref4 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res) {\n    var userId, _req$body2, product_id, quantity, product, cartItem, _price, _total_price, updateQuery, price, total_price, insertQuery;\n    return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          userId = req.params.userId;\n          _req$body2 = req.body, product_id = _req$body2.product_id, quantity = _req$body2.quantity;\n          _context4.prev = 2;\n          _context4.next = 5;\n          return queryDatabase('SELECT * FROM products WHERE id = ?', [product_id]);\n        case 5:\n          product = _context4.sent;\n          if (product[0]) {\n            _context4.next = 9;\n            break;\n          }\n          res.status(404).json('Could not find product!');\n          return _context4.abrupt(\"return\");\n        case 9:\n          _context4.next = 11;\n          return queryDatabase('SELECT * FROM carts WHERE product_id = ? AND user_id = ?', [product_id, userId]);\n        case 11:\n          cartItem = _context4.sent;\n          if (!cartItem[0]) {\n            _context4.next = 20;\n            break;\n          }\n          // Calculate total price based on updated quantity\n          // const _qty = parseInt(cartItem[0].quantity) + quantity;\n          _price = parseFloat(product[0].price);\n          _total_price = _price * quantity; // Update the cart item with new quantity and total price\n          updateQuery = \"\\n            UPDATE carts\\n            SET quantity = ?, price = ?, total_price = ?\\n            WHERE product_id = ?\\n        \";\n          _context4.next = 18;\n          return queryDatabase(updateQuery, [quantity, _price, _total_price, product_id]);\n        case 18:\n          res.status(200).json({\n            message: 'Cart item updated successfully'\n          });\n          return _context4.abrupt(\"return\");\n        case 20:\n          // Calculate total price based on product price and quantity\n          price = parseFloat(product[0].price);\n          total_price = price * quantity; // Insert the item into the cart\n          insertQuery = \"\\n            INSERT INTO carts (user_id, product_id, quantity, price, total_price)\\n            VALUES (?, ?, ?, ?, ?)\\n        \";\n          _context4.next = 25;\n          return queryDatabase(insertQuery, [userId, product_id, quantity, price, total_price]);\n        case 25:\n          res.status(200).json({\n            message: 'Product added to cart successfully'\n          });\n          _context4.next = 31;\n          break;\n        case 28:\n          _context4.prev = 28;\n          _context4.t0 = _context4[\"catch\"](2);\n          res.status(500).json({\n            error: 'Database error:' + _context4.t0\n          });\n        case 31:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[2, 28]]);\n  }));\n  return function (_x9, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n// API route to update a product based on productId\napp.put('/api/products/:productId', function (req, res) {\n  var productId = req.params.productId;\n  var _req$body3 = req.body,\n    name = _req$body3.name,\n    price = _req$body3.price,\n    description = _req$body3.description,\n    imageUrl = _req$body3.imageUrl,\n    averageRating = _req$body3.averageRating;\n  var updateQuery = \"\\n    UPDATE products\\n    SET name = ?, price = ?, description = ?, imageUrl = ?, averageRating = ?\\n    WHERE id = ?\\n  \";\n  db.run(updateQuery, [name, price, description, imageUrl, averageRating, productId], function (err) {\n    if (err) {\n      console.error(err.message);\n      res.status(500).json({\n        error: 'Failed to update product'\n      });\n    } else {\n      res.status(200).json({\n        message: 'Product updated successfully'\n      });\n    }\n  });\n});\n\n// API route to update the quantity of a product in a user's cart\napp.put('/api/users/:userId/cart/:cartItemId', /*#__PURE__*/function () {\n  var _ref5 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res) {\n    var _req$params, userId, cartItemId, quantity, cartItem, product, price, total_price, updateQuery;\n    return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _req$params = req.params, userId = _req$params.userId, cartItemId = _req$params.cartItemId;\n          quantity = req.body.quantity;\n          _context5.prev = 2;\n          _context5.next = 5;\n          return queryDatabase('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        case 5:\n          cartItem = _context5.sent;\n          if (cartItem[0]) {\n            _context5.next = 9;\n            break;\n          }\n          res.status(404).json('Could not find cart item!');\n          return _context5.abrupt(\"return\");\n        case 9:\n          _context5.next = 11;\n          return queryDatabase('SELECT * FROM products WHERE id = ?', [cartItem[0].product_id]);\n        case 11:\n          product = _context5.sent;\n          if (product[0]) {\n            _context5.next = 15;\n            break;\n          }\n          res.status(404).json('Could not find product!');\n          return _context5.abrupt(\"return\");\n        case 15:\n          // Calculate total price based on updated quantity\n          price = parseFloat(product[0].price);\n          total_price = price * quantity; // Update the cart item with new quantity and total price\n          updateQuery = \"\\n            UPDATE carts\\n            SET quantity = ?, price = ?, total_price = ?\\n            WHERE id = ?\\n        \";\n          _context5.next = 20;\n          return queryDatabase(updateQuery, [quantity, price, total_price, cartItemId]);\n        case 20:\n          res.status(200).json({\n            message: 'Cart item updated successfully'\n          });\n          _context5.next = 26;\n          break;\n        case 23:\n          _context5.prev = 23;\n          _context5.t0 = _context5[\"catch\"](2);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 26:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[2, 23]]);\n  }));\n  return function (_x11, _x12) {\n    return _ref5.apply(this, arguments);\n  };\n}());\napp[\"delete\"]('/api/users/:userId/cart/:cartItemId', /*#__PURE__*/function () {\n  var _ref6 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res) {\n    var _req$params2, userId, cartItemId, cartItem, deleteQuery;\n    return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _req$params2 = req.params, userId = _req$params2.userId, cartItemId = _req$params2.cartItemId;\n          _context6.prev = 1;\n          _context6.next = 4;\n          return queryDatabase('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        case 4:\n          cartItem = _context6.sent;\n          if (cartItem[0]) {\n            _context6.next = 8;\n            break;\n          }\n          res.status(404).json({\n            message: 'Could not find cart item!'\n          });\n          return _context6.abrupt(\"return\");\n        case 8:\n          // Delete the item from the cart\n          deleteQuery = \"\\n            DELETE FROM carts\\n            WHERE id = ? AND user_id = ?\\n        \";\n          _context6.next = 11;\n          return queryDatabase(deleteQuery, [cartItemId, userId]);\n        case 11:\n          res.status(200).json({\n            message: 'Product removed from cart successfully'\n          });\n          _context6.next = 17;\n          break;\n        case 14:\n          _context6.prev = 14;\n          _context6.t0 = _context6[\"catch\"](1);\n          res.status(500).json({\n            message: 'Database error'\n          });\n        case 17:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[1, 14]]);\n  }));\n  return function (_x13, _x14) {\n    return _ref6.apply(this, arguments);\n  };\n}());\n// API route to delete a product based on productId\napp[\"delete\"]('/api/products/:productId', function (req, res) {\n  var productId = req.params.productId;\n  var deleteQuery = \"\\n    DELETE FROM products\\n    WHERE id = ?\\n  \";\n  db.run(deleteQuery, [productId], function (err) {\n    if (err) {\n      console.error(err.message);\n      res.status(500).json({\n        error: 'Failed to delete product'\n      });\n    } else {\n      res.status(200).json({\n        message: 'Product deleted successfully'\n      });\n    }\n  });\n});\n\n// Define other routes here\n\n// ... The rest of your API routes ...\n\napp.listen(8000, function () {\n  console.log('Server is listening on port 8000');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2JvZHlQYXJzZXIiLCJfc3FsaXRlIiwiX3BhdGgiLCJjb3JzIiwiYXBwIiwiZXhwcmVzcyIsInVzZSIsImJvZHlQYXJzZXIiLCJqc29uIiwicGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJkYiIsInNxbGl0ZTMiLCJEYXRhYmFzZSIsIk9QRU5fUkVBRFdSSVRFIiwiT1BFTl9DUkVBVEUiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJtZXNzYWdlIiwibG9nIiwicnVuIiwiY3JlYXRlRXJyIiwicXVlcnlEYXRhYmFzZSIsIl94IiwiX3gyIiwiX3F1ZXJ5RGF0YWJhc2UiLCJhcHBseSIsImFyZ3VtZW50cyIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWdlbmVyYXRvciIsIm1hcmsiLCJfY2FsbGVlNyIsInF1ZXJ5IiwicGFyYW1zIiwid3JhcCIsIl9jYWxsZWU3JCIsIl9jb250ZXh0NyIsInByZXYiLCJuZXh0IiwiYWJydXB0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJhbGwiLCJyb3dzIiwiY2xvc2UiLCJzdG9wIiwiZ2V0IiwiX3JlZiIsIl9jYWxsZWUiLCJyZXEiLCJyZXMiLCJfY2FsbGVlJCIsIl9jb250ZXh0Iiwic2VudCIsInN0YXR1cyIsInQwIiwiX3gzIiwiX3g0IiwiX3JlZjIiLCJfY2FsbGVlMiIsInVzZXJJZCIsImNhcnRJdGVtcyIsIl9jYWxsZWUyJCIsIl9jb250ZXh0MiIsIl94NSIsIl94NiIsIl9yZWYzIiwiX2NhbGxlZTMiLCJwcm9kdWN0SWQiLCJwcm9kdWN0IiwiX2NhbGxlZTMkIiwiX2NvbnRleHQzIiwiX3g3IiwiX3g4IiwicG9zdCIsIl9yZXEkYm9keSIsImJvZHkiLCJpZCIsIm5hbWUiLCJwcmljZSIsImRlc2NyaXB0aW9uIiwiaW1hZ2VVcmwiLCJhdmVyYWdlUmF0aW5nIiwiaW5zZXJ0UXVlcnkiLCJfcmVmNCIsIl9jYWxsZWU0IiwiX3JlcSRib2R5MiIsInByb2R1Y3RfaWQiLCJxdWFudGl0eSIsImNhcnRJdGVtIiwiX3ByaWNlIiwiX3RvdGFsX3ByaWNlIiwidXBkYXRlUXVlcnkiLCJ0b3RhbF9wcmljZSIsIl9jYWxsZWU0JCIsIl9jb250ZXh0NCIsInBhcnNlRmxvYXQiLCJfeDkiLCJfeDEwIiwicHV0IiwiX3JlcSRib2R5MyIsIl9yZWY1IiwiX2NhbGxlZTUiLCJfcmVxJHBhcmFtcyIsImNhcnRJdGVtSWQiLCJfY2FsbGVlNSQiLCJfY29udGV4dDUiLCJfeDExIiwiX3gxMiIsIl9yZWY2IiwiX2NhbGxlZTYiLCJfcmVxJHBhcmFtczIiLCJkZWxldGVRdWVyeSIsIl9jYWxsZWU2JCIsIl9jb250ZXh0NiIsIl94MTMiLCJfeDE0IiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9tdXRlZWIvRGVza3RvcC9lLXN0b3JlLWJhY2tlbmQvc3JjLyIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IHNxbGl0ZTMgZnJvbSAnc3FsaXRlMyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKVxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAudXNlKGNvcnMoKSk7XG5cbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuYXBwLnVzZSgnL2ltYWdlcycsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi9hc3NldHMnKSkpO1xuXG5jb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKCcuL21vY2suZGInLCBzcWxpdGUzLk9QRU5fUkVBRFdSSVRFIHwgc3FsaXRlMy5PUEVOX0NSRUFURSwgKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byB0aGUgZGF0YWJhc2UnKTtcblxuICAgICAgICAvLyBDcmVhdGUgdGFibGVzIGFuZCBwZXJmb3JtIG90aGVyIGluaXRpYWxpemF0aW9ucyBoZXJlXG4gICAgICAgIC8vIChDb2RlIGZvciBjcmVhdGluZyBwcm9kdWN0cywgdXNlcnMsIGFuZCBjYXJ0cyB0YWJsZXMpXG4gICAgICAgIGRiLnJ1bihgXG4gICAgICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBwcm9kdWN0cyAoXG4gICAgICAgICAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICAgICAgICAgIG5hbWUgVEVYVCxcbiAgICAgICAgICAgICAgICBwcmljZSBET1VCTEUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICAgICAgICAgICAgICBpbWFnZVVybCBURVhULFxuICAgICAgICAgICAgICAgIGF2ZXJhZ2VSYXRpbmcgVEVYVFxuICAgICAgICAgICAgKVxuICAgICAgICBgLCAoY3JlYXRlRXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoY3JlYXRlRXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcHJvZHVjdHMgdGFibGU6JywgY3JlYXRlRXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUHJvZHVjdHMgdGFibGUgY3JlYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSB1c2VycyB0YWJsZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgIGRiLnJ1bihgXG4gICAgICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB1c2VycyAoXG4gICAgICAgICAgICAgICAgaWQgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgICAgICAgICAgICB1c2VybmFtZSBURVhUIE5PVCBOVUxMLFxuICAgICAgICAgICAgICAgIGVtYWlsIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgICAgICAgICAgUGhvbmVObyBURVhULFxuICAgICAgICAgICAgICAgIGNhcnRJdGVtcyBURVhUIERFRkFVTFQgJydcbiAgICAgICAgICAgIClcbiAgICAgICAgYCwgKGNyZWF0ZUVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGNyZWF0ZUVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHVzZXJzIHRhYmxlOicsIGNyZWF0ZUVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXJzIHRhYmxlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRiLnJ1bihgXG4gICAgICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBjYXJ0cyAoXG4gICAgICAgICAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICAgICAgICAgIHVzZXJfaWQgSU5URUdFUiwgXG4gICAgICAgICAgICAgICAgY2FydF9pdGVtX2lkIElOVEVHRVIsXG4gICAgICAgICAgICAgICAgcHJvZHVjdF9pZCBJTlRFR0VSLFxuICAgICAgICAgICAgICAgIHF1YW50aXR5IElOVEVHRVIsXG4gICAgICAgICAgICAgICAgcHJpY2UgREVDSU1BTCgxMCwgMiksXG4gICAgICAgICAgICAgICAgdG90YWxfcHJpY2UgREVDSU1BTCgxMCwgMiksXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMoaWQpLFxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChwcm9kdWN0X2lkKSBSRUZFUkVOQ0VTIHByb2R1Y3RzKGlkKVxuICAgICAgICAgICAgKVxuICAgICAgICBgLCAoY3JlYXRlRXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoY3JlYXRlRXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY2FydHMgdGFibGU6JywgY3JlYXRlRXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ2FydHMgdGFibGUgY3JlYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbi8vIC4uLiBPdGhlciBwYXJ0cyBvZiB5b3VyIGNvZGUgLi4uXG5cblxuYXN5bmMgZnVuY3Rpb24gcXVlcnlEYXRhYmFzZShxdWVyeSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZSgnLi9tb2NrLmRiJyk7XG4gICAgICAgIGRiLmFsbChxdWVyeSwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocm93cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuYXBwLmdldCgnL2FwaS9wcm9kdWN0cycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIHByb2R1Y3RzJywgW10pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyb3dzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe2Vycm9yOiAnRGF0YWJhc2UgZXJyb3InfSk7XG4gICAgfVxufSk7XG4vLyBBUEkgcm91dGUgdG8gZ2V0IGEgdXNlcidzIGNhcnQgaXRlbXNcbmFwcC5nZXQoJy9hcGkvdXNlcnMvOnVzZXJJZC9jYXJ0JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjYXJ0SXRlbXMgPSBhd2FpdCBxdWVyeURhdGFiYXNlKFxuICAgICAgICAgICAgJ1NFTEVDVCBjLiosIHAubmFtZSwgcC5wcmljZSwgcC5pbWFnZVVybCAnICtcbiAgICAgICAgICAgICdGUk9NIGNhcnRzIGMgJyArXG4gICAgICAgICAgICAnSk9JTiBwcm9kdWN0cyBwIE9OIGMucHJvZHVjdF9pZCA9IHAuaWQgJyArXG4gICAgICAgICAgICAnV0hFUkUgYy51c2VyX2lkID0gPycsXG4gICAgICAgICAgICBbdXNlcklkXVxuICAgICAgICApO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihjYXJ0SXRlbXMpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRGF0YWJhc2UgZXJyb3InIH0pO1xuICAgIH1cbn0pO1xuXG5hcHAuZ2V0KCcvYXBpL3Byb2R1Y3RzLzpwcm9kdWN0SWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7cHJvZHVjdElkfSA9IHJlcS5wYXJhbXM7XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcXVlcnlEYXRhYmFzZSgnU0VMRUNUICogRlJPTSBwcm9kdWN0cyBXSEVSRSBpZCA9ID8nLCBbcHJvZHVjdElkXSk7XG4gICAgICAgIGlmICghcHJvZHVjdFswXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oJ0NvdWxkIG5vdCBmaW5kIHRoZSBwcm9kdWN0IScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHByb2R1Y3RbMF0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ZXJyb3I6ICdEYXRhYmFzZSBlcnJvcid9KTtcbiAgICB9XG59KTtcblxuLypcbmFwcC5wb3N0KCcvYXBpL3VzZXJzLzp1c2VySWQvY2FydCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHt1c2VySWR9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7cHJvZHVjdElkfSA9IHJlcS5ib2R5O1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gcHJvZHVjdHMgV0hFUkUgaWQgPSA/JywgW3Byb2R1Y3RJZF0pO1xuICAgICAgICBpZiAoIXByb2R1Y3RbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKCdDb3VsZCBub3QgZmluZCBwcm9kdWN0IScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1VQREFURSB1c2VycyBTRVQgY2FydEl0ZW1zID0gY2FydEl0ZW1zIHx8ID8gfHwgXCIsXCIgV0hFUkUgaWQgPSA/JywgW3Byb2R1Y3RJZCwgdXNlcklkXSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHByb2R1Y3RbMF0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ZXJyb3I6ICdEYXRhYmFzZSBlcnJvcid9KTtcbiAgICB9XG59KTtcbiovXG5cbi8qXG5hcHAuZGVsZXRlKCcvYXBpL3VzZXJzLzp1c2VySWQvY2FydC86cHJvZHVjdElkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qge3VzZXJJZCwgcHJvZHVjdElkfSA9IHJlcS5wYXJhbXM7XG5cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBxdWVyeURhdGFiYXNlKCdVUERBVEUgdXNlcnMgU0VUIGNhcnRJdGVtcyA9IFJFUExBQ0UoY2FydEl0ZW1zLCA/IHx8IFwiLFwiLCBcIlwiKSBXSEVSRSBpZCA9ID8nLCBbcHJvZHVjdElkLCB1c2VySWRdKTtcbiAgICAgICAgY29uc3Qgcm93cyA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gcHJvZHVjdHMgV0hFUkUgaWQgSU4gKFNFTEVDVCBjYXJ0SXRlbXMgRlJPTSB1c2VycyBXSEVSRSBpZCA9ID8pJywgW3VzZXJJZF0pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyb3dzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe2Vycm9yOiAnRGF0YWJhc2UgZXJyb3InfSk7XG4gICAgfVxufSk7XG4qL1xuXG4vL2luc2VydCx1cGRhdGUsbW9kaWZ5XG5cbmFwcC5wb3N0KCcvYXBpL3Byb2R1Y3RzJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qge2lkLCBuYW1lLCBwcmljZSwgZGVzY3JpcHRpb24sIGltYWdlVXJsLCBhdmVyYWdlUmF0aW5nfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgaW5zZXJ0UXVlcnkgPSBgXG4gICAgSU5TRVJUIElOVE8gcHJvZHVjdHMgKG5hbWUsIHByaWNlLCBkZXNjcmlwdGlvbiwgaW1hZ2VVcmwsIGF2ZXJhZ2VSYXRpbmcpXG4gICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVxuICBgO1xuXG4gICAgZGIucnVuKGluc2VydFF1ZXJ5LCBbbmFtZSwgcHJpY2UsIGRlc2NyaXB0aW9uLCBpbWFnZVVybCwgYXZlcmFnZVJhdGluZ10sIChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ZXJyb3I6ICdGYWlsZWQgdG8gaW5zZXJ0IHByb2R1Y3QnfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7bWVzc2FnZTogJ1Byb2R1Y3QgaW5zZXJ0ZWQgc3VjY2Vzc2Z1bGx5J30pO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuLy8gQVBJIHJvdXRlIHRvIGFkZCB0byBjYXJ0XG5hcHAucG9zdCgnL2FwaS91c2Vycy86dXNlcklkL2NhcnQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHByb2R1Y3RfaWQsIHF1YW50aXR5IH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICAgIC8vIEZldGNoIHByb2R1Y3QgZGV0YWlscyBmcm9tIHRoZSBwcm9kdWN0cyB0YWJsZVxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcXVlcnlEYXRhYmFzZSgnU0VMRUNUICogRlJPTSBwcm9kdWN0cyBXSEVSRSBpZCA9ID8nLCBbcHJvZHVjdF9pZF0pO1xuICAgICAgICBpZiAoIXByb2R1Y3RbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKCdDb3VsZCBub3QgZmluZCBwcm9kdWN0IScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmV0Y2ggdGhlIGNhcnQgaXRlbSBkZXRhaWxzXG4gICAgICAgIGNvbnN0IGNhcnRJdGVtID0gYXdhaXQgcXVlcnlEYXRhYmFzZSgnU0VMRUNUICogRlJPTSBjYXJ0cyBXSEVSRSBwcm9kdWN0X2lkID0gPyBBTkQgdXNlcl9pZCA9ID8nLCBbcHJvZHVjdF9pZCwgdXNlcklkXSk7XG4gICAgICAgIGlmIChjYXJ0SXRlbVswXSkge1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHByaWNlIGJhc2VkIG9uIHVwZGF0ZWQgcXVhbnRpdHlcbiAgICAgICAgICAgIC8vIGNvbnN0IF9xdHkgPSBwYXJzZUludChjYXJ0SXRlbVswXS5xdWFudGl0eSkgKyBxdWFudGl0eTtcbiAgICAgICAgICAgIGNvbnN0IHByaWNlID0gcGFyc2VGbG9hdChwcm9kdWN0WzBdLnByaWNlKTtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsX3ByaWNlID0gcHJpY2UgKiBxdWFudGl0eTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBjYXJ0IGl0ZW0gd2l0aCBuZXcgcXVhbnRpdHkgYW5kIHRvdGFsIHByaWNlXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVRdWVyeSA9IGBcbiAgICAgICAgICAgIFVQREFURSBjYXJ0c1xuICAgICAgICAgICAgU0VUIHF1YW50aXR5ID0gPywgcHJpY2UgPSA/LCB0b3RhbF9wcmljZSA9ID9cbiAgICAgICAgICAgIFdIRVJFIHByb2R1Y3RfaWQgPSA/XG4gICAgICAgIGA7XG4gICAgICAgICAgICBhd2FpdCBxdWVyeURhdGFiYXNlKHVwZGF0ZVF1ZXJ5LCBbcXVhbnRpdHksIHByaWNlLCB0b3RhbF9wcmljZSwgcHJvZHVjdF9pZF0pO1xuXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdDYXJ0IGl0ZW0gdXBkYXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHByaWNlIGJhc2VkIG9uIHByb2R1Y3QgcHJpY2UgYW5kIHF1YW50aXR5XG4gICAgICAgIGNvbnN0IHByaWNlID0gcGFyc2VGbG9hdChwcm9kdWN0WzBdLnByaWNlKTtcbiAgICAgICAgY29uc3QgdG90YWxfcHJpY2UgPSBwcmljZSAqIHF1YW50aXR5O1xuXG4gICAgICAgIC8vIEluc2VydCB0aGUgaXRlbSBpbnRvIHRoZSBjYXJ0XG4gICAgICAgIGNvbnN0IGluc2VydFF1ZXJ5ID0gYFxuICAgICAgICAgICAgSU5TRVJUIElOVE8gY2FydHMgKHVzZXJfaWQsIHByb2R1Y3RfaWQsIHF1YW50aXR5LCBwcmljZSwgdG90YWxfcHJpY2UpXG4gICAgICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8pXG4gICAgICAgIGA7XG4gICAgICAgIGF3YWl0IHF1ZXJ5RGF0YWJhc2UoaW5zZXJ0UXVlcnksIFt1c2VySWQsIHByb2R1Y3RfaWQsIHF1YW50aXR5LCBwcmljZSwgdG90YWxfcHJpY2VdKTtcblxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdQcm9kdWN0IGFkZGVkIHRvIGNhcnQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0RhdGFiYXNlIGVycm9yOicgKyBlcnIgfSk7XG4gICAgfVxufSk7XG4vLyBBUEkgcm91dGUgdG8gdXBkYXRlIGEgcHJvZHVjdCBiYXNlZCBvbiBwcm9kdWN0SWRcbmFwcC5wdXQoJy9hcGkvcHJvZHVjdHMvOnByb2R1Y3RJZCcsIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHtwcm9kdWN0SWR9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7bmFtZSwgcHJpY2UsIGRlc2NyaXB0aW9uLCBpbWFnZVVybCwgYXZlcmFnZVJhdGluZ30gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IHVwZGF0ZVF1ZXJ5ID0gYFxuICAgIFVQREFURSBwcm9kdWN0c1xuICAgIFNFVCBuYW1lID0gPywgcHJpY2UgPSA/LCBkZXNjcmlwdGlvbiA9ID8sIGltYWdlVXJsID0gPywgYXZlcmFnZVJhdGluZyA9ID9cbiAgICBXSEVSRSBpZCA9ID9cbiAgYDtcblxuICAgIGRiLnJ1bih1cGRhdGVRdWVyeSwgW25hbWUsIHByaWNlLCBkZXNjcmlwdGlvbiwgaW1hZ2VVcmwsIGF2ZXJhZ2VSYXRpbmcsIHByb2R1Y3RJZF0sIChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIHByb2R1Y3QnfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7bWVzc2FnZTogJ1Byb2R1Y3QgdXBkYXRlZCBzdWNjZXNzZnVsbHknfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG4vLyBBUEkgcm91dGUgdG8gdXBkYXRlIHRoZSBxdWFudGl0eSBvZiBhIHByb2R1Y3QgaW4gYSB1c2VyJ3MgY2FydFxuYXBwLnB1dCgnL2FwaS91c2Vycy86dXNlcklkL2NhcnQvOmNhcnRJdGVtSWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IHVzZXJJZCwgY2FydEl0ZW1JZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHF1YW50aXR5IH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICAgIC8vIEZldGNoIHRoZSBjYXJ0IGl0ZW0gZGV0YWlsc1xuICAgICAgICBjb25zdCBjYXJ0SXRlbSA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gY2FydHMgV0hFUkUgaWQgPSA/IEFORCB1c2VyX2lkID0gPycsIFtjYXJ0SXRlbUlkLCB1c2VySWRdKTtcbiAgICAgICAgaWYgKCFjYXJ0SXRlbVswXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oJ0NvdWxkIG5vdCBmaW5kIGNhcnQgaXRlbSEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZldGNoIHByb2R1Y3QgZGV0YWlscyBmcm9tIHRoZSBwcm9kdWN0cyB0YWJsZVxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcXVlcnlEYXRhYmFzZSgnU0VMRUNUICogRlJPTSBwcm9kdWN0cyBXSEVSRSBpZCA9ID8nLCBbY2FydEl0ZW1bMF0ucHJvZHVjdF9pZF0pO1xuICAgICAgICBpZiAoIXByb2R1Y3RbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKCdDb3VsZCBub3QgZmluZCBwcm9kdWN0IScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHByaWNlIGJhc2VkIG9uIHVwZGF0ZWQgcXVhbnRpdHlcbiAgICAgICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KHByb2R1Y3RbMF0ucHJpY2UpO1xuICAgICAgICBjb25zdCB0b3RhbF9wcmljZSA9IHByaWNlICogcXVhbnRpdHk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBjYXJ0IGl0ZW0gd2l0aCBuZXcgcXVhbnRpdHkgYW5kIHRvdGFsIHByaWNlXG4gICAgICAgIGNvbnN0IHVwZGF0ZVF1ZXJ5ID0gYFxuICAgICAgICAgICAgVVBEQVRFIGNhcnRzXG4gICAgICAgICAgICBTRVQgcXVhbnRpdHkgPSA/LCBwcmljZSA9ID8sIHRvdGFsX3ByaWNlID0gP1xuICAgICAgICAgICAgV0hFUkUgaWQgPSA/XG4gICAgICAgIGA7XG4gICAgICAgIGF3YWl0IHF1ZXJ5RGF0YWJhc2UodXBkYXRlUXVlcnksIFtxdWFudGl0eSwgcHJpY2UsIHRvdGFsX3ByaWNlLCBjYXJ0SXRlbUlkXSk7XG5cbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnQ2FydCBpdGVtIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0RhdGFiYXNlIGVycm9yJyB9KTtcbiAgICB9XG59KTtcblxuYXBwLmRlbGV0ZSgnL2FwaS91c2Vycy86dXNlcklkL2NhcnQvOmNhcnRJdGVtSWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IHVzZXJJZCwgY2FydEl0ZW1JZCB9ID0gcmVxLnBhcmFtcztcblxuICAgIHRyeSB7XG4gICAgICAgIC8vIEZldGNoIHRoZSBjYXJ0IGl0ZW0gZGV0YWlsc1xuICAgICAgICBjb25zdCBjYXJ0SXRlbSA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gY2FydHMgV0hFUkUgaWQgPSA/IEFORCB1c2VyX2lkID0gPycsIFtjYXJ0SXRlbUlkLCB1c2VySWRdKTtcbiAgICAgICAgaWYgKCFjYXJ0SXRlbVswXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnQ291bGQgbm90IGZpbmQgY2FydCBpdGVtIScgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWxldGUgdGhlIGl0ZW0gZnJvbSB0aGUgY2FydFxuICAgICAgICBjb25zdCBkZWxldGVRdWVyeSA9IGBcbiAgICAgICAgICAgIERFTEVURSBGUk9NIGNhcnRzXG4gICAgICAgICAgICBXSEVSRSBpZCA9ID8gQU5EIHVzZXJfaWQgPSA/XG4gICAgICAgIGA7XG4gICAgICAgIGF3YWl0IHF1ZXJ5RGF0YWJhc2UoZGVsZXRlUXVlcnksIFtjYXJ0SXRlbUlkLCB1c2VySWRdKTtcblxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdQcm9kdWN0IHJlbW92ZWQgZnJvbSBjYXJ0IHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0RhdGFiYXNlIGVycm9yJyB9KTtcbiAgICB9XG59KTtcbi8vIEFQSSByb3V0ZSB0byBkZWxldGUgYSBwcm9kdWN0IGJhc2VkIG9uIHByb2R1Y3RJZFxuYXBwLmRlbGV0ZSgnL2FwaS9wcm9kdWN0cy86cHJvZHVjdElkJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qge3Byb2R1Y3RJZH0gPSByZXEucGFyYW1zO1xuXG4gICAgY29uc3QgZGVsZXRlUXVlcnkgPSBgXG4gICAgREVMRVRFIEZST00gcHJvZHVjdHNcbiAgICBXSEVSRSBpZCA9ID9cbiAgYDtcblxuICAgIGRiLnJ1bihkZWxldGVRdWVyeSwgW3Byb2R1Y3RJZF0sIChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ZXJyb3I6ICdGYWlsZWQgdG8gZGVsZXRlIHByb2R1Y3QnfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7bWVzc2FnZTogJ1Byb2R1Y3QgZGVsZXRlZCBzdWNjZXNzZnVsbHknfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG5cbi8vIERlZmluZSBvdGhlciByb3V0ZXMgaGVyZVxuXG4vLyAuLi4gVGhlIHJlc3Qgb2YgeW91ciBBUEkgcm91dGVzIC4uLlxuXG5hcHAubGlzdGVuKDgwMDAsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnU2VydmVyIGlzIGxpc3RlbmluZyBvbiBwb3J0IDgwMDAnKTtcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxXQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxLQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFNSSxJQUFJLEdBQUdKLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsSUFBTUssR0FBRyxHQUFHLElBQUFDLG1CQUFPLEVBQUMsQ0FBQztBQUVyQkQsR0FBRyxDQUFDRSxHQUFHLENBQUNILElBQUksQ0FBQyxDQUFDLENBQUM7QUFFZkMsR0FBRyxDQUFDRSxHQUFHLENBQUNDLHNCQUFVLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDMUJKLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLFNBQVMsRUFBRUQsbUJBQU8sVUFBTyxDQUFDSSxnQkFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBRXJFLElBQU1DLEVBQUUsR0FBRyxJQUFJQyxrQkFBTyxDQUFDQyxRQUFRLENBQUMsV0FBVyxFQUFFRCxrQkFBTyxDQUFDRSxjQUFjLEdBQUdGLGtCQUFPLENBQUNHLFdBQVcsRUFBRSxVQUFDQyxHQUFHLEVBQUs7RUFDaEcsSUFBSUEsR0FBRyxFQUFFO0lBQ0xDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDRixHQUFHLENBQUNHLE9BQU8sQ0FBQztFQUM5QixDQUFDLE1BQU07SUFDSEYsT0FBTyxDQUFDRyxHQUFHLENBQUMsMkJBQTJCLENBQUM7O0lBRXhDO0lBQ0E7SUFDQVQsRUFBRSxDQUFDVSxHQUFHLDBTQVNILFVBQUNDLFNBQVMsRUFBSztNQUNkLElBQUlBLFNBQVMsRUFBRTtRQUNYTCxPQUFPLENBQUNDLEtBQUssQ0FBQyxnQ0FBZ0MsRUFBRUksU0FBUyxDQUFDSCxPQUFPLENBQUM7TUFDdEUsQ0FBQyxNQUFNO1FBQ0hGLE9BQU8sQ0FBQ0csR0FBRyxDQUFDLHFDQUFxQyxDQUFDO01BQ3REO0lBQ0osQ0FBQyxDQUFDOztJQUVGO0lBQ0FULEVBQUUsQ0FBQ1UsR0FBRyxzUkFRSCxVQUFDQyxTQUFTLEVBQUs7TUFDZCxJQUFJQSxTQUFTLEVBQUU7UUFDWEwsT0FBTyxDQUFDQyxLQUFLLENBQUMsNkJBQTZCLEVBQUVJLFNBQVMsQ0FBQ0gsT0FBTyxDQUFDO01BQ25FLENBQUMsTUFBTTtRQUNIRixPQUFPLENBQUNHLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQztNQUNuRDtJQUNKLENBQUMsQ0FBQztJQUVGVCxFQUFFLENBQUNVLEdBQUcsMGVBWUgsVUFBQ0MsU0FBUyxFQUFLO01BQ2QsSUFBSUEsU0FBUyxFQUFFO1FBQ1hMLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLDZCQUE2QixFQUFFSSxTQUFTLENBQUNILE9BQU8sQ0FBQztNQUNuRSxDQUFDLE1BQU07UUFDSEYsT0FBTyxDQUFDRyxHQUFHLENBQUMsa0NBQWtDLENBQUM7TUFDbkQ7SUFDSixDQUFDLENBQUM7RUFDTjtBQUNKLENBQUMsQ0FBQzs7QUFFRjtBQUFBLFNBR2VHLGFBQWFBLENBQUFDLEVBQUEsRUFBQUMsR0FBQTtFQUFBLE9BQUFDLGNBQUEsQ0FBQUMsS0FBQSxPQUFBQyxTQUFBO0FBQUE7QUFBQSxTQUFBRixlQUFBO0VBQUFBLGNBQUEsT0FBQUcsa0JBQUEsMkJBQUFDLFlBQUEsWUFBQUMsSUFBQSxDQUE1QixTQUFBQyxTQUE2QkMsS0FBSyxFQUFFQyxNQUFNO0lBQUEsT0FBQUosWUFBQSxZQUFBSyxJQUFBLFVBQUFDLFVBQUFDLFNBQUE7TUFBQSxrQkFBQUEsU0FBQSxDQUFBQyxJQUFBLEdBQUFELFNBQUEsQ0FBQUUsSUFBQTtRQUFBO1VBQUEsT0FBQUYsU0FBQSxDQUFBRyxNQUFBLFdBQy9CLElBQUlDLE9BQU8sQ0FBQyxVQUFDQyxPQUFPLEVBQUVDLE1BQU0sRUFBSztZQUNwQyxJQUFNaEMsRUFBRSxHQUFHLElBQUlDLGtCQUFPLENBQUNDLFFBQVEsQ0FBQyxXQUFXLENBQUM7WUFDNUNGLEVBQUUsQ0FBQ2lDLEdBQUcsQ0FBQ1gsS0FBSyxFQUFFQyxNQUFNLEVBQUUsVUFBQ2xCLEdBQUcsRUFBRTZCLElBQUksRUFBSztjQUNqQyxJQUFJN0IsR0FBRyxFQUFFO2dCQUNMMkIsTUFBTSxDQUFDM0IsR0FBRyxDQUFDO2NBQ2YsQ0FBQyxNQUFNO2dCQUNIMEIsT0FBTyxDQUFDRyxJQUFJLENBQUM7Y0FDakI7Y0FDQWxDLEVBQUUsQ0FBQ21DLEtBQUssQ0FBQyxDQUFDO1lBQ2QsQ0FBQyxDQUFDO1VBQ04sQ0FBQyxDQUFDO1FBQUE7UUFBQTtVQUFBLE9BQUFULFNBQUEsQ0FBQVUsSUFBQTtNQUFBO0lBQUEsR0FBQWYsUUFBQTtFQUFBLENBQ0w7RUFBQSxPQUFBTixjQUFBLENBQUFDLEtBQUEsT0FBQUMsU0FBQTtBQUFBO0FBRUR6QixHQUFHLENBQUM2QyxHQUFHLENBQUMsZUFBZTtFQUFBLElBQUFDLElBQUEsT0FBQXBCLGtCQUFBLDJCQUFBQyxZQUFBLFlBQUFDLElBQUEsQ0FBRSxTQUFBbUIsUUFBT0MsR0FBRyxFQUFFQyxHQUFHO0lBQUEsSUFBQVAsSUFBQTtJQUFBLE9BQUFmLFlBQUEsWUFBQUssSUFBQSxVQUFBa0IsU0FBQUMsUUFBQTtNQUFBLGtCQUFBQSxRQUFBLENBQUFoQixJQUFBLEdBQUFnQixRQUFBLENBQUFmLElBQUE7UUFBQTtVQUFBZSxRQUFBLENBQUFoQixJQUFBO1VBQUFnQixRQUFBLENBQUFmLElBQUE7VUFBQSxPQUViaEIsYUFBYSxDQUFDLHdCQUF3QixFQUFFLEVBQUUsQ0FBQztRQUFBO1VBQXhEc0IsSUFBSSxHQUFBUyxRQUFBLENBQUFDLElBQUE7VUFDVkgsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUNzQyxJQUFJLENBQUM7VUFBQ1MsUUFBQSxDQUFBZixJQUFBO1VBQUE7UUFBQTtVQUFBZSxRQUFBLENBQUFoQixJQUFBO1VBQUFnQixRQUFBLENBQUFHLEVBQUEsR0FBQUgsUUFBQTtVQUUzQkYsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUM7WUFBQ1csS0FBSyxFQUFFO1VBQWdCLENBQUMsQ0FBQztRQUFDO1FBQUE7VUFBQSxPQUFBb0MsUUFBQSxDQUFBUCxJQUFBO01BQUE7SUFBQSxHQUFBRyxPQUFBO0VBQUEsQ0FFdkQ7RUFBQSxpQkFBQVEsR0FBQSxFQUFBQyxHQUFBO0lBQUEsT0FBQVYsSUFBQSxDQUFBdEIsS0FBQSxPQUFBQyxTQUFBO0VBQUE7QUFBQSxJQUFDO0FBQ0Y7QUFDQXpCLEdBQUcsQ0FBQzZDLEdBQUcsQ0FBQyx5QkFBeUI7RUFBQSxJQUFBWSxLQUFBLE9BQUEvQixrQkFBQSwyQkFBQUMsWUFBQSxZQUFBQyxJQUFBLENBQUUsU0FBQThCLFNBQU9WLEdBQUcsRUFBRUMsR0FBRztJQUFBLElBQUFVLE1BQUEsRUFBQUMsU0FBQTtJQUFBLE9BQUFqQyxZQUFBLFlBQUFLLElBQUEsVUFBQTZCLFVBQUFDLFNBQUE7TUFBQSxrQkFBQUEsU0FBQSxDQUFBM0IsSUFBQSxHQUFBMkIsU0FBQSxDQUFBMUIsSUFBQTtRQUFBO1VBQ3RDdUIsTUFBTSxHQUFLWCxHQUFHLENBQUNqQixNQUFNLENBQXJCNEIsTUFBTTtVQUFBRyxTQUFBLENBQUEzQixJQUFBO1VBQUEyQixTQUFBLENBQUExQixJQUFBO1VBQUEsT0FHY2hCLGFBQWEsQ0FDakMsMENBQTBDLEdBQzFDLGVBQWUsR0FDZix5Q0FBeUMsR0FDekMscUJBQXFCLEVBQ3JCLENBQUN1QyxNQUFNLENBQ1gsQ0FBQztRQUFBO1VBTktDLFNBQVMsR0FBQUUsU0FBQSxDQUFBVixJQUFBO1VBT2ZILEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDakQsSUFBSSxDQUFDd0QsU0FBUyxDQUFDO1VBQUNFLFNBQUEsQ0FBQTFCLElBQUE7VUFBQTtRQUFBO1VBQUEwQixTQUFBLENBQUEzQixJQUFBO1VBQUEyQixTQUFBLENBQUFSLEVBQUEsR0FBQVEsU0FBQTtVQUVoQ2IsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUM7WUFBRVcsS0FBSyxFQUFFO1VBQWlCLENBQUMsQ0FBQztRQUFDO1FBQUE7VUFBQSxPQUFBK0MsU0FBQSxDQUFBbEIsSUFBQTtNQUFBO0lBQUEsR0FBQWMsUUFBQTtFQUFBLENBRXpEO0VBQUEsaUJBQUFLLEdBQUEsRUFBQUMsR0FBQTtJQUFBLE9BQUFQLEtBQUEsQ0FBQWpDLEtBQUEsT0FBQUMsU0FBQTtFQUFBO0FBQUEsSUFBQztBQUVGekIsR0FBRyxDQUFDNkMsR0FBRyxDQUFDLDBCQUEwQjtFQUFBLElBQUFvQixLQUFBLE9BQUF2QyxrQkFBQSwyQkFBQUMsWUFBQSxZQUFBQyxJQUFBLENBQUUsU0FBQXNDLFNBQU9sQixHQUFHLEVBQUVDLEdBQUc7SUFBQSxJQUFBa0IsU0FBQSxFQUFBQyxPQUFBO0lBQUEsT0FBQXpDLFlBQUEsWUFBQUssSUFBQSxVQUFBcUMsVUFBQUMsU0FBQTtNQUFBLGtCQUFBQSxTQUFBLENBQUFuQyxJQUFBLEdBQUFtQyxTQUFBLENBQUFsQyxJQUFBO1FBQUE7VUFDeEMrQixTQUFTLEdBQUluQixHQUFHLENBQUNqQixNQUFNLENBQXZCb0MsU0FBUztVQUFBRyxTQUFBLENBQUFuQyxJQUFBO1VBQUFtQyxTQUFBLENBQUFsQyxJQUFBO1VBQUEsT0FHVWhCLGFBQWEsQ0FBQyxxQ0FBcUMsRUFBRSxDQUFDK0MsU0FBUyxDQUFDLENBQUM7UUFBQTtVQUFqRkMsT0FBTyxHQUFBRSxTQUFBLENBQUFsQixJQUFBO1VBQUEsSUFDUmdCLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFBQUUsU0FBQSxDQUFBbEMsSUFBQTtZQUFBO1VBQUE7VUFDWGEsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUMsNkJBQTZCLENBQUM7VUFBQyxPQUFBa0UsU0FBQSxDQUFBakMsTUFBQTtRQUFBO1VBR3hEWSxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2pELElBQUksQ0FBQ2dFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztVQUFDRSxTQUFBLENBQUFsQyxJQUFBO1VBQUE7UUFBQTtVQUFBa0MsU0FBQSxDQUFBbkMsSUFBQTtVQUFBbUMsU0FBQSxDQUFBaEIsRUFBQSxHQUFBZ0IsU0FBQTtVQUVqQ3JCLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDakQsSUFBSSxDQUFDO1lBQUNXLEtBQUssRUFBRTtVQUFnQixDQUFDLENBQUM7UUFBQztRQUFBO1VBQUEsT0FBQXVELFNBQUEsQ0FBQTFCLElBQUE7TUFBQTtJQUFBLEdBQUFzQixRQUFBO0VBQUEsQ0FFdkQ7RUFBQSxpQkFBQUssR0FBQSxFQUFBQyxHQUFBO0lBQUEsT0FBQVAsS0FBQSxDQUFBekMsS0FBQSxPQUFBQyxTQUFBO0VBQUE7QUFBQSxJQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQXpCLEdBQUcsQ0FBQ3lFLElBQUksQ0FBQyxlQUFlLEVBQUUsVUFBQ3pCLEdBQUcsRUFBRUMsR0FBRyxFQUFLO0VBQ3BDLElBQUF5QixTQUFBLEdBQWdFMUIsR0FBRyxDQUFDMkIsSUFBSTtJQUFqRUMsRUFBRSxHQUFBRixTQUFBLENBQUZFLEVBQUU7SUFBRUMsSUFBSSxHQUFBSCxTQUFBLENBQUpHLElBQUk7SUFBRUMsS0FBSyxHQUFBSixTQUFBLENBQUxJLEtBQUs7SUFBRUMsV0FBVyxHQUFBTCxTQUFBLENBQVhLLFdBQVc7SUFBRUMsUUFBUSxHQUFBTixTQUFBLENBQVJNLFFBQVE7SUFBRUMsYUFBYSxHQUFBUCxTQUFBLENBQWJPLGFBQWE7RUFFNUQsSUFBTUMsV0FBVyxtSEFHbEI7RUFFQzFFLEVBQUUsQ0FBQ1UsR0FBRyxDQUFDZ0UsV0FBVyxFQUFFLENBQUNMLElBQUksRUFBRUMsS0FBSyxFQUFFQyxXQUFXLEVBQUVDLFFBQVEsRUFBRUMsYUFBYSxDQUFDLEVBQUUsVUFBQ3BFLEdBQUcsRUFBSztJQUM5RSxJQUFJQSxHQUFHLEVBQUU7TUFDTEMsT0FBTyxDQUFDQyxLQUFLLENBQUNGLEdBQUcsQ0FBQ0csT0FBTyxDQUFDO01BQzFCaUMsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUM7UUFBQ1csS0FBSyxFQUFFO01BQTBCLENBQUMsQ0FBQztJQUM3RCxDQUFDLE1BQU07TUFDSGtDLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDakQsSUFBSSxDQUFDO1FBQUNZLE9BQU8sRUFBRTtNQUErQixDQUFDLENBQUM7SUFDcEU7RUFDSixDQUFDLENBQUM7QUFDTixDQUFDLENBQUM7O0FBRUY7QUFDQWhCLEdBQUcsQ0FBQ3lFLElBQUksQ0FBQyx5QkFBeUI7RUFBQSxJQUFBVSxLQUFBLE9BQUF6RCxrQkFBQSwyQkFBQUMsWUFBQSxZQUFBQyxJQUFBLENBQUUsU0FBQXdELFNBQU9wQyxHQUFHLEVBQUVDLEdBQUc7SUFBQSxJQUFBVSxNQUFBLEVBQUEwQixVQUFBLEVBQUFDLFVBQUEsRUFBQUMsUUFBQSxFQUFBbkIsT0FBQSxFQUFBb0IsUUFBQSxFQUFBQyxNQUFBLEVBQUFDLFlBQUEsRUFBQUMsV0FBQSxFQUFBYixLQUFBLEVBQUFjLFdBQUEsRUFBQVYsV0FBQTtJQUFBLE9BQUF2RCxZQUFBLFlBQUFLLElBQUEsVUFBQTZELFVBQUFDLFNBQUE7TUFBQSxrQkFBQUEsU0FBQSxDQUFBM0QsSUFBQSxHQUFBMkQsU0FBQSxDQUFBMUQsSUFBQTtRQUFBO1VBQ3ZDdUIsTUFBTSxHQUFLWCxHQUFHLENBQUNqQixNQUFNLENBQXJCNEIsTUFBTTtVQUFBMEIsVUFBQSxHQUNtQnJDLEdBQUcsQ0FBQzJCLElBQUksRUFBakNXLFVBQVUsR0FBQUQsVUFBQSxDQUFWQyxVQUFVLEVBQUVDLFFBQVEsR0FBQUYsVUFBQSxDQUFSRSxRQUFRO1VBQUFPLFNBQUEsQ0FBQTNELElBQUE7VUFBQTJELFNBQUEsQ0FBQTFELElBQUE7VUFBQSxPQUlGaEIsYUFBYSxDQUFDLHFDQUFxQyxFQUFFLENBQUNrRSxVQUFVLENBQUMsQ0FBQztRQUFBO1VBQWxGbEIsT0FBTyxHQUFBMEIsU0FBQSxDQUFBMUMsSUFBQTtVQUFBLElBQ1JnQixPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQUEwQixTQUFBLENBQUExRCxJQUFBO1lBQUE7VUFBQTtVQUNYYSxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2pELElBQUksQ0FBQyx5QkFBeUIsQ0FBQztVQUFDLE9BQUEwRixTQUFBLENBQUF6RCxNQUFBO1FBQUE7VUFBQXlELFNBQUEsQ0FBQTFELElBQUE7VUFBQSxPQUs3QmhCLGFBQWEsQ0FBQywwREFBMEQsRUFBRSxDQUFDa0UsVUFBVSxFQUFFM0IsTUFBTSxDQUFDLENBQUM7UUFBQTtVQUFoSDZCLFFBQVEsR0FBQU0sU0FBQSxDQUFBMUMsSUFBQTtVQUFBLEtBQ1ZvQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQUFNLFNBQUEsQ0FBQTFELElBQUE7WUFBQTtVQUFBO1VBQ1g7VUFDQTtVQUNNMEMsTUFBSyxHQUFHaUIsVUFBVSxDQUFDM0IsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDVSxLQUFLLENBQUM7VUFDcENjLFlBQVcsR0FBR2QsTUFBSyxHQUFHUyxRQUFRLEVBRXBDO1VBQ01JLFdBQVc7VUFBQUcsU0FBQSxDQUFBMUQsSUFBQTtVQUFBLE9BS1hoQixhQUFhLENBQUN1RSxXQUFXLEVBQUUsQ0FBQ0osUUFBUSxFQUFFVCxNQUFLLEVBQUVjLFlBQVcsRUFBRU4sVUFBVSxDQUFDLENBQUM7UUFBQTtVQUU1RXJDLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDakQsSUFBSSxDQUFDO1lBQUVZLE9BQU8sRUFBRTtVQUFpQyxDQUFDLENBQUM7VUFBQyxPQUFBOEUsU0FBQSxDQUFBekQsTUFBQTtRQUFBO1VBSXhFO1VBQ015QyxLQUFLLEdBQUdpQixVQUFVLENBQUMzQixPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUNVLEtBQUssQ0FBQztVQUNwQ2MsV0FBVyxHQUFHZCxLQUFLLEdBQUdTLFFBQVEsRUFFcEM7VUFDTUwsV0FBVztVQUFBWSxTQUFBLENBQUExRCxJQUFBO1VBQUEsT0FJWGhCLGFBQWEsQ0FBQzhELFdBQVcsRUFBRSxDQUFDdkIsTUFBTSxFQUFFMkIsVUFBVSxFQUFFQyxRQUFRLEVBQUVULEtBQUssRUFBRWMsV0FBVyxDQUFDLENBQUM7UUFBQTtVQUVwRjNDLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDakQsSUFBSSxDQUFDO1lBQUVZLE9BQU8sRUFBRTtVQUFxQyxDQUFDLENBQUM7VUFBQzhFLFNBQUEsQ0FBQTFELElBQUE7VUFBQTtRQUFBO1VBQUEwRCxTQUFBLENBQUEzRCxJQUFBO1VBQUEyRCxTQUFBLENBQUF4QyxFQUFBLEdBQUF3QyxTQUFBO1VBRXhFN0MsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUM7WUFBRVcsS0FBSyxFQUFFLGlCQUFpQixHQUFBK0UsU0FBQSxDQUFBeEM7VUFBTyxDQUFDLENBQUM7UUFBQztRQUFBO1VBQUEsT0FBQXdDLFNBQUEsQ0FBQWxELElBQUE7TUFBQTtJQUFBLEdBQUF3QyxRQUFBO0VBQUEsQ0FFaEU7RUFBQSxpQkFBQVksR0FBQSxFQUFBQyxJQUFBO0lBQUEsT0FBQWQsS0FBQSxDQUFBM0QsS0FBQSxPQUFBQyxTQUFBO0VBQUE7QUFBQSxJQUFDO0FBQ0Y7QUFDQXpCLEdBQUcsQ0FBQ2tHLEdBQUcsQ0FBQywwQkFBMEIsRUFBRSxVQUFDbEQsR0FBRyxFQUFFQyxHQUFHLEVBQUs7RUFDOUMsSUFBT2tCLFNBQVMsR0FBSW5CLEdBQUcsQ0FBQ2pCLE1BQU0sQ0FBdkJvQyxTQUFTO0VBQ2hCLElBQUFnQyxVQUFBLEdBQTREbkQsR0FBRyxDQUFDMkIsSUFBSTtJQUE3REUsSUFBSSxHQUFBc0IsVUFBQSxDQUFKdEIsSUFBSTtJQUFFQyxLQUFLLEdBQUFxQixVQUFBLENBQUxyQixLQUFLO0lBQUVDLFdBQVcsR0FBQW9CLFVBQUEsQ0FBWHBCLFdBQVc7SUFBRUMsUUFBUSxHQUFBbUIsVUFBQSxDQUFSbkIsUUFBUTtJQUFFQyxhQUFhLEdBQUFrQixVQUFBLENBQWJsQixhQUFhO0VBRXhELElBQU1VLFdBQVcsK0hBSWxCO0VBRUNuRixFQUFFLENBQUNVLEdBQUcsQ0FBQ3lFLFdBQVcsRUFBRSxDQUFDZCxJQUFJLEVBQUVDLEtBQUssRUFBRUMsV0FBVyxFQUFFQyxRQUFRLEVBQUVDLGFBQWEsRUFBRWQsU0FBUyxDQUFDLEVBQUUsVUFBQ3RELEdBQUcsRUFBSztJQUN6RixJQUFJQSxHQUFHLEVBQUU7TUFDTEMsT0FBTyxDQUFDQyxLQUFLLENBQUNGLEdBQUcsQ0FBQ0csT0FBTyxDQUFDO01BQzFCaUMsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUM7UUFBQ1csS0FBSyxFQUFFO01BQTBCLENBQUMsQ0FBQztJQUM3RCxDQUFDLE1BQU07TUFDSGtDLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDakQsSUFBSSxDQUFDO1FBQUNZLE9BQU8sRUFBRTtNQUE4QixDQUFDLENBQUM7SUFDbkU7RUFDSixDQUFDLENBQUM7QUFDTixDQUFDLENBQUM7O0FBRUY7QUFDQWhCLEdBQUcsQ0FBQ2tHLEdBQUcsQ0FBQyxxQ0FBcUM7RUFBQSxJQUFBRSxLQUFBLE9BQUExRSxrQkFBQSwyQkFBQUMsWUFBQSxZQUFBQyxJQUFBLENBQUUsU0FBQXlFLFNBQU9yRCxHQUFHLEVBQUVDLEdBQUc7SUFBQSxJQUFBcUQsV0FBQSxFQUFBM0MsTUFBQSxFQUFBNEMsVUFBQSxFQUFBaEIsUUFBQSxFQUFBQyxRQUFBLEVBQUFwQixPQUFBLEVBQUFVLEtBQUEsRUFBQWMsV0FBQSxFQUFBRCxXQUFBO0lBQUEsT0FBQWhFLFlBQUEsWUFBQUssSUFBQSxVQUFBd0UsVUFBQUMsU0FBQTtNQUFBLGtCQUFBQSxTQUFBLENBQUF0RSxJQUFBLEdBQUFzRSxTQUFBLENBQUFyRSxJQUFBO1FBQUE7VUFBQWtFLFdBQUEsR0FDM0J0RCxHQUFHLENBQUNqQixNQUFNLEVBQWpDNEIsTUFBTSxHQUFBMkMsV0FBQSxDQUFOM0MsTUFBTSxFQUFFNEMsVUFBVSxHQUFBRCxXQUFBLENBQVZDLFVBQVU7VUFDbEJoQixRQUFRLEdBQUt2QyxHQUFHLENBQUMyQixJQUFJLENBQXJCWSxRQUFRO1VBQUFrQixTQUFBLENBQUF0RSxJQUFBO1VBQUFzRSxTQUFBLENBQUFyRSxJQUFBO1VBQUEsT0FJV2hCLGFBQWEsQ0FBQyxrREFBa0QsRUFBRSxDQUFDbUYsVUFBVSxFQUFFNUMsTUFBTSxDQUFDLENBQUM7UUFBQTtVQUF4RzZCLFFBQVEsR0FBQWlCLFNBQUEsQ0FBQXJELElBQUE7VUFBQSxJQUNUb0MsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUFBaUIsU0FBQSxDQUFBckUsSUFBQTtZQUFBO1VBQUE7VUFDWmEsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUMsMkJBQTJCLENBQUM7VUFBQyxPQUFBcUcsU0FBQSxDQUFBcEUsTUFBQTtRQUFBO1VBQUFvRSxTQUFBLENBQUFyRSxJQUFBO1VBQUEsT0FLaENoQixhQUFhLENBQUMscUNBQXFDLEVBQUUsQ0FBQ29FLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQ0YsVUFBVSxDQUFDLENBQUM7UUFBQTtVQUE5RmxCLE9BQU8sR0FBQXFDLFNBQUEsQ0FBQXJELElBQUE7VUFBQSxJQUNSZ0IsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUFBcUMsU0FBQSxDQUFBckUsSUFBQTtZQUFBO1VBQUE7VUFDWGEsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUMseUJBQXlCLENBQUM7VUFBQyxPQUFBcUcsU0FBQSxDQUFBcEUsTUFBQTtRQUFBO1VBSXBEO1VBQ015QyxLQUFLLEdBQUdpQixVQUFVLENBQUMzQixPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUNVLEtBQUssQ0FBQztVQUNwQ2MsV0FBVyxHQUFHZCxLQUFLLEdBQUdTLFFBQVEsRUFFcEM7VUFDTUksV0FBVztVQUFBYyxTQUFBLENBQUFyRSxJQUFBO1VBQUEsT0FLWGhCLGFBQWEsQ0FBQ3VFLFdBQVcsRUFBRSxDQUFDSixRQUFRLEVBQUVULEtBQUssRUFBRWMsV0FBVyxFQUFFVyxVQUFVLENBQUMsQ0FBQztRQUFBO1VBRTVFdEQsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUM7WUFBRVksT0FBTyxFQUFFO1VBQWlDLENBQUMsQ0FBQztVQUFDeUYsU0FBQSxDQUFBckUsSUFBQTtVQUFBO1FBQUE7VUFBQXFFLFNBQUEsQ0FBQXRFLElBQUE7VUFBQXNFLFNBQUEsQ0FBQW5ELEVBQUEsR0FBQW1ELFNBQUE7VUFFcEV4RCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2pELElBQUksQ0FBQztZQUFFVyxLQUFLLEVBQUU7VUFBaUIsQ0FBQyxDQUFDO1FBQUM7UUFBQTtVQUFBLE9BQUEwRixTQUFBLENBQUE3RCxJQUFBO01BQUE7SUFBQSxHQUFBeUQsUUFBQTtFQUFBLENBRXpEO0VBQUEsaUJBQUFLLElBQUEsRUFBQUMsSUFBQTtJQUFBLE9BQUFQLEtBQUEsQ0FBQTVFLEtBQUEsT0FBQUMsU0FBQTtFQUFBO0FBQUEsSUFBQztBQUVGekIsR0FBRyxVQUFPLENBQUMscUNBQXFDO0VBQUEsSUFBQTRHLEtBQUEsT0FBQWxGLGtCQUFBLDJCQUFBQyxZQUFBLFlBQUFDLElBQUEsQ0FBRSxTQUFBaUYsU0FBTzdELEdBQUcsRUFBRUMsR0FBRztJQUFBLElBQUE2RCxZQUFBLEVBQUFuRCxNQUFBLEVBQUE0QyxVQUFBLEVBQUFmLFFBQUEsRUFBQXVCLFdBQUE7SUFBQSxPQUFBcEYsWUFBQSxZQUFBSyxJQUFBLFVBQUFnRixVQUFBQyxTQUFBO01BQUEsa0JBQUFBLFNBQUEsQ0FBQTlFLElBQUEsR0FBQThFLFNBQUEsQ0FBQTdFLElBQUE7UUFBQTtVQUFBMEUsWUFBQSxHQUM5QjlELEdBQUcsQ0FBQ2pCLE1BQU0sRUFBakM0QixNQUFNLEdBQUFtRCxZQUFBLENBQU5uRCxNQUFNLEVBQUU0QyxVQUFVLEdBQUFPLFlBQUEsQ0FBVlAsVUFBVTtVQUFBVSxTQUFBLENBQUE5RSxJQUFBO1VBQUE4RSxTQUFBLENBQUE3RSxJQUFBO1VBQUEsT0FJQ2hCLGFBQWEsQ0FBQyxrREFBa0QsRUFBRSxDQUFDbUYsVUFBVSxFQUFFNUMsTUFBTSxDQUFDLENBQUM7UUFBQTtVQUF4RzZCLFFBQVEsR0FBQXlCLFNBQUEsQ0FBQTdELElBQUE7VUFBQSxJQUNUb0MsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUFBeUIsU0FBQSxDQUFBN0UsSUFBQTtZQUFBO1VBQUE7VUFDWmEsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUM7WUFBRVksT0FBTyxFQUFFO1VBQTRCLENBQUMsQ0FBQztVQUFDLE9BQUFpRyxTQUFBLENBQUE1RSxNQUFBO1FBQUE7VUFJbkU7VUFDTTBFLFdBQVc7VUFBQUUsU0FBQSxDQUFBN0UsSUFBQTtVQUFBLE9BSVhoQixhQUFhLENBQUMyRixXQUFXLEVBQUUsQ0FBQ1IsVUFBVSxFQUFFNUMsTUFBTSxDQUFDLENBQUM7UUFBQTtVQUV0RFYsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNqRCxJQUFJLENBQUM7WUFBRVksT0FBTyxFQUFFO1VBQXlDLENBQUMsQ0FBQztVQUFDaUcsU0FBQSxDQUFBN0UsSUFBQTtVQUFBO1FBQUE7VUFBQTZFLFNBQUEsQ0FBQTlFLElBQUE7VUFBQThFLFNBQUEsQ0FBQTNELEVBQUEsR0FBQTJELFNBQUE7VUFFNUVoRSxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2pELElBQUksQ0FBQztZQUFFWSxPQUFPLEVBQUU7VUFBaUIsQ0FBQyxDQUFDO1FBQUM7UUFBQTtVQUFBLE9BQUFpRyxTQUFBLENBQUFyRSxJQUFBO01BQUE7SUFBQSxHQUFBaUUsUUFBQTtFQUFBLENBRTNEO0VBQUEsaUJBQUFLLElBQUEsRUFBQUMsSUFBQTtJQUFBLE9BQUFQLEtBQUEsQ0FBQXBGLEtBQUEsT0FBQUMsU0FBQTtFQUFBO0FBQUEsSUFBQztBQUNGO0FBQ0F6QixHQUFHLFVBQU8sQ0FBQywwQkFBMEIsRUFBRSxVQUFDZ0QsR0FBRyxFQUFFQyxHQUFHLEVBQUs7RUFDakQsSUFBT2tCLFNBQVMsR0FBSW5CLEdBQUcsQ0FBQ2pCLE1BQU0sQ0FBdkJvQyxTQUFTO0VBRWhCLElBQU00QyxXQUFXLHFEQUdsQjtFQUVDdkcsRUFBRSxDQUFDVSxHQUFHLENBQUM2RixXQUFXLEVBQUUsQ0FBQzVDLFNBQVMsQ0FBQyxFQUFFLFVBQUN0RCxHQUFHLEVBQUs7SUFDdEMsSUFBSUEsR0FBRyxFQUFFO01BQ0xDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDRixHQUFHLENBQUNHLE9BQU8sQ0FBQztNQUMxQmlDLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDakQsSUFBSSxDQUFDO1FBQUNXLEtBQUssRUFBRTtNQUEwQixDQUFDLENBQUM7SUFDN0QsQ0FBQyxNQUFNO01BQ0hrQyxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2pELElBQUksQ0FBQztRQUFDWSxPQUFPLEVBQUU7TUFBOEIsQ0FBQyxDQUFDO0lBQ25FO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDOztBQUdGOztBQUVBOztBQUVBaEIsR0FBRyxDQUFDb0gsTUFBTSxDQUFDLElBQUksRUFBRSxZQUFNO0VBQ25CdEcsT0FBTyxDQUFDRyxHQUFHLENBQUMsa0NBQWtDLENBQUM7QUFDbkQsQ0FBQyxDQUFDIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_bodyParser","_sqlite","_path","cors","app","express","use","bodyParser","json","path","join","__dirname","db","sqlite3","Database","OPEN_READWRITE","OPEN_CREATE","err","console","error","message","log","run","createErr","queryDatabase","_x","_x2","_queryDatabase","apply","arguments","_asyncToGenerator2","_regenerator","mark","_callee7","query","params","wrap","_callee7$","_context7","prev","next","abrupt","Promise","resolve","reject","all","rows","close","stop","get","_ref","_callee","req","res","_callee$","_context","sent","status","t0","_x3","_x4","_ref2","_callee2","userId","cartItems","_callee2$","_context2","_x5","_x6","_ref3","_callee3","productId","product","_callee3$","_context3","_x7","_x8","post","_req$body","body","id","name","price","description","imageUrl","averageRating","insertQuery","_ref4","_callee4","_req$body2","product_id","quantity","cartItem","_price","_total_price","updateQuery","total_price","_callee4$","_context4","parseFloat","_x9","_x10","put","_req$body3","_ref5","_callee5","_req$params","cartItemId","_callee5$","_context5","_x11","_x12","_ref6","_callee6","_req$params2","deleteQuery","_callee6$","_context6","_x13","_x14","listen"],"sourceRoot":"/home/muteeb/Desktop/e-store-backend/src/","sources":["server.js"],"sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport sqlite3 from 'sqlite3';\nimport path from 'path';\n\nconst cors = require('cors')\nconst app = express();\n\napp.use(cors());\n\napp.use(bodyParser.json());\napp.use('/images', express.static(path.join(__dirname, '../assets')));\n\nconst db = new sqlite3.Database('./mock.db', sqlite3.OPEN_READWRITE | sqlite3.OPEN_CREATE, (err) => {\n    if (err) {\n        console.error(err.message);\n    } else {\n        console.log('Connected to the database');\n\n        // Create tables and perform other initializations here\n        // (Code for creating products, users, and carts tables)\n        db.run(`\n            CREATE TABLE IF NOT EXISTS products (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                name TEXT,\n                price DOUBLE,\n                description TEXT,\n                imageUrl TEXT,\n                averageRating TEXT\n            )\n        `, (createErr) => {\n            if (createErr) {\n                console.error('Error creating products table:', createErr.message);\n            } else {\n                console.log('Products table created successfully');\n            }\n        });\n\n        // Create the users table if it doesn't exist\n        db.run(`\n            CREATE TABLE IF NOT EXISTS users (\n                id PRIMARY KEY AUTOINCREMENT,\n                username TEXT NOT NULL,\n                email TEXT NOT NULL,\n                PhoneNo TEXT,\n                cartItems TEXT DEFAULT ''\n            )\n        `, (createErr) => {\n            if (createErr) {\n                console.error('Error creating users table:', createErr.message);\n            } else {\n                console.log('Users table created successfully');\n            }\n        });\n\n        db.run(`\n            CREATE TABLE IF NOT EXISTS carts (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER, \n                cart_item_id INTEGER,\n                product_id INTEGER,\n                quantity INTEGER,\n                price DECIMAL(10, 2),\n                total_price DECIMAL(10, 2),\n                FOREIGN KEY (user_id) REFERENCES users(id),\n                FOREIGN KEY (product_id) REFERENCES products(id)\n            )\n        `, (createErr) => {\n            if (createErr) {\n                console.error('Error creating carts table:', createErr.message);\n            } else {\n                console.log('Carts table created successfully');\n            }\n        });\n    }\n});\n\n// ... Other parts of your code ...\n\n\nasync function queryDatabase(query, params) {\n    return new Promise((resolve, reject) => {\n        const db = new sqlite3.Database('./mock.db');\n        db.all(query, params, (err, rows) => {\n            if (err) {\n                reject(err);\n            } else {\n                resolve(rows);\n            }\n            db.close();\n        });\n    });\n}\n\napp.get('/api/products', async (req, res) => {\n    try {\n        const rows = await queryDatabase('SELECT * FROM products', []);\n        res.status(200).json(rows);\n    } catch (err) {\n        res.status(500).json({error: 'Database error'});\n    }\n});\n// API route to get a user's cart items\napp.get('/api/users/:userId/cart', async (req, res) => {\n    const { userId } = req.params;\n\n    try {\n        const cartItems = await queryDatabase(\n            'SELECT c.*, p.name, p.price, p.imageUrl ' +\n            'FROM carts c ' +\n            'JOIN products p ON c.product_id = p.id ' +\n            'WHERE c.user_id = ?',\n            [userId]\n        );\n        res.status(200).json(cartItems);\n    } catch (err) {\n        res.status(500).json({ error: 'Database error' });\n    }\n});\n\napp.get('/api/products/:productId', async (req, res) => {\n    const {productId} = req.params;\n\n    try {\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [productId]);\n        if (!product[0]) {\n            res.status(404).json('Could not find the product!');\n            return;\n        }\n        res.status(200).json(product[0]);\n    } catch (err) {\n        res.status(500).json({error: 'Database error'});\n    }\n});\n\n/*\napp.post('/api/users/:userId/cart', async (req, res) => {\n    const {userId} = req.params;\n    const {productId} = req.body;\n\n    try {\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [productId]);\n        if (!product[0]) {\n            res.status(404).json('Could not find product!');\n            return;\n        }\n        await queryDatabase('UPDATE users SET cartItems = cartItems || ? || \",\" WHERE id = ?', [productId, userId]);\n        res.status(200).json(product[0]);\n    } catch (err) {\n        res.status(500).json({error: 'Database error'});\n    }\n});\n*/\n\n/*\napp.delete('/api/users/:userId/cart/:productId', async (req, res) => {\n    const {userId, productId} = req.params;\n\n    try {\n        await queryDatabase('UPDATE users SET cartItems = REPLACE(cartItems, ? || \",\", \"\") WHERE id = ?', [productId, userId]);\n        const rows = await queryDatabase('SELECT * FROM products WHERE id IN (SELECT cartItems FROM users WHERE id = ?)', [userId]);\n        res.status(200).json(rows);\n    } catch (err) {\n        res.status(500).json({error: 'Database error'});\n    }\n});\n*/\n\n//insert,update,modify\n\napp.post('/api/products', (req, res) => {\n    const {id, name, price, description, imageUrl, averageRating} = req.body;\n\n    const insertQuery = `\n    INSERT INTO products (name, price, description, imageUrl, averageRating)\n    VALUES (?, ?, ?, ?, ?)\n  `;\n\n    db.run(insertQuery, [name, price, description, imageUrl, averageRating], (err) => {\n        if (err) {\n            console.error(err.message);\n            res.status(500).json({error: 'Failed to insert product'});\n        } else {\n            res.status(201).json({message: 'Product inserted successfully'});\n        }\n    });\n});\n\n// API route to add to cart\napp.post('/api/users/:userId/cart', async (req, res) => {\n    const { userId } = req.params;\n    const { product_id, quantity } = req.body;\n\n    try {\n        // Fetch product details from the products table\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [product_id]);\n        if (!product[0]) {\n            res.status(404).json('Could not find product!');\n            return;\n        }\n\n        // Fetch the cart item details\n        const cartItem = await queryDatabase('SELECT * FROM carts WHERE product_id = ? AND user_id = ?', [product_id, userId]);\n        if (cartItem[0]) {\n            // Calculate total price based on updated quantity\n            // const _qty = parseInt(cartItem[0].quantity) + quantity;\n            const price = parseFloat(product[0].price);\n            const total_price = price * quantity;\n\n            // Update the cart item with new quantity and total price\n            const updateQuery = `\n            UPDATE carts\n            SET quantity = ?, price = ?, total_price = ?\n            WHERE product_id = ?\n        `;\n            await queryDatabase(updateQuery, [quantity, price, total_price, product_id]);\n\n            res.status(200).json({ message: 'Cart item updated successfully' });\n            return;\n        }\n\n        // Calculate total price based on product price and quantity\n        const price = parseFloat(product[0].price);\n        const total_price = price * quantity;\n\n        // Insert the item into the cart\n        const insertQuery = `\n            INSERT INTO carts (user_id, product_id, quantity, price, total_price)\n            VALUES (?, ?, ?, ?, ?)\n        `;\n        await queryDatabase(insertQuery, [userId, product_id, quantity, price, total_price]);\n\n        res.status(200).json({ message: 'Product added to cart successfully' });\n    } catch (err) {\n        res.status(500).json({ error: 'Database error:' + err });\n    }\n});\n// API route to update a product based on productId\napp.put('/api/products/:productId', (req, res) => {\n    const {productId} = req.params;\n    const {name, price, description, imageUrl, averageRating} = req.body;\n\n    const updateQuery = `\n    UPDATE products\n    SET name = ?, price = ?, description = ?, imageUrl = ?, averageRating = ?\n    WHERE id = ?\n  `;\n\n    db.run(updateQuery, [name, price, description, imageUrl, averageRating, productId], (err) => {\n        if (err) {\n            console.error(err.message);\n            res.status(500).json({error: 'Failed to update product'});\n        } else {\n            res.status(200).json({message: 'Product updated successfully'});\n        }\n    });\n});\n\n// API route to update the quantity of a product in a user's cart\napp.put('/api/users/:userId/cart/:cartItemId', async (req, res) => {\n    const { userId, cartItemId } = req.params;\n    const { quantity } = req.body;\n\n    try {\n        // Fetch the cart item details\n        const cartItem = await queryDatabase('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        if (!cartItem[0]) {\n            res.status(404).json('Could not find cart item!');\n            return;\n        }\n\n        // Fetch product details from the products table\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [cartItem[0].product_id]);\n        if (!product[0]) {\n            res.status(404).json('Could not find product!');\n            return;\n        }\n\n        // Calculate total price based on updated quantity\n        const price = parseFloat(product[0].price);\n        const total_price = price * quantity;\n\n        // Update the cart item with new quantity and total price\n        const updateQuery = `\n            UPDATE carts\n            SET quantity = ?, price = ?, total_price = ?\n            WHERE id = ?\n        `;\n        await queryDatabase(updateQuery, [quantity, price, total_price, cartItemId]);\n\n        res.status(200).json({ message: 'Cart item updated successfully' });\n    } catch (err) {\n        res.status(500).json({ error: 'Database error' });\n    }\n});\n\napp.delete('/api/users/:userId/cart/:cartItemId', async (req, res) => {\n    const { userId, cartItemId } = req.params;\n\n    try {\n        // Fetch the cart item details\n        const cartItem = await queryDatabase('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        if (!cartItem[0]) {\n            res.status(404).json({ message: 'Could not find cart item!' });\n            return;\n        }\n\n        // Delete the item from the cart\n        const deleteQuery = `\n            DELETE FROM carts\n            WHERE id = ? AND user_id = ?\n        `;\n        await queryDatabase(deleteQuery, [cartItemId, userId]);\n\n        res.status(200).json({ message: 'Product removed from cart successfully' });\n    } catch (err) {\n        res.status(500).json({ message: 'Database error' });\n    }\n});\n// API route to delete a product based on productId\napp.delete('/api/products/:productId', (req, res) => {\n    const {productId} = req.params;\n\n    const deleteQuery = `\n    DELETE FROM products\n    WHERE id = ?\n  `;\n\n    db.run(deleteQuery, [productId], (err) => {\n        if (err) {\n            console.error(err.message);\n            res.status(500).json({error: 'Failed to delete product'});\n        } else {\n            res.status(200).json({message: 'Product deleted successfully'});\n        }\n    });\n});\n\n\n// Define other routes here\n\n// ... The rest of your API routes ...\n\napp.listen(8000, () => {\n    console.log('Server is listening on port 8000');\n});"],"mappings":"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"}},"mtime":1692193454005}}