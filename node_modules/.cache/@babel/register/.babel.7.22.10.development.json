{"{\"assumptions\":{},\"sourceRoot\":\"/home/muteeb/Desktop/e-store-backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/muteeb/Desktop/e-store-backend\",\"filename\":\"/home/muteeb/Desktop/e-store-backend/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/muteeb/Desktop/e-store-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _expressSession = _interopRequireDefault(require(\"express-session\"));\nvar _products = require(\"./routes/products\");\nvar _users = require(\"./routes/users\");\nvar _authentication = require(\"./routes/authentication\");\nvar app = (0, _express[\"default\"])();\napp.use((0, _cors[\"default\"])());\napp.use(_bodyParser[\"default\"].json());\napp.use('/images', _express[\"default\"][\"static\"](_path[\"default\"].join(__dirname, '../assets')));\napp.use((0, _expressSession[\"default\"])({\n  secret: 'shoestoreapp',\n  resave: true,\n  saveUninitialized: true\n}));\napp.use(_products.productsRouter);\napp.use(_users.usersRouter);\napp.use(_authentication.authenticationRouter);\napp.listen(8000, function () {\n  console.log('Server is listening on port 8000');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2JvZHlQYXJzZXIiLCJfY29ycyIsIl9wYXRoIiwiX2V4cHJlc3NTZXNzaW9uIiwiX3Byb2R1Y3RzIiwiX3VzZXJzIiwiX2F1dGhlbnRpY2F0aW9uIiwiYXBwIiwiZXhwcmVzcyIsInVzZSIsImNvcnMiLCJib2R5UGFyc2VyIiwianNvbiIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwiZXhwcmVzc1Nlc3Npb24iLCJzZWNyZXQiLCJyZXNhdmUiLCJzYXZlVW5pbml0aWFsaXplZCIsInByb2R1Y3RzUm91dGVyIiwidXNlcnNSb3V0ZXIiLCJhdXRoZW50aWNhdGlvblJvdXRlciIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6Ii9ob21lL211dGVlYi9EZXNrdG9wL2Utc3RvcmUtYmFja2VuZC9zcmMvIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGV4cHJlc3NTZXNzaW9uIGZyb20gJ2V4cHJlc3Mtc2Vzc2lvbic7XG5cbmltcG9ydCB7IHByb2R1Y3RzUm91dGVyIH0gZnJvbSAnLi9yb3V0ZXMvcHJvZHVjdHMnO1xuaW1wb3J0IHsgdXNlcnNSb3V0ZXIgfSBmcm9tICcuL3JvdXRlcy91c2Vycyc7XG5pbXBvcnQgeyBhdXRoZW50aWNhdGlvblJvdXRlciB9IGZyb20gJy4vcm91dGVzL2F1dGhlbnRpY2F0aW9uJztcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAudXNlKGNvcnMoKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbmFwcC51c2UoJy9pbWFnZXMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vYXNzZXRzJykpKTtcblxuYXBwLnVzZShleHByZXNzU2Vzc2lvbih7XG4gICAgc2VjcmV0OiAnc2hvZXN0b3JlYXBwJyxcbiAgICByZXNhdmU6IHRydWUsXG4gICAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IHRydWVcbn0pKTtcblxuYXBwLnVzZShwcm9kdWN0c1JvdXRlcik7XG5hcHAudXNlKHVzZXJzUm91dGVyKTtcbmFwcC51c2UoYXV0aGVudGljYXRpb25Sb3V0ZXIpO1xuXG5hcHAubGlzdGVuKDgwMDAsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnU2VydmVyIGlzIGxpc3RlbmluZyBvbiBwb3J0IDgwMDAnKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxXQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxLQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxLQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxlQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBSyxTQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxNQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxlQUFBLEdBQUFQLE9BQUE7QUFFQSxJQUFNUSxHQUFHLEdBQUcsSUFBQUMsbUJBQU8sRUFBQyxDQUFDO0FBRXJCRCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxJQUFBQyxnQkFBSSxFQUFDLENBQUMsQ0FBQztBQUNmSCxHQUFHLENBQUNFLEdBQUcsQ0FBQ0Usc0JBQVUsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUMxQkwsR0FBRyxDQUFDRSxHQUFHLENBQUMsU0FBUyxFQUFFRCxtQkFBTyxVQUFPLENBQUNLLGdCQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUM7QUFFckVSLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLElBQUFPLDBCQUFjLEVBQUM7RUFDbkJDLE1BQU0sRUFBRSxjQUFjO0VBQ3RCQyxNQUFNLEVBQUUsSUFBSTtFQUNaQyxpQkFBaUIsRUFBRTtBQUN2QixDQUFDLENBQUMsQ0FBQztBQUVIWixHQUFHLENBQUNFLEdBQUcsQ0FBQ1csd0JBQWMsQ0FBQztBQUN2QmIsR0FBRyxDQUFDRSxHQUFHLENBQUNZLGtCQUFXLENBQUM7QUFDcEJkLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDYSxvQ0FBb0IsQ0FBQztBQUU3QmYsR0FBRyxDQUFDZ0IsTUFBTSxDQUFDLElBQUksRUFBRSxZQUFNO0VBQ25CQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQztBQUNuRCxDQUFDLENBQUMifQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_bodyParser","_cors","_path","_expressSession","_products","_users","_authentication","app","express","use","cors","bodyParser","json","path","join","__dirname","expressSession","secret","resave","saveUninitialized","productsRouter","usersRouter","authenticationRouter","listen","console","log"],"sourceRoot":"/home/muteeb/Desktop/e-store-backend/src/","sources":["server.js"],"sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport path from 'path';\nimport expressSession from 'express-session';\n\nimport { productsRouter } from './routes/products';\nimport { usersRouter } from './routes/users';\nimport { authenticationRouter } from './routes/authentication';\n\nconst app = express();\n\napp.use(cors());\napp.use(bodyParser.json());\napp.use('/images', express.static(path.join(__dirname, '../assets')));\n\napp.use(expressSession({\n    secret: 'shoestoreapp',\n    resave: true,\n    saveUninitialized: true\n}));\n\napp.use(productsRouter);\napp.use(usersRouter);\napp.use(authenticationRouter);\n\napp.listen(8000, () => {\n    console.log('Server is listening on port 8000');\n});\n"],"mappings":";;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,KAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,eAAA,GAAAL,sBAAA,CAAAC,OAAA;AAEA,IAAAK,SAAA,GAAAL,OAAA;AACA,IAAAM,MAAA,GAAAN,OAAA;AACA,IAAAO,eAAA,GAAAP,OAAA;AAEA,IAAMQ,GAAG,GAAG,IAAAC,mBAAO,EAAC,CAAC;AAErBD,GAAG,CAACE,GAAG,CAAC,IAAAC,gBAAI,EAAC,CAAC,CAAC;AACfH,GAAG,CAACE,GAAG,CAACE,sBAAU,CAACC,IAAI,CAAC,CAAC,CAAC;AAC1BL,GAAG,CAACE,GAAG,CAAC,SAAS,EAAED,mBAAO,UAAO,CAACK,gBAAI,CAACC,IAAI,CAACC,SAAS,EAAE,WAAW,CAAC,CAAC,CAAC;AAErER,GAAG,CAACE,GAAG,CAAC,IAAAO,0BAAc,EAAC;EACnBC,MAAM,EAAE,cAAc;EACtBC,MAAM,EAAE,IAAI;EACZC,iBAAiB,EAAE;AACvB,CAAC,CAAC,CAAC;AAEHZ,GAAG,CAACE,GAAG,CAACW,wBAAc,CAAC;AACvBb,GAAG,CAACE,GAAG,CAACY,kBAAW,CAAC;AACpBd,GAAG,CAACE,GAAG,CAACa,oCAAoB,CAAC;AAE7Bf,GAAG,CAACgB,MAAM,CAAC,IAAI,EAAE,YAAM;EACnBC,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;AACnD,CAAC,CAAC"}},"mtime":1692968745512},"{\"assumptions\":{},\"sourceRoot\":\"/home/muteeb/Desktop/e-store-backend/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/muteeb/Desktop/e-store-backend\",\"filename\":\"/home/muteeb/Desktop/e-store-backend/src/routes/products.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/muteeb/Desktop/e-store-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.productsRouter = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _db = require(\"../db\");\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar productsRouter = _express[\"default\"].Router();\nexports.productsRouter = productsRouter;\nproductsRouter.get('/api/products', /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n    var rows;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return (0, _db.queryDatabase)('SELECT * FROM products', []);\n        case 3:\n          rows = _context.sent;\n          res.status(200).json(rows);\n          _context.next = 10;\n          break;\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\nproductsRouter.get('/api/products/:productId', /*#__PURE__*/function () {\n  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res) {\n    var productId, product;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          productId = req.params.productId;\n          _context2.prev = 1;\n          _context2.next = 4;\n          return (0, _db.queryDatabase)('SELECT * FROM products WHERE id = ?', [productId]);\n        case 4:\n          product = _context2.sent;\n          if (product[0]) {\n            _context2.next = 8;\n            break;\n          }\n          res.status(404).json('Could not find the product!');\n          return _context2.abrupt(\"return\");\n        case 8:\n          res.status(200).json(product[0]);\n          _context2.next = 14;\n          break;\n        case 11:\n          _context2.prev = 11;\n          _context2.t0 = _context2[\"catch\"](1);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 14:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[1, 11]]);\n  }));\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nproductsRouter.post('/api/products', function (req, res) {\n  var _req$body = req.body,\n    id = _req$body.id,\n    name = _req$body.name,\n    price = _req$body.price,\n    description = _req$body.description,\n    imageUrl = _req$body.imageUrl,\n    averageRating = _req$body.averageRating;\n  var insertQuery = \"\\n    INSERT INTO products (name, price, description, imageUrl, averageRating)\\n    VALUES (?, ?, ?, ?, ?)\\n  \";\n  _db.db.run(insertQuery, [name, price, description, imageUrl, averageRating], function (err) {\n    if (err) {\n      console.error(err.message);\n      res.status(500).json({\n        error: 'Failed to insert product'\n      });\n    } else {\n      res.status(201).json({\n        message: 'Product inserted successfully'\n      });\n    }\n  });\n});\n\n// API route to update a product based on productId\nproductsRouter.put('/api/products/:productId', function (req, res) {\n  var productId = req.params.productId;\n  var _req$body2 = req.body,\n    name = _req$body2.name,\n    price = _req$body2.price,\n    description = _req$body2.description,\n    imageUrl = _req$body2.imageUrl,\n    averageRating = _req$body2.averageRating;\n  var updateQuery = \"\\n    UPDATE products\\n    SET name = ?, price = ?, description = ?, imageUrl = ?, averageRating = ?\\n    WHERE id = ?\\n  \";\n  _db.db.run(updateQuery, [name, price, description, imageUrl, averageRating, productId], function (err) {\n    if (err) {\n      console.error(err.message);\n      res.status(500).json({\n        error: 'Failed to update product'\n      });\n    } else {\n      res.status(200).json({\n        message: 'Product updated successfully'\n      });\n    }\n  });\n});\nproductsRouter[\"delete\"]('/api/products/:productId', function (req, res) {\n  var productId = req.params.productId;\n  var deleteQuery = \"\\n    DELETE FROM products\\n    WHERE id = ?\\n  \";\n  _db.db.run(deleteQuery, [productId], function (err) {\n    if (err) {\n      console.error(err.message);\n      res.status(500).json({\n        error: 'Failed to delete product'\n      });\n    } else {\n      res.status(200).json({\n        message: 'Product deleted successfully'\n      });\n    }\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RiIiwiX3Bhc3Nwb3J0IiwicHJvZHVjdHNSb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwiZXhwb3J0cyIsImdldCIsIl9yZWYiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVnZW5lcmF0b3IiLCJtYXJrIiwiX2NhbGxlZSIsInJlcSIsInJlcyIsInJvd3MiLCJ3cmFwIiwiX2NhbGxlZSQiLCJfY29udGV4dCIsInByZXYiLCJuZXh0IiwicXVlcnlEYXRhYmFzZSIsInNlbnQiLCJzdGF0dXMiLCJqc29uIiwidDAiLCJlcnJvciIsInN0b3AiLCJfeCIsIl94MiIsImFwcGx5IiwiYXJndW1lbnRzIiwiX3JlZjIiLCJfY2FsbGVlMiIsInByb2R1Y3RJZCIsInByb2R1Y3QiLCJfY2FsbGVlMiQiLCJfY29udGV4dDIiLCJwYXJhbXMiLCJhYnJ1cHQiLCJfeDMiLCJfeDQiLCJwb3N0IiwiX3JlcSRib2R5IiwiYm9keSIsImlkIiwibmFtZSIsInByaWNlIiwiZGVzY3JpcHRpb24iLCJpbWFnZVVybCIsImF2ZXJhZ2VSYXRpbmciLCJpbnNlcnRRdWVyeSIsImRiIiwicnVuIiwiZXJyIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJwdXQiLCJfcmVxJGJvZHkyIiwidXBkYXRlUXVlcnkiLCJkZWxldGVRdWVyeSJdLCJzb3VyY2VSb290IjoiL2hvbWUvbXV0ZWViL0Rlc2t0b3AvZS1zdG9yZS1iYWNrZW5kL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJwcm9kdWN0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7ZGIsIHF1ZXJ5RGF0YWJhc2V9IGZyb20gJy4uL2RiJztcbmltcG9ydCBwYXNzcG9ydCBmcm9tICdwYXNzcG9ydCc7XG5cbmV4cG9ydCBjb25zdCBwcm9kdWN0c1JvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnByb2R1Y3RzUm91dGVyLmdldCgnL2FwaS9wcm9kdWN0cycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIHByb2R1Y3RzJywgW10pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyb3dzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe2Vycm9yOiAnRGF0YWJhc2UgZXJyb3InfSk7XG4gICAgfVxufSk7XG5cbnByb2R1Y3RzUm91dGVyLmdldCgnL2FwaS9wcm9kdWN0cy86cHJvZHVjdElkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qge3Byb2R1Y3RJZH0gPSByZXEucGFyYW1zO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gcHJvZHVjdHMgV0hFUkUgaWQgPSA/JywgW3Byb2R1Y3RJZF0pO1xuICAgICAgICBpZiAoIXByb2R1Y3RbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKCdDb3VsZCBub3QgZmluZCB0aGUgcHJvZHVjdCEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihwcm9kdWN0WzBdKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe2Vycm9yOiAnRGF0YWJhc2UgZXJyb3InfSk7XG4gICAgfVxufSk7XG5cbnByb2R1Y3RzUm91dGVyLnBvc3QoJy9hcGkvcHJvZHVjdHMnLCAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7aWQsIG5hbWUsIHByaWNlLCBkZXNjcmlwdGlvbiwgaW1hZ2VVcmwsIGF2ZXJhZ2VSYXRpbmd9ID0gcmVxLmJvZHk7XG5cbiAgICBjb25zdCBpbnNlcnRRdWVyeSA9IGBcbiAgICBJTlNFUlQgSU5UTyBwcm9kdWN0cyAobmFtZSwgcHJpY2UsIGRlc2NyaXB0aW9uLCBpbWFnZVVybCwgYXZlcmFnZVJhdGluZylcbiAgICBWQUxVRVMgKD8sID8sID8sID8sID8pXG4gIGA7XG5cbiAgICBkYi5ydW4oaW5zZXJ0UXVlcnksIFtuYW1lLCBwcmljZSwgZGVzY3JpcHRpb24sIGltYWdlVXJsLCBhdmVyYWdlUmF0aW5nXSwgKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtlcnJvcjogJ0ZhaWxlZCB0byBpbnNlcnQgcHJvZHVjdCd9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHttZXNzYWdlOiAnUHJvZHVjdCBpbnNlcnRlZCBzdWNjZXNzZnVsbHknfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG4vLyBBUEkgcm91dGUgdG8gdXBkYXRlIGEgcHJvZHVjdCBiYXNlZCBvbiBwcm9kdWN0SWRcbnByb2R1Y3RzUm91dGVyLnB1dCgnL2FwaS9wcm9kdWN0cy86cHJvZHVjdElkJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qge3Byb2R1Y3RJZH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHtuYW1lLCBwcmljZSwgZGVzY3JpcHRpb24sIGltYWdlVXJsLCBhdmVyYWdlUmF0aW5nfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXBkYXRlUXVlcnkgPSBgXG4gICAgVVBEQVRFIHByb2R1Y3RzXG4gICAgU0VUIG5hbWUgPSA/LCBwcmljZSA9ID8sIGRlc2NyaXB0aW9uID0gPywgaW1hZ2VVcmwgPSA/LCBhdmVyYWdlUmF0aW5nID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgO1xuXG4gICAgZGIucnVuKHVwZGF0ZVF1ZXJ5LCBbbmFtZSwgcHJpY2UsIGRlc2NyaXB0aW9uLCBpbWFnZVVybCwgYXZlcmFnZVJhdGluZywgcHJvZHVjdElkXSwgKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgcHJvZHVjdCd9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHttZXNzYWdlOiAnUHJvZHVjdCB1cGRhdGVkIHN1Y2Nlc3NmdWxseSd9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbnByb2R1Y3RzUm91dGVyLmRlbGV0ZSgnL2FwaS9wcm9kdWN0cy86cHJvZHVjdElkJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qge3Byb2R1Y3RJZH0gPSByZXEucGFyYW1zO1xuXG4gICAgY29uc3QgZGVsZXRlUXVlcnkgPSBgXG4gICAgREVMRVRFIEZST00gcHJvZHVjdHNcbiAgICBXSEVSRSBpZCA9ID9cbiAgYDtcblxuICAgIGRiLnJ1bihkZWxldGVRdWVyeSwgW3Byb2R1Y3RJZF0sIChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ZXJyb3I6ICdGYWlsZWQgdG8gZGVsZXRlIHByb2R1Y3QnfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7bWVzc2FnZTogJ1Byb2R1Y3QgZGVsZXRlZCBzdWNjZXNzZnVsbHknfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEdBQUEsR0FBQUQsT0FBQTtBQUNB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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_db","_passport","productsRouter","express","Router","exports","get","_ref","_asyncToGenerator2","_regenerator","mark","_callee","req","res","rows","wrap","_callee$","_context","prev","next","queryDatabase","sent","status","json","t0","error","stop","_x","_x2","apply","arguments","_ref2","_callee2","productId","product","_callee2$","_context2","params","abrupt","_x3","_x4","post","_req$body","body","id","name","price","description","imageUrl","averageRating","insertQuery","db","run","err","console","message","put","_req$body2","updateQuery","deleteQuery"],"sourceRoot":"/home/muteeb/Desktop/e-store-backend/src/routes/","sources":["products.js"],"sourcesContent":["import express from 'express';\nimport {db, queryDatabase} from '../db';\nimport passport from 'passport';\n\nexport const productsRouter = express.Router();\n\nproductsRouter.get('/api/products', async (req, res) => {\n    try {\n        const rows = await queryDatabase('SELECT * FROM products', []);\n        res.status(200).json(rows);\n    } catch (err) {\n        res.status(500).json({error: 'Database error'});\n    }\n});\n\nproductsRouter.get('/api/products/:productId', async (req, res) => {\n    const {productId} = req.params;\n\n    try {\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [productId]);\n        if (!product[0]) {\n            res.status(404).json('Could not find the product!');\n            return;\n        }\n        res.status(200).json(product[0]);\n    } catch (err) {\n        res.status(500).json({error: 'Database error'});\n    }\n});\n\nproductsRouter.post('/api/products', (req, res) => {\n    const {id, name, price, description, imageUrl, averageRating} = req.body;\n\n    const insertQuery = `\n    INSERT INTO products (name, price, description, imageUrl, averageRating)\n    VALUES (?, ?, ?, ?, ?)\n  `;\n\n    db.run(insertQuery, [name, price, description, imageUrl, averageRating], (err) => {\n        if (err) {\n            console.error(err.message);\n            res.status(500).json({error: 'Failed to insert product'});\n        } else {\n            res.status(201).json({message: 'Product inserted successfully'});\n        }\n    });\n});\n\n// API route to update a product based on productId\nproductsRouter.put('/api/products/:productId', (req, res) => {\n    const {productId} = req.params;\n    const {name, price, description, imageUrl, averageRating} = req.body;\n\n    const updateQuery = `\n    UPDATE products\n    SET name = ?, price = ?, description = ?, imageUrl = ?, averageRating = ?\n    WHERE id = ?\n  `;\n\n    db.run(updateQuery, [name, price, description, imageUrl, averageRating, productId], (err) => {\n        if (err) {\n            console.error(err.message);\n            res.status(500).json({error: 'Failed to update product'});\n        } else {\n            res.status(200).json({message: 'Product updated successfully'});\n        }\n    });\n});\n\nproductsRouter.delete('/api/products/:productId', (req, res) => {\n    const {productId} = req.params;\n\n    const deleteQuery = `\n    DELETE FROM products\n    WHERE id = ?\n  `;\n\n    db.run(deleteQuery, [productId], (err) => {\n        if (err) {\n            console.error(err.message);\n            res.status(500).json({error: 'Failed to delete product'});\n        } else {\n            res.status(200).json({message: 'Product deleted successfully'});\n        }\n    });\n});\n\n"],"mappings":"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"}},"mtime":1692968369856},"{\"assumptions\":{},\"sourceRoot\":\"/home/muteeb/Desktop/e-store-backend/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/muteeb/Desktop/e-store-backend\",\"filename\":\"/home/muteeb/Desktop/e-store-backend/src/routes/products.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/muteeb/Desktop/e-store-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.productsRouter = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _db = require(\"../db\");\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar productsRouter = _express[\"default\"].Router();\nexports.productsRouter = productsRouter;\nproductsRouter.get('/api/products', /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n    var rows;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return (0, _db.queryDatabase)('SELECT * FROM products', []);\n        case 3:\n          rows = _context.sent;\n          res.status(200).json(rows);\n          _context.next = 10;\n          break;\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\nproductsRouter.get('/api/products/:productId', /*#__PURE__*/function () {\n  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res) {\n    var productId, product;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          productId = req.params.productId;\n          _context2.prev = 1;\n          _context2.next = 4;\n          return (0, _db.queryDatabase)('SELECT * FROM products WHERE id = ?', [productId]);\n        case 4:\n          product = _context2.sent;\n          if (product[0]) {\n            _context2.next = 8;\n            break;\n          }\n          res.status(404).json('Could not find the product!');\n          return _context2.abrupt(\"return\");\n        case 8:\n          res.status(200).json(product[0]);\n          _context2.next = 14;\n          break;\n        case 11:\n          _context2.prev = 11;\n          _context2.t0 = _context2[\"catch\"](1);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 14:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[1, 11]]);\n  }));\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nproductsRouter.post('/api/products', function (req, res) {\n  var _req$body = req.body,\n    id = _req$body.id,\n    name = _req$body.name,\n    price = _req$body.price,\n    description = _req$body.description,\n    imageUrl = _req$body.imageUrl,\n    averageRating = _req$body.averageRating;\n  var insertQuery = \"\\n    INSERT INTO products (name, price, description, imageUrl, averageRating)\\n    VALUES (?, ?, ?, ?, ?)\\n  \";\n  _db.db.run(insertQuery, [name, price, description, imageUrl, averageRating], function (err) {\n    if (err) {\n      console.error(err.message);\n      res.status(500).json({\n        error: 'Failed to insert product'\n      });\n    } else {\n      res.status(201).json({\n        message: 'Product inserted successfully'\n      });\n    }\n  });\n});\n\n// API route to update a product based on productId\nproductsRouter.put('/api/products/:productId', function (req, res) {\n  var productId = req.params.productId;\n  var _req$body2 = req.body,\n    name = _req$body2.name,\n    price = _req$body2.price,\n    description = _req$body2.description,\n    imageUrl = _req$body2.imageUrl,\n    averageRating = _req$body2.averageRating;\n  var updateQuery = \"\\n    UPDATE products\\n    SET name = ?, price = ?, description = ?, imageUrl = ?, averageRating = ?\\n    WHERE id = ?\\n  \";\n  _db.db.run(updateQuery, [name, price, description, imageUrl, averageRating, productId], function (err) {\n    if (err) {\n      console.error(err.message);\n      res.status(500).json({\n        error: 'Failed to update product'\n      });\n    } else {\n      res.status(200).json({\n        message: 'Product updated successfully'\n      });\n    }\n  });\n});\nproductsRouter[\"delete\"]('/api/products/:productId', function (req, res) {\n  var productId = req.params.productId;\n  var deleteQuery = \"\\n    DELETE FROM products\\n    WHERE id = ?\\n  \";\n  _db.db.run(deleteQuery, [productId], function (err) {\n    if (err) {\n      console.error(err.message);\n      res.status(500).json({\n        error: 'Failed to delete product'\n      });\n    } else {\n      res.status(200).json({\n        message: 'Product deleted successfully'\n      });\n    }\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RiIiwiX3Bhc3Nwb3J0IiwicHJvZHVjdHNSb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwiZXhwb3J0cyIsImdldCIsIl9yZWYiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVnZW5lcmF0b3IiLCJtYXJrIiwiX2NhbGxlZSIsInJlcSIsInJlcyIsInJvd3MiLCJ3cmFwIiwiX2NhbGxlZSQiLCJfY29udGV4dCIsInByZXYiLCJuZXh0IiwicXVlcnlEYXRhYmFzZSIsInNlbnQiLCJzdGF0dXMiLCJqc29uIiwidDAiLCJlcnJvciIsInN0b3AiLCJfeCIsIl94MiIsImFwcGx5IiwiYXJndW1lbnRzIiwiX3JlZjIiLCJfY2FsbGVlMiIsInByb2R1Y3RJZCIsInByb2R1Y3QiLCJfY2FsbGVlMiQiLCJfY29udGV4dDIiLCJwYXJhbXMiLCJhYnJ1cHQiLCJfeDMiLCJfeDQiLCJwb3N0IiwiX3JlcSRib2R5IiwiYm9keSIsImlkIiwibmFtZSIsInByaWNlIiwiZGVzY3JpcHRpb24iLCJpbWFnZVVybCIsImF2ZXJhZ2VSYXRpbmciLCJpbnNlcnRRdWVyeSIsImRiIiwicnVuIiwiZXJyIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJwdXQiLCJfcmVxJGJvZHkyIiwidXBkYXRlUXVlcnkiLCJkZWxldGVRdWVyeSJdLCJzb3VyY2VSb290IjoiL2hvbWUvbXV0ZWViL0Rlc2t0b3AvZS1zdG9yZS1iYWNrZW5kL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJwcm9kdWN0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7ZGIsIHF1ZXJ5RGF0YWJhc2V9IGZyb20gJy4uL2RiJztcbmltcG9ydCBwYXNzcG9ydCBmcm9tICdwYXNzcG9ydCc7XG5cbmV4cG9ydCBjb25zdCBwcm9kdWN0c1JvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnByb2R1Y3RzUm91dGVyLmdldCgnL2FwaS9wcm9kdWN0cycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIHByb2R1Y3RzJywgW10pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyb3dzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe2Vycm9yOiAnRGF0YWJhc2UgZXJyb3InfSk7XG4gICAgfVxufSk7XG5cbnByb2R1Y3RzUm91dGVyLmdldCgnL2FwaS9wcm9kdWN0cy86cHJvZHVjdElkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qge3Byb2R1Y3RJZH0gPSByZXEucGFyYW1zO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gcHJvZHVjdHMgV0hFUkUgaWQgPSA/JywgW3Byb2R1Y3RJZF0pO1xuICAgICAgICBpZiAoIXByb2R1Y3RbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKCdDb3VsZCBub3QgZmluZCB0aGUgcHJvZHVjdCEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihwcm9kdWN0WzBdKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe2Vycm9yOiAnRGF0YWJhc2UgZXJyb3InfSk7XG4gICAgfVxufSk7XG5cbnByb2R1Y3RzUm91dGVyLnBvc3QoJy9hcGkvcHJvZHVjdHMnLCAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7aWQsIG5hbWUsIHByaWNlLCBkZXNjcmlwdGlvbiwgaW1hZ2VVcmwsIGF2ZXJhZ2VSYXRpbmd9ID0gcmVxLmJvZHk7XG5cbiAgICBjb25zdCBpbnNlcnRRdWVyeSA9IGBcbiAgICBJTlNFUlQgSU5UTyBwcm9kdWN0cyAobmFtZSwgcHJpY2UsIGRlc2NyaXB0aW9uLCBpbWFnZVVybCwgYXZlcmFnZVJhdGluZylcbiAgICBWQUxVRVMgKD8sID8sID8sID8sID8pXG4gIGA7XG5cbiAgICBkYi5ydW4oaW5zZXJ0UXVlcnksIFtuYW1lLCBwcmljZSwgZGVzY3JpcHRpb24sIGltYWdlVXJsLCBhdmVyYWdlUmF0aW5nXSwgKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtlcnJvcjogJ0ZhaWxlZCB0byBpbnNlcnQgcHJvZHVjdCd9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHttZXNzYWdlOiAnUHJvZHVjdCBpbnNlcnRlZCBzdWNjZXNzZnVsbHknfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG4vLyBBUEkgcm91dGUgdG8gdXBkYXRlIGEgcHJvZHVjdCBiYXNlZCBvbiBwcm9kdWN0SWRcbnByb2R1Y3RzUm91dGVyLnB1dCgnL2FwaS9wcm9kdWN0cy86cHJvZHVjdElkJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qge3Byb2R1Y3RJZH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHtuYW1lLCBwcmljZSwgZGVzY3JpcHRpb24sIGltYWdlVXJsLCBhdmVyYWdlUmF0aW5nfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXBkYXRlUXVlcnkgPSBgXG4gICAgVVBEQVRFIHByb2R1Y3RzXG4gICAgU0VUIG5hbWUgPSA/LCBwcmljZSA9ID8sIGRlc2NyaXB0aW9uID0gPywgaW1hZ2VVcmwgPSA/LCBhdmVyYWdlUmF0aW5nID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgO1xuXG4gICAgZGIucnVuKHVwZGF0ZVF1ZXJ5LCBbbmFtZSwgcHJpY2UsIGRlc2NyaXB0aW9uLCBpbWFnZVVybCwgYXZlcmFnZVJhdGluZywgcHJvZHVjdElkXSwgKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgcHJvZHVjdCd9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHttZXNzYWdlOiAnUHJvZHVjdCB1cGRhdGVkIHN1Y2Nlc3NmdWxseSd9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbnByb2R1Y3RzUm91dGVyLmRlbGV0ZSgnL2FwaS9wcm9kdWN0cy86cHJvZHVjdElkJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qge3Byb2R1Y3RJZH0gPSByZXEucGFyYW1zO1xuXG4gICAgY29uc3QgZGVsZXRlUXVlcnkgPSBgXG4gICAgREVMRVRFIEZST00gcHJvZHVjdHNcbiAgICBXSEVSRSBpZCA9ID9cbiAgYDtcblxuICAgIGRiLnJ1bihkZWxldGVRdWVyeSwgW3Byb2R1Y3RJZF0sIChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ZXJyb3I6ICdGYWlsZWQgdG8gZGVsZXRlIHByb2R1Y3QnfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7bWVzc2FnZTogJ1Byb2R1Y3QgZGVsZXRlZCBzdWNjZXNzZnVsbHknfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEdBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFNBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUVPLElBQU1HLGNBQWMsR0FBR0MsbUJBQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFBQ0MsT0FBQSxDQUFBSCxjQUFBLEdBQUFBLGNBQUE7QUFFL0NBLGNBQWMsQ0FBQ0ksR0FBRyxDQUFDLGVBQWU7RUFBQSxJQUFBQyxJQUFBLE9BQUFDLGtCQUFBLDJCQUFBQyxZQUFBLFlBQUFDLElBQUEsQ0FBRSxTQUFBQyxRQUFPQyxHQUFHLEVBQUVDLEdBQUc7SUFBQSxJQUFBQyxJQUFBO0lBQUEsT0FBQUwsWUFBQSxZQUFBTSxJQUFBLFVBQUFDLFNBQUFDLFFBQUE7TUFBQSxrQkFBQUEsUUFBQSxDQUFBQyxJQUFBLEdBQUFELFFBQUEsQ0FBQUUsSUFBQTtRQUFBO1VBQUFGLFFBQUEsQ0FBQUMsSUFBQTtVQUFBRCxRQUFBLENBQUFFLElBQUE7VUFBQSxPQUV4QixJQUFBQyxpQkFBYSxFQUFDLHdCQUF3QixFQUFFLEVBQUUsQ0FBQztRQUFBO1VBQXhETixJQUFJLEdBQUFHLFFBQUEsQ0FBQUksSUFBQTtVQUNWUixHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDVCxJQUFJLENBQUM7VUFBQ0csUUFBQSxDQUFBRSxJQUFBO1VBQUE7UUFBQTtVQUFBRixRQUFBLENBQUFDLElBQUE7VUFBQUQsUUFBQSxDQUFBTyxFQUFBLEdBQUFQLFFBQUE7VUFFM0JKLEdBQUcsQ0FBQ1MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7WUFBQ0UsS0FBSyxFQUFFO1VBQWdCLENBQUMsQ0FBQztRQUFDO1FBQUE7VUFBQSxPQUFBUixRQUFBLENBQUFTLElBQUE7TUFBQTtJQUFBLEdBQUFmLE9BQUE7RUFBQSxDQUV2RDtFQUFBLGlCQUFBZ0IsRUFBQSxFQUFBQyxHQUFBO0lBQUEsT0FBQXJCLElBQUEsQ0FBQXNCLEtBQUEsT0FBQUMsU0FBQTtFQUFBO0FBQUEsSUFBQztBQUVGNUIsY0FBYyxDQUFDSSxHQUFHLENBQUMsMEJBQTBCO0VBQUEsSUFBQXlCLEtBQUEsT0FBQXZCLGtCQUFBLDJCQUFBQyxZQUFBLFlBQUFDLElBQUEsQ0FBRSxTQUFBc0IsU0FBT3BCLEdBQUcsRUFBRUMsR0FBRztJQUFBLElBQUFvQixTQUFBLEVBQUFDLE9BQUE7SUFBQSxPQUFBekIsWUFBQSxZQUFBTSxJQUFBLFVBQUFvQixVQUFBQyxTQUFBO01BQUEsa0JBQUFBLFNBQUEsQ0FBQWxCLElBQUEsR0FBQWtCLFNBQUEsQ0FBQWpCLElBQUE7UUFBQTtVQUNuRGMsU0FBUyxHQUFJckIsR0FBRyxDQUFDeUIsTUFBTSxDQUF2QkosU0FBUztVQUFBRyxTQUFBLENBQUFsQixJQUFBO1VBQUFrQixTQUFBLENBQUFqQixJQUFBO1VBQUEsT0FHVSxJQUFBQyxpQkFBYSxFQUFDLHFDQUFxQyxFQUFFLENBQUNhLFNBQVMsQ0FBQyxDQUFDO1FBQUE7VUFBakZDLE9BQU8sR0FBQUUsU0FBQSxDQUFBZixJQUFBO1VBQUEsSUFDUmEsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUFBRSxTQUFBLENBQUFqQixJQUFBO1lBQUE7VUFBQTtVQUNYTixHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLDZCQUE2QixDQUFDO1VBQUMsT0FBQWEsU0FBQSxDQUFBRSxNQUFBO1FBQUE7VUFHeER6QixHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDVyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7VUFBQ0UsU0FBQSxDQUFBakIsSUFBQTtVQUFBO1FBQUE7VUFBQWlCLFNBQUEsQ0FBQWxCLElBQUE7VUFBQWtCLFNBQUEsQ0FBQVosRUFBQSxHQUFBWSxTQUFBO1VBRWpDdkIsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztZQUFDRSxLQUFLLEVBQUU7VUFBZ0IsQ0FBQyxDQUFDO1FBQUM7UUFBQTtVQUFBLE9BQUFXLFNBQUEsQ0FBQVYsSUFBQTtNQUFBO0lBQUEsR0FBQU0sUUFBQTtFQUFBLENBRXZEO0VBQUEsaUJBQUFPLEdBQUEsRUFBQUMsR0FBQTtJQUFBLE9BQUFULEtBQUEsQ0FBQUYsS0FBQSxPQUFBQyxTQUFBO0VBQUE7QUFBQSxJQUFDO0FBRUY1QixjQUFjLENBQUN1QyxJQUFJLENBQUMsZUFBZSxFQUFFLFVBQUM3QixHQUFHLEVBQUVDLEdBQUcsRUFBSztFQUMvQyxJQUFBNkIsU0FBQSxHQUFnRTlCLEdBQUcsQ0FBQytCLElBQUk7SUFBakVDLEVBQUUsR0FBQUYsU0FBQSxDQUFGRSxFQUFFO0lBQUVDLElBQUksR0FBQUgsU0FBQSxDQUFKRyxJQUFJO0lBQUVDLEtBQUssR0FBQUosU0FBQSxDQUFMSSxLQUFLO0lBQUVDLFdBQVcsR0FBQUwsU0FBQSxDQUFYSyxXQUFXO0lBQUVDLFFBQVEsR0FBQU4sU0FBQSxDQUFSTSxRQUFRO0lBQUVDLGFBQWEsR0FBQVAsU0FBQSxDQUFiTyxhQUFhO0VBRTVELElBQU1DLFdBQVcsbUhBR2xCO0VBRUNDLE1BQUUsQ0FBQ0MsR0FBRyxDQUFDRixXQUFXLEVBQUUsQ0FBQ0wsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLFdBQVcsRUFBRUMsUUFBUSxFQUFFQyxhQUFhLENBQUMsRUFBRSxVQUFDSSxHQUFHLEVBQUs7SUFDOUUsSUFBSUEsR0FBRyxFQUFFO01BQ0xDLE9BQU8sQ0FBQzdCLEtBQUssQ0FBQzRCLEdBQUcsQ0FBQ0UsT0FBTyxDQUFDO01BQzFCMUMsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFDRSxLQUFLLEVBQUU7TUFBMEIsQ0FBQyxDQUFDO0lBQzdELENBQUMsTUFBTTtNQUNIWixHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUNnQyxPQUFPLEVBQUU7TUFBK0IsQ0FBQyxDQUFDO0lBQ3BFO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDOztBQUVGO0FBQ0FyRCxjQUFjLENBQUNzRCxHQUFHLENBQUMsMEJBQTBCLEVBQUUsVUFBQzVDLEdBQUcsRUFBRUMsR0FBRyxFQUFLO0VBQ3pELElBQU9vQixTQUFTLEdBQUlyQixHQUFHLENBQUN5QixNQUFNLENBQXZCSixTQUFTO0VBQ2hCLElBQUF3QixVQUFBLEdBQTREN0MsR0FBRyxDQUFDK0IsSUFBSTtJQUE3REUsSUFBSSxHQUFBWSxVQUFBLENBQUpaLElBQUk7SUFBRUMsS0FBSyxHQUFBVyxVQUFBLENBQUxYLEtBQUs7SUFBRUMsV0FBVyxHQUFBVSxVQUFBLENBQVhWLFdBQVc7SUFBRUMsUUFBUSxHQUFBUyxVQUFBLENBQVJULFFBQVE7SUFBRUMsYUFBYSxHQUFBUSxVQUFBLENBQWJSLGFBQWE7RUFFeEQsSUFBTVMsV0FBVywrSEFJbEI7RUFFQ1AsTUFBRSxDQUFDQyxHQUFHLENBQUNNLFdBQVcsRUFBRSxDQUFDYixJQUFJLEVBQUVDLEtBQUssRUFBRUMsV0FBVyxFQUFFQyxRQUFRLEVBQUVDLGFBQWEsRUFBRWhCLFNBQVMsQ0FBQyxFQUFFLFVBQUNvQixHQUFHLEVBQUs7SUFDekYsSUFBSUEsR0FBRyxFQUFFO01BQ0xDLE9BQU8sQ0FBQzdCLEtBQUssQ0FBQzRCLEdBQUcsQ0FBQ0UsT0FBTyxDQUFDO01BQzFCMUMsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFDRSxLQUFLLEVBQUU7TUFBMEIsQ0FBQyxDQUFDO0lBQzdELENBQUMsTUFBTTtNQUNIWixHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUNnQyxPQUFPLEVBQUU7TUFBOEIsQ0FBQyxDQUFDO0lBQ25FO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDO0FBRUZyRCxjQUFjLFVBQU8sQ0FBQywwQkFBMEIsRUFBRSxVQUFDVSxHQUFHLEVBQUVDLEdBQUcsRUFBSztFQUM1RCxJQUFPb0IsU0FBUyxHQUFJckIsR0FBRyxDQUFDeUIsTUFBTSxDQUF2QkosU0FBUztFQUVoQixJQUFNMEIsV0FBVyxxREFHbEI7RUFFQ1IsTUFBRSxDQUFDQyxHQUFHLENBQUNPLFdBQVcsRUFBRSxDQUFDMUIsU0FBUyxDQUFDLEVBQUUsVUFBQ29CLEdBQUcsRUFBSztJQUN0QyxJQUFJQSxHQUFHLEVBQUU7TUFDTEMsT0FBTyxDQUFDN0IsS0FBSyxDQUFDNEIsR0FBRyxDQUFDRSxPQUFPLENBQUM7TUFDMUIxQyxHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUNFLEtBQUssRUFBRTtNQUEwQixDQUFDLENBQUM7SUFDN0QsQ0FBQyxNQUFNO01BQ0haLEdBQUcsQ0FBQ1MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBQ2dDLE9BQU8sRUFBRTtNQUE4QixDQUFDLENBQUM7SUFDbkU7RUFDSixDQUFDLENBQUM7QUFDTixDQUFDLENBQUMifQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_db","_passport","productsRouter","express","Router","exports","get","_ref","_asyncToGenerator2","_regenerator","mark","_callee","req","res","rows","wrap","_callee$","_context","prev","next","queryDatabase","sent","status","json","t0","error","stop","_x","_x2","apply","arguments","_ref2","_callee2","productId","product","_callee2$","_context2","params","abrupt","_x3","_x4","post","_req$body","body","id","name","price","description","imageUrl","averageRating","insertQuery","db","run","err","console","message","put","_req$body2","updateQuery","deleteQuery"],"sourceRoot":"/home/muteeb/Desktop/e-store-backend/src/routes/","sources":["products.js"],"sourcesContent":["import express from 'express';\nimport {db, queryDatabase} from '../db';\nimport passport from 'passport';\n\nexport const productsRouter = express.Router();\n\nproductsRouter.get('/api/products', async (req, res) => {\n    try {\n        const rows = await queryDatabase('SELECT * FROM products', []);\n        res.status(200).json(rows);\n    } catch (err) {\n        res.status(500).json({error: 'Database error'});\n    }\n});\n\nproductsRouter.get('/api/products/:productId', async (req, res) => {\n    const {productId} = req.params;\n\n    try {\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [productId]);\n        if (!product[0]) {\n            res.status(404).json('Could not find the product!');\n            return;\n        }\n        res.status(200).json(product[0]);\n    } catch (err) {\n        res.status(500).json({error: 'Database error'});\n    }\n});\n\nproductsRouter.post('/api/products', (req, res) => {\n    const {id, name, price, description, imageUrl, averageRating} = req.body;\n\n    const insertQuery = `\n    INSERT INTO products (name, price, description, imageUrl, averageRating)\n    VALUES (?, ?, ?, ?, ?)\n  `;\n\n    db.run(insertQuery, [name, price, description, imageUrl, averageRating], (err) => {\n        if (err) {\n            console.error(err.message);\n            res.status(500).json({error: 'Failed to insert product'});\n        } else {\n            res.status(201).json({message: 'Product inserted successfully'});\n        }\n    });\n});\n\n// API route to update a product based on productId\nproductsRouter.put('/api/products/:productId', (req, res) => {\n    const {productId} = req.params;\n    const {name, price, description, imageUrl, averageRating} = req.body;\n\n    const updateQuery = `\n    UPDATE products\n    SET name = ?, price = ?, description = ?, imageUrl = ?, averageRating = ?\n    WHERE id = ?\n  `;\n\n    db.run(updateQuery, [name, price, description, imageUrl, averageRating, productId], (err) => {\n        if (err) {\n            console.error(err.message);\n            res.status(500).json({error: 'Failed to update product'});\n        } else {\n            res.status(200).json({message: 'Product updated successfully'});\n        }\n    });\n});\n\nproductsRouter.delete('/api/products/:productId', (req, res) => {\n    const {productId} = req.params;\n\n    const deleteQuery = `\n    DELETE FROM products\n    WHERE id = ?\n  `;\n\n    db.run(deleteQuery, [productId], (err) => {\n        if (err) {\n            console.error(err.message);\n            res.status(500).json({error: 'Failed to delete product'});\n        } else {\n            res.status(200).json({message: 'Product deleted successfully'});\n        }\n    });\n});\n\n"],"mappings":"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"}},"mtime":1692968369856},"{\"assumptions\":{},\"sourceRoot\":\"/home/muteeb/Desktop/e-store-backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/muteeb/Desktop/e-store-backend\",\"filename\":\"/home/muteeb/Desktop/e-store-backend/src/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/muteeb/Desktop/e-store-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.db = void 0;\nexports.queryDatabase = queryDatabase;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _sqlite = _interopRequireDefault(require(\"sqlite3\"));\nvar db = new _sqlite[\"default\"].Database('./mock.db', _sqlite[\"default\"].OPEN_READWRITE | _sqlite[\"default\"].OPEN_CREATE, function (err) {\n  if (err) {\n    console.error(err.message);\n  } else {\n    console.log('Connected to the database');\n\n    // Create tables and perform other initializations here\n    // (Code for creating products, users, and carts tables)\n    db.run(\"\\n            CREATE TABLE IF NOT EXISTS products (\\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                name TEXT,\\n                price DOUBLE,\\n                description TEXT,\\n                imageUrl TEXT,\\n                averageRating TEXT\\n            )\\n        \", function (createErr) {\n      if (createErr) {\n        console.error('Error creating products table:', createErr.message);\n      } else {\n        console.log('Products table created successfully');\n      }\n    });\n\n    // Create the users table if it doesn't exist\n    db.run(\"\\n            CREATE TABLE IF NOT EXISTS users (\\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                username TEXT NOT NULL UNIQUE,\\n                email TEXT NOT NULL UNIQUE,\\n                phoneNo TEXT NOT NULL UNIQUE,\\n                password TEXT NOT NULL\\n            )\\n        \", function (createErr) {\n      if (createErr) {\n        console.error('Error creating users table:', createErr.message);\n      } else {\n        console.log('Users table created successfully');\n      }\n    });\n    db.run(\"\\n            CREATE TABLE IF NOT EXISTS carts (\\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                user_id INTEGER, \\n                cart_item_id INTEGER,\\n                product_id INTEGER,\\n                quantity INTEGER,\\n                price DECIMAL(10, 2),\\n                total_price DECIMAL(10, 2),\\n                FOREIGN KEY (user_id) REFERENCES users(id),\\n                FOREIGN KEY (product_id) REFERENCES products(id)\\n            )\\n        \", function (createErr) {\n      if (createErr) {\n        console.error('Error creating carts table:', createErr.message);\n      } else {\n        console.log('Carts table created successfully');\n      }\n    });\n  }\n});\n\n// Function to query the database\nexports.db = db;\nfunction queryDatabase(_x, _x2) {\n  return _queryDatabase.apply(this, arguments);\n} // Export the initialized database and query function\nfunction _queryDatabase() {\n  _queryDatabase = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(query, params) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n            var db = new _sqlite[\"default\"].Database('./mock.db');\n            db.all(query, params, function (err, rows) {\n              if (err) {\n                reject(err);\n              } else {\n                resolve(rows);\n              }\n              db.close();\n            });\n          }));\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _queryDatabase.apply(this, arguments);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3FsaXRlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJkYiIsInNxbGl0ZTMiLCJEYXRhYmFzZSIsIk9QRU5fUkVBRFdSSVRFIiwiT1BFTl9DUkVBVEUiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJtZXNzYWdlIiwibG9nIiwicnVuIiwiY3JlYXRlRXJyIiwiZXhwb3J0cyIsInF1ZXJ5RGF0YWJhc2UiLCJfeCIsIl94MiIsIl9xdWVyeURhdGFiYXNlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVnZW5lcmF0b3IiLCJtYXJrIiwiX2NhbGxlZSIsInF1ZXJ5IiwicGFyYW1zIiwid3JhcCIsIl9jYWxsZWUkIiwiX2NvbnRleHQiLCJwcmV2IiwibmV4dCIsImFicnVwdCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiYWxsIiwicm93cyIsImNsb3NlIiwic3RvcCJdLCJzb3VyY2VSb290IjoiL2hvbWUvbXV0ZWViL0Rlc2t0b3AvZS1zdG9yZS1iYWNrZW5kL3NyYy8iLCJzb3VyY2VzIjpbImRiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzcWxpdGUzIGZyb20gJ3NxbGl0ZTMnO1xuXG5jb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKCcuL21vY2suZGInLCBzcWxpdGUzLk9QRU5fUkVBRFdSSVRFIHwgc3FsaXRlMy5PUEVOX0NSRUFURSwgKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byB0aGUgZGF0YWJhc2UnKTtcblxuICAgICAgICAvLyBDcmVhdGUgdGFibGVzIGFuZCBwZXJmb3JtIG90aGVyIGluaXRpYWxpemF0aW9ucyBoZXJlXG4gICAgICAgIC8vIChDb2RlIGZvciBjcmVhdGluZyBwcm9kdWN0cywgdXNlcnMsIGFuZCBjYXJ0cyB0YWJsZXMpXG4gICAgICAgIGRiLnJ1bihgXG4gICAgICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBwcm9kdWN0cyAoXG4gICAgICAgICAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICAgICAgICAgIG5hbWUgVEVYVCxcbiAgICAgICAgICAgICAgICBwcmljZSBET1VCTEUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICAgICAgICAgICAgICBpbWFnZVVybCBURVhULFxuICAgICAgICAgICAgICAgIGF2ZXJhZ2VSYXRpbmcgVEVYVFxuICAgICAgICAgICAgKVxuICAgICAgICBgLCAoY3JlYXRlRXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoY3JlYXRlRXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcHJvZHVjdHMgdGFibGU6JywgY3JlYXRlRXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUHJvZHVjdHMgdGFibGUgY3JlYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSB1c2VycyB0YWJsZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgIGRiLnJ1bihgXG4gICAgICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB1c2VycyAoXG4gICAgICAgICAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICAgICAgICAgIHVzZXJuYW1lIFRFWFQgTk9UIE5VTEwgVU5JUVVFLFxuICAgICAgICAgICAgICAgIGVtYWlsIFRFWFQgTk9UIE5VTEwgVU5JUVVFLFxuICAgICAgICAgICAgICAgIHBob25lTm8gVEVYVCBOT1QgTlVMTCBVTklRVUUsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQgVEVYVCBOT1QgTlVMTFxuICAgICAgICAgICAgKVxuICAgICAgICBgLCAoY3JlYXRlRXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoY3JlYXRlRXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcnMgdGFibGU6JywgY3JlYXRlRXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXNlcnMgdGFibGUgY3JlYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGIucnVuKGBcbiAgICAgICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNhcnRzIChcbiAgICAgICAgICAgICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICAgICAgICAgICAgdXNlcl9pZCBJTlRFR0VSLCBcbiAgICAgICAgICAgICAgICBjYXJ0X2l0ZW1faWQgSU5URUdFUixcbiAgICAgICAgICAgICAgICBwcm9kdWN0X2lkIElOVEVHRVIsXG4gICAgICAgICAgICAgICAgcXVhbnRpdHkgSU5URUdFUixcbiAgICAgICAgICAgICAgICBwcmljZSBERUNJTUFMKDEwLCAyKSxcbiAgICAgICAgICAgICAgICB0b3RhbF9wcmljZSBERUNJTUFMKDEwLCAyKSxcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyhpZCksXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKHByb2R1Y3RfaWQpIFJFRkVSRU5DRVMgcHJvZHVjdHMoaWQpXG4gICAgICAgICAgICApXG4gICAgICAgIGAsIChjcmVhdGVFcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChjcmVhdGVFcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXJ0cyB0YWJsZTonLCBjcmVhdGVFcnIubWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDYXJ0cyB0YWJsZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLy8gRnVuY3Rpb24gdG8gcXVlcnkgdGhlIGRhdGFiYXNlXG5hc3luYyBmdW5jdGlvbiBxdWVyeURhdGFiYXNlKHF1ZXJ5LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKCcuL21vY2suZGInKTtcbiAgICAgICAgZGIuYWxsKHF1ZXJ5LCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyb3dzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8gRXhwb3J0IHRoZSBpbml0aWFsaXplZCBkYXRhYmFzZSBhbmQgcXVlcnkgZnVuY3Rpb25cbmV4cG9ydCB7IGRiLCBxdWVyeURhdGFiYXNlIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFNQyxFQUFFLEdBQUcsSUFBSUMsa0JBQU8sQ0FBQ0MsUUFBUSxDQUFDLFdBQVcsRUFBRUQsa0JBQU8sQ0FBQ0UsY0FBYyxHQUFHRixrQkFBTyxDQUFDRyxXQUFXLEVBQUUsVUFBQ0MsR0FBRyxFQUFLO0VBQ2hHLElBQUlBLEdBQUcsRUFBRTtJQUNMQyxPQUFPLENBQUNDLEtBQUss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","map":{"version":3,"names":["_sqlite","_interopRequireDefault","require","db","sqlite3","Database","OPEN_READWRITE","OPEN_CREATE","err","console","error","message","log","run","createErr","exports","queryDatabase","_x","_x2","_queryDatabase","apply","arguments","_asyncToGenerator2","_regenerator","mark","_callee","query","params","wrap","_callee$","_context","prev","next","abrupt","Promise","resolve","reject","all","rows","close","stop"],"sourceRoot":"/home/muteeb/Desktop/e-store-backend/src/","sources":["db.js"],"sourcesContent":["import sqlite3 from 'sqlite3';\n\nconst db = new sqlite3.Database('./mock.db', sqlite3.OPEN_READWRITE | sqlite3.OPEN_CREATE, (err) => {\n    if (err) {\n        console.error(err.message);\n    } else {\n        console.log('Connected to the database');\n\n        // Create tables and perform other initializations here\n        // (Code for creating products, users, and carts tables)\n        db.run(`\n            CREATE TABLE IF NOT EXISTS products (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                name TEXT,\n                price DOUBLE,\n                description TEXT,\n                imageUrl TEXT,\n                averageRating TEXT\n            )\n        `, (createErr) => {\n            if (createErr) {\n                console.error('Error creating products table:', createErr.message);\n            } else {\n                console.log('Products table created successfully');\n            }\n        });\n\n        // Create the users table if it doesn't exist\n        db.run(`\n            CREATE TABLE IF NOT EXISTS users (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                username TEXT NOT NULL UNIQUE,\n                email TEXT NOT NULL UNIQUE,\n                phoneNo TEXT NOT NULL UNIQUE,\n                password TEXT NOT NULL\n            )\n        `, (createErr) => {\n            if (createErr) {\n                console.error('Error creating users table:', createErr.message);\n            } else {\n                console.log('Users table created successfully');\n            }\n        });\n\n        db.run(`\n            CREATE TABLE IF NOT EXISTS carts (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER, \n                cart_item_id INTEGER,\n                product_id INTEGER,\n                quantity INTEGER,\n                price DECIMAL(10, 2),\n                total_price DECIMAL(10, 2),\n                FOREIGN KEY (user_id) REFERENCES users(id),\n                FOREIGN KEY (product_id) REFERENCES products(id)\n            )\n        `, (createErr) => {\n            if (createErr) {\n                console.error('Error creating carts table:', createErr.message);\n            } else {\n                console.log('Carts table created successfully');\n            }\n        });\n    }\n});\n\n// Function to query the database\nasync function queryDatabase(query, params) {\n    return new Promise((resolve, reject) => {\n        const db = new sqlite3.Database('./mock.db');\n        db.all(query, params, (err, rows) => {\n            if (err) {\n                reject(err);\n            } else {\n                resolve(rows);\n            }\n            db.close();\n        });\n    });\n}\n// Export the initialized database and query function\nexport { db, queryDatabase };\n"],"mappings":";;;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAMC,EAAE,GAAG,IAAIC,kBAAO,CAACC,QAAQ,CAAC,WAAW,EAAED,kBAAO,CAACE,cAAc,GAAGF,kBAAO,CAACG,WAAW,EAAE,UAACC,GAAG,EAAK;EAChG,IAAIA,GAAG,EAAE;IACLC,OAAO,CAACC,KAAK,CAACF,GAAG,CAACG,OAAO,CAAC;EAC9B,CAAC,MAAM;IACHF,OAAO,CAACG,GAAG,CAAC,2BAA2B,CAAC;;IAExC;IACA;IACAT,EAAE,CAACU,GAAG,0SASH,UAACC,SAAS,EAAK;MACd,IAAIA,SAAS,EAAE;QACXL,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEI,SAAS,CAACH,OAAO,CAAC;MACtE,CAAC,MAAM;QACHF,OAAO,CAACG,GAAG,CAAC,qCAAqC,CAAC;MACtD;IACJ,CAAC,CAAC;;IAEF;IACAT,EAAE,CAACU,GAAG,yTAQH,UAACC,SAAS,EAAK;MACd,IAAIA,SAAS,EAAE;QACXL,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEI,SAAS,CAACH,OAAO,CAAC;MACnE,CAAC,MAAM;QACHF,OAAO,CAACG,GAAG,CAAC,kCAAkC,CAAC;MACnD;IACJ,CAAC,CAAC;IAEFT,EAAE,CAACU,GAAG,0eAYH,UAACC,SAAS,EAAK;MACd,IAAIA,SAAS,EAAE;QACXL,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEI,SAAS,CAACH,OAAO,CAAC;MACnE,CAAC,MAAM;QACHF,OAAO,CAACG,GAAG,CAAC,kCAAkC,CAAC;MACnD;IACJ,CAAC,CAAC;EACN;AACJ,CAAC,CAAC;;AAEF;AAAAG,OAAA,CAAAZ,EAAA,GAAAA,EAAA;AAAA,SACea,aAAaA,CAAAC,EAAA,EAAAC,GAAA;EAAA,OAAAC,cAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA,EAa5B;AAAA,SAAAF,eAAA;EAAAA,cAAA,OAAAG,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAbA,SAAAC,QAA6BC,KAAK,EAAEC,MAAM;IAAA,OAAAJ,YAAA,YAAAK,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,OAAAF,QAAA,CAAAG,MAAA,WAC/B,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;YACpC,IAAMjC,EAAE,GAAG,IAAIC,kBAAO,CAACC,QAAQ,CAAC,WAAW,CAAC;YAC5CF,EAAE,CAACkC,GAAG,CAACX,KAAK,EAAEC,MAAM,EAAE,UAACnB,GAAG,EAAE8B,IAAI,EAAK;cACjC,IAAI9B,GAAG,EAAE;gBACL4B,MAAM,CAAC5B,GAAG,CAAC;cACf,CAAC,MAAM;gBACH2B,OAAO,CAACG,IAAI,CAAC;cACjB;cACAnC,EAAE,CAACoC,KAAK,CAAC,CAAC;YACd,CAAC,CAAC;UACN,CAAC,CAAC;QAAA;QAAA;UAAA,OAAAT,QAAA,CAAAU,IAAA;MAAA;IAAA,GAAAf,OAAA;EAAA,CACL;EAAA,OAAAN,cAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA"}},"mtime":1692967696939},"{\"assumptions\":{},\"sourceRoot\":\"/home/muteeb/Desktop/e-store-backend/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/muteeb/Desktop/e-store-backend\",\"filename\":\"/home/muteeb/Desktop/e-store-backend/src/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/muteeb/Desktop/e-store-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.usersRouter = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _db = require(\"../db\");\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar usersRouter = _express[\"default\"].Router();\nexports.usersRouter = usersRouter;\nusersRouter.get('/api/users/:userId/cart', /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n    var userId, cartItems;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          userId = req.params.userId;\n          _context.prev = 1;\n          _context.next = 4;\n          return (0, _db.queryDatabase)('SELECT c.*, p.name, p.price, p.imageUrl ' + 'FROM carts c ' + 'JOIN products p ON c.product_id = p.id ' + 'WHERE c.user_id = ?', [userId]);\n        case 4:\n          cartItems = _context.sent;\n          res.status(200).json(cartItems);\n          _context.next = 11;\n          break;\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](1);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 8]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// API route to add to cart\nusersRouter.post('/api/users/:userId/cart', /*#__PURE__*/function () {\n  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res) {\n    var userId, _req$body, product_id, quantity, product, cartItem, _price, _total_price, updateQuery, price, total_price, insertQuery;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          userId = req.params.userId;\n          _req$body = req.body, product_id = _req$body.product_id, quantity = _req$body.quantity;\n          _context2.prev = 2;\n          _context2.next = 5;\n          return (0, _db.queryDatabase)('SELECT * FROM products WHERE id = ?', [product_id]);\n        case 5:\n          product = _context2.sent;\n          if (product[0]) {\n            _context2.next = 9;\n            break;\n          }\n          res.status(404).json('Could not find product!');\n          return _context2.abrupt(\"return\");\n        case 9:\n          _context2.next = 11;\n          return (0, _db.queryDatabase)('SELECT * FROM carts WHERE product_id = ? AND user_id = ?', [product_id, userId]);\n        case 11:\n          cartItem = _context2.sent;\n          if (!cartItem[0]) {\n            _context2.next = 20;\n            break;\n          }\n          // Calculate total price based on updated quantity\n          // const _qty = parseInt(cartItem[0].quantity) + quantity;\n          _price = parseFloat(product[0].price);\n          _total_price = _price * quantity; // Update the cart item with new quantity and total price\n          updateQuery = \"\\n            UPDATE carts\\n            SET quantity = ?, price = ?, total_price = ?\\n            WHERE product_id = ?\\n        \";\n          _context2.next = 18;\n          return (0, _db.queryDatabase)(updateQuery, [quantity, _price, _total_price, product_id]);\n        case 18:\n          res.status(200).json({\n            message: 'Cart item updated successfully'\n          });\n          return _context2.abrupt(\"return\");\n        case 20:\n          // Calculate total price based on product price and quantity\n          price = parseFloat(product[0].price);\n          total_price = price * quantity; // Insert the item into the cart\n          insertQuery = \"\\n            INSERT INTO carts (user_id, product_id, quantity, price, total_price)\\n            VALUES (?, ?, ?, ?, ?)\\n        \";\n          _context2.next = 25;\n          return (0, _db.queryDatabase)(insertQuery, [userId, product_id, quantity, price, total_price]);\n        case 25:\n          res.status(200).json({\n            message: 'Product added to cart successfully'\n          });\n          _context2.next = 31;\n          break;\n        case 28:\n          _context2.prev = 28;\n          _context2.t0 = _context2[\"catch\"](2);\n          res.status(500).json({\n            error: 'Database error:' + _context2.t0\n          });\n        case 31:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[2, 28]]);\n  }));\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\n// API route to update the quantity of a product in a user's cart\nusersRouter.put('/api/users/:userId/cart/:cartItemId', /*#__PURE__*/function () {\n  var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res) {\n    var _req$params, userId, cartItemId, quantity, cartItem, product, price, total_price, updateQuery;\n    return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _req$params = req.params, userId = _req$params.userId, cartItemId = _req$params.cartItemId;\n          quantity = req.body.quantity;\n          _context3.prev = 2;\n          _context3.next = 5;\n          return (0, _db.queryDatabase)('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        case 5:\n          cartItem = _context3.sent;\n          if (cartItem[0]) {\n            _context3.next = 9;\n            break;\n          }\n          res.status(404).json('Could not find cart item!');\n          return _context3.abrupt(\"return\");\n        case 9:\n          _context3.next = 11;\n          return (0, _db.queryDatabase)('SELECT * FROM products WHERE id = ?', [cartItem[0].product_id]);\n        case 11:\n          product = _context3.sent;\n          if (product[0]) {\n            _context3.next = 15;\n            break;\n          }\n          res.status(404).json('Could not find product!');\n          return _context3.abrupt(\"return\");\n        case 15:\n          // Calculate total price based on updated quantity\n          price = parseFloat(product[0].price);\n          total_price = price * quantity; // Update the cart item with new quantity and total price\n          updateQuery = \"\\n            UPDATE carts\\n            SET quantity = ?, price = ?, total_price = ?\\n            WHERE id = ?\\n        \";\n          _context3.next = 20;\n          return (0, _db.queryDatabase)(updateQuery, [quantity, price, total_price, cartItemId]);\n        case 20:\n          res.status(200).json({\n            message: 'Cart item updated successfully'\n          });\n          _context3.next = 26;\n          break;\n        case 23:\n          _context3.prev = 23;\n          _context3.t0 = _context3[\"catch\"](2);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 26:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[2, 23]]);\n  }));\n  return function (_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nusersRouter[\"delete\"]('/api/users/:userId/cart/:cartItemId', /*#__PURE__*/function () {\n  var _ref4 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res) {\n    var _req$params2, userId, cartItemId, cartItem, deleteQuery;\n    return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _req$params2 = req.params, userId = _req$params2.userId, cartItemId = _req$params2.cartItemId;\n          _context4.prev = 1;\n          _context4.next = 4;\n          return (0, _db.queryDatabase)('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        case 4:\n          cartItem = _context4.sent;\n          if (cartItem[0]) {\n            _context4.next = 8;\n            break;\n          }\n          res.status(404).json({\n            message: 'Could not find cart item!'\n          });\n          return _context4.abrupt(\"return\");\n        case 8:\n          // Delete the item from the cart\n          deleteQuery = \"\\n            DELETE FROM carts\\n            WHERE id = ? AND user_id = ?\\n        \";\n          _context4.next = 11;\n          return (0, _db.queryDatabase)(deleteQuery, [cartItemId, userId]);\n        case 11:\n          res.status(200).json({\n            message: 'Product removed from cart successfully'\n          });\n          _context4.next = 17;\n          break;\n        case 14:\n          _context4.prev = 14;\n          _context4.t0 = _context4[\"catch\"](1);\n          res.status(500).json({\n            message: 'Database error'\n          });\n        case 17:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[1, 14]]);\n  }));\n  return function (_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RiIiwiX3Bhc3Nwb3J0IiwidXNlcnNSb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwiZXhwb3J0cyIsImdldCIsIl9yZWYiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVnZW5lcmF0b3IiLCJtYXJrIiwiX2NhbGxlZSIsInJlcSIsInJlcyIsInVzZXJJZCIsImNhcnRJdGVtcyIsIndyYXAiLCJfY2FsbGVlJCIsIl9jb250ZXh0IiwicHJldiIsIm5leHQiLCJwYXJhbXMiLCJxdWVyeURhdGFiYXNlIiwic2VudCIsInN0YXR1cyIsImpzb24iLCJ0MCIsImVycm9yIiwic3RvcCIsIl94IiwiX3gyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJwb3N0IiwiX3JlZjIiLCJfY2FsbGVlMiIsIl9yZXEkYm9keSIsInByb2R1Y3RfaWQiLCJxdWFudGl0eSIsInByb2R1Y3QiLCJjYXJ0SXRlbSIsIl9wcmljZSIsIl90b3RhbF9wcmljZSIsInVwZGF0ZVF1ZXJ5IiwicHJpY2UiLCJ0b3RhbF9wcmljZSIsImluc2VydFF1ZXJ5IiwiX2NhbGxlZTIkIiwiX2NvbnRleHQyIiwiYm9keSIsImFicnVwdCIsInBhcnNlRmxvYXQiLCJtZXNzYWdlIiwiX3gzIiwiX3g0IiwicHV0IiwiX3JlZjMiLCJfY2FsbGVlMyIsIl9yZXEkcGFyYW1zIiwiY2FydEl0ZW1JZCIsIl9jYWxsZWUzJCIsIl9jb250ZXh0MyIsIl94NSIsIl94NiIsIl9yZWY0IiwiX2NhbGxlZTQiLCJfcmVxJHBhcmFtczIiLCJkZWxldGVRdWVyeSIsIl9jYWxsZWU0JCIsIl9jb250ZXh0NCIsIl94NyIsIl94OCJdLCJzb3VyY2VSb290IjoiL2hvbWUvbXV0ZWViL0Rlc2t0b3AvZS1zdG9yZS1iYWNrZW5kL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJ1c2Vycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGRiLCBxdWVyeURhdGFiYXNlIH0gZnJvbSAnLi4vZGInO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0JztcblxuZXhwb3J0IGNvbnN0IHVzZXJzUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxudXNlcnNSb3V0ZXIuZ2V0KCcvYXBpL3VzZXJzLzp1c2VySWQvY2FydCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2FydEl0ZW1zID0gYXdhaXQgcXVlcnlEYXRhYmFzZShcbiAgICAgICAgICAgICdTRUxFQ1QgYy4qLCBwLm5hbWUsIHAucHJpY2UsIHAuaW1hZ2VVcmwgJyArXG4gICAgICAgICAgICAnRlJPTSBjYXJ0cyBjICcgK1xuICAgICAgICAgICAgJ0pPSU4gcHJvZHVjdHMgcCBPTiBjLnByb2R1Y3RfaWQgPSBwLmlkICcgK1xuICAgICAgICAgICAgJ1dIRVJFIGMudXNlcl9pZCA9ID8nLFxuICAgICAgICAgICAgW3VzZXJJZF1cbiAgICAgICAgKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oY2FydEl0ZW1zKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0RhdGFiYXNlIGVycm9yJyB9KTtcbiAgICB9XG59KTtcblxuLy8gQVBJIHJvdXRlIHRvIGFkZCB0byBjYXJ0XG51c2Vyc1JvdXRlci5wb3N0KCcvYXBpL3VzZXJzLzp1c2VySWQvY2FydCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHsgcHJvZHVjdF9pZCwgcXVhbnRpdHkgfSA9IHJlcS5ib2R5O1xuXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggcHJvZHVjdCBkZXRhaWxzIGZyb20gdGhlIHByb2R1Y3RzIHRhYmxlXG4gICAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIHByb2R1Y3RzIFdIRVJFIGlkID0gPycsIFtwcm9kdWN0X2lkXSk7XG4gICAgICAgIGlmICghcHJvZHVjdFswXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oJ0NvdWxkIG5vdCBmaW5kIHByb2R1Y3QhJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGZXRjaCB0aGUgY2FydCBpdGVtIGRldGFpbHNcbiAgICAgICAgY29uc3QgY2FydEl0ZW0gPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIGNhcnRzIFdIRVJFIHByb2R1Y3RfaWQgPSA/IEFORCB1c2VyX2lkID0gPycsIFtwcm9kdWN0X2lkLCB1c2VySWRdKTtcbiAgICAgICAgaWYgKGNhcnRJdGVtWzBdKSB7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgdG90YWwgcHJpY2UgYmFzZWQgb24gdXBkYXRlZCBxdWFudGl0eVxuICAgICAgICAgICAgLy8gY29uc3QgX3F0eSA9IHBhcnNlSW50KGNhcnRJdGVtWzBdLnF1YW50aXR5KSArIHF1YW50aXR5O1xuICAgICAgICAgICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KHByb2R1Y3RbMF0ucHJpY2UpO1xuICAgICAgICAgICAgY29uc3QgdG90YWxfcHJpY2UgPSBwcmljZSAqIHF1YW50aXR5O1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNhcnQgaXRlbSB3aXRoIG5ldyBxdWFudGl0eSBhbmQgdG90YWwgcHJpY2VcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVF1ZXJ5ID0gYFxuICAgICAgICAgICAgVVBEQVRFIGNhcnRzXG4gICAgICAgICAgICBTRVQgcXVhbnRpdHkgPSA/LCBwcmljZSA9ID8sIHRvdGFsX3ByaWNlID0gP1xuICAgICAgICAgICAgV0hFUkUgcHJvZHVjdF9pZCA9ID9cbiAgICAgICAgYDtcbiAgICAgICAgICAgIGF3YWl0IHF1ZXJ5RGF0YWJhc2UodXBkYXRlUXVlcnksIFtxdWFudGl0eSwgcHJpY2UsIHRvdGFsX3ByaWNlLCBwcm9kdWN0X2lkXSk7XG5cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0NhcnQgaXRlbSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxjdWxhdGUgdG90YWwgcHJpY2UgYmFzZWQgb24gcHJvZHVjdCBwcmljZSBhbmQgcXVhbnRpdHlcbiAgICAgICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KHByb2R1Y3RbMF0ucHJpY2UpO1xuICAgICAgICBjb25zdCB0b3RhbF9wcmljZSA9IHByaWNlICogcXVhbnRpdHk7XG5cbiAgICAgICAgLy8gSW5zZXJ0IHRoZSBpdGVtIGludG8gdGhlIGNhcnRcbiAgICAgICAgY29uc3QgaW5zZXJ0UXVlcnkgPSBgXG4gICAgICAgICAgICBJTlNFUlQgSU5UTyBjYXJ0cyAodXNlcl9pZCwgcHJvZHVjdF9pZCwgcXVhbnRpdHksIHByaWNlLCB0b3RhbF9wcmljZSlcbiAgICAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPylcbiAgICAgICAgYDtcbiAgICAgICAgYXdhaXQgcXVlcnlEYXRhYmFzZShpbnNlcnRRdWVyeSwgW3VzZXJJZCwgcHJvZHVjdF9pZCwgcXVhbnRpdHksIHByaWNlLCB0b3RhbF9wcmljZV0pO1xuXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1Byb2R1Y3QgYWRkZWQgdG8gY2FydCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRGF0YWJhc2UgZXJyb3I6JyArIGVyciB9KTtcbiAgICB9XG59KTtcblxuLy8gQVBJIHJvdXRlIHRvIHVwZGF0ZSB0aGUgcXVhbnRpdHkgb2YgYSBwcm9kdWN0IGluIGEgdXNlcidzIGNhcnRcbnVzZXJzUm91dGVyLnB1dCgnL2FwaS91c2Vycy86dXNlcklkL2NhcnQvOmNhcnRJdGVtSWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IHVzZXJJZCwgY2FydEl0ZW1JZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHF1YW50aXR5IH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICAgIC8vIEZldGNoIHRoZSBjYXJ0IGl0ZW0gZGV0YWlsc1xuICAgICAgICBjb25zdCBjYXJ0SXRlbSA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gY2FydHMgV0hFUkUgaWQgPSA/IEFORCB1c2VyX2lkID0gPycsIFtjYXJ0SXRlbUlkLCB1c2VySWRdKTtcbiAgICAgICAgaWYgKCFjYXJ0SXRlbVswXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oJ0NvdWxkIG5vdCBmaW5kIGNhcnQgaXRlbSEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZldGNoIHByb2R1Y3QgZGV0YWlscyBmcm9tIHRoZSBwcm9kdWN0cyB0YWJsZVxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcXVlcnlEYXRhYmFzZSgnU0VMRUNUICogRlJPTSBwcm9kdWN0cyBXSEVSRSBpZCA9ID8nLCBbY2FydEl0ZW1bMF0ucHJvZHVjdF9pZF0pO1xuICAgICAgICBpZiAoIXByb2R1Y3RbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKCdDb3VsZCBub3QgZmluZCBwcm9kdWN0IScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHByaWNlIGJhc2VkIG9uIHVwZGF0ZWQgcXVhbnRpdHlcbiAgICAgICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KHByb2R1Y3RbMF0ucHJpY2UpO1xuICAgICAgICBjb25zdCB0b3RhbF9wcmljZSA9IHByaWNlICogcXVhbnRpdHk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBjYXJ0IGl0ZW0gd2l0aCBuZXcgcXVhbnRpdHkgYW5kIHRvdGFsIHByaWNlXG4gICAgICAgIGNvbnN0IHVwZGF0ZVF1ZXJ5ID0gYFxuICAgICAgICAgICAgVVBEQVRFIGNhcnRzXG4gICAgICAgICAgICBTRVQgcXVhbnRpdHkgPSA/LCBwcmljZSA9ID8sIHRvdGFsX3ByaWNlID0gP1xuICAgICAgICAgICAgV0hFUkUgaWQgPSA/XG4gICAgICAgIGA7XG4gICAgICAgIGF3YWl0IHF1ZXJ5RGF0YWJhc2UodXBkYXRlUXVlcnksIFtxdWFudGl0eSwgcHJpY2UsIHRvdGFsX3ByaWNlLCBjYXJ0SXRlbUlkXSk7XG5cbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnQ2FydCBpdGVtIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0RhdGFiYXNlIGVycm9yJyB9KTtcbiAgICB9XG59KTtcblxudXNlcnNSb3V0ZXIuZGVsZXRlKCcvYXBpL3VzZXJzLzp1c2VySWQvY2FydC86Y2FydEl0ZW1JZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgdXNlcklkLCBjYXJ0SXRlbUlkIH0gPSByZXEucGFyYW1zO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggdGhlIGNhcnQgaXRlbSBkZXRhaWxzXG4gICAgICAgIGNvbnN0IGNhcnRJdGVtID0gYXdhaXQgcXVlcnlEYXRhYmFzZSgnU0VMRUNUICogRlJPTSBjYXJ0cyBXSEVSRSBpZCA9ID8gQU5EIHVzZXJfaWQgPSA/JywgW2NhcnRJdGVtSWQsIHVzZXJJZF0pO1xuICAgICAgICBpZiAoIWNhcnRJdGVtWzBdKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdDb3VsZCBub3QgZmluZCBjYXJ0IGl0ZW0hJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgaXRlbSBmcm9tIHRoZSBjYXJ0XG4gICAgICAgIGNvbnN0IGRlbGV0ZVF1ZXJ5ID0gYFxuICAgICAgICAgICAgREVMRVRFIEZST00gY2FydHNcbiAgICAgICAgICAgIFdIRVJFIGlkID0gPyBBTkQgdXNlcl9pZCA9ID9cbiAgICAgICAgYDtcbiAgICAgICAgYXdhaXQgcXVlcnlEYXRhYmFzZShkZWxldGVRdWVyeSwgW2NhcnRJdGVtSWQsIHVzZXJJZF0pO1xuXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1Byb2R1Y3QgcmVtb3ZlZCBmcm9tIGNhcnQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRGF0YWJhc2UgZXJyb3InIH0pO1xuICAgIH1cbn0pO1xuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEdBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFNBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUVPLElBQU1HLFdBQVcsR0FBR0MsbUJBQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFBQ0MsT0FBQSxDQUFBSCxXQUFBLEdBQUFBLFdBQUE7QUFFNUNBLFdBQVcsQ0FBQ0ksR0FBRyxDQUFDLHlCQUF5QjtFQUFBLElBQUFDLElBQUEsT0FBQUMsa0JBQUEsMkJBQUFDLFlBQUEsWUFBQUMsSUFBQSxDQUFFLFNBQUFDLFFBQU9DLEdBQUcsRUFBRUMsR0FBRztJQUFBLElBQUFDLE1BQUEsRUFBQUMsU0FBQTtJQUFBLE9BQUFOLFlBQUEsWUFBQU8sSUFBQSxVQUFBQyxTQUFBQyxRQUFBO01BQUEs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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_db","_passport","usersRouter","express","Router","exports","get","_ref","_asyncToGenerator2","_regenerator","mark","_callee","req","res","userId","cartItems","wrap","_callee$","_context","prev","next","params","queryDatabase","sent","status","json","t0","error","stop","_x","_x2","apply","arguments","post","_ref2","_callee2","_req$body","product_id","quantity","product","cartItem","_price","_total_price","updateQuery","price","total_price","insertQuery","_callee2$","_context2","body","abrupt","parseFloat","message","_x3","_x4","put","_ref3","_callee3","_req$params","cartItemId","_callee3$","_context3","_x5","_x6","_ref4","_callee4","_req$params2","deleteQuery","_callee4$","_context4","_x7","_x8"],"sourceRoot":"/home/muteeb/Desktop/e-store-backend/src/routes/","sources":["users.js"],"sourcesContent":["import express from 'express';\nimport { db, queryDatabase } from '../db';\nimport passport from 'passport';\n\nexport const usersRouter = express.Router();\n\nusersRouter.get('/api/users/:userId/cart', async (req, res) => {\n    const { userId } = req.params;\n\n    try {\n        const cartItems = await queryDatabase(\n            'SELECT c.*, p.name, p.price, p.imageUrl ' +\n            'FROM carts c ' +\n            'JOIN products p ON c.product_id = p.id ' +\n            'WHERE c.user_id = ?',\n            [userId]\n        );\n        res.status(200).json(cartItems);\n    } catch (err) {\n        res.status(500).json({ error: 'Database error' });\n    }\n});\n\n// API route to add to cart\nusersRouter.post('/api/users/:userId/cart', async (req, res) => {\n    const { userId } = req.params;\n    const { product_id, quantity } = req.body;\n\n    try {\n        // Fetch product details from the products table\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [product_id]);\n        if (!product[0]) {\n            res.status(404).json('Could not find product!');\n            return;\n        }\n\n        // Fetch the cart item details\n        const cartItem = await queryDatabase('SELECT * FROM carts WHERE product_id = ? AND user_id = ?', [product_id, userId]);\n        if (cartItem[0]) {\n            // Calculate total price based on updated quantity\n            // const _qty = parseInt(cartItem[0].quantity) + quantity;\n            const price = parseFloat(product[0].price);\n            const total_price = price * quantity;\n\n            // Update the cart item with new quantity and total price\n            const updateQuery = `\n            UPDATE carts\n            SET quantity = ?, price = ?, total_price = ?\n            WHERE product_id = ?\n        `;\n            await queryDatabase(updateQuery, [quantity, price, total_price, product_id]);\n\n            res.status(200).json({ message: 'Cart item updated successfully' });\n            return;\n        }\n\n        // Calculate total price based on product price and quantity\n        const price = parseFloat(product[0].price);\n        const total_price = price * quantity;\n\n        // Insert the item into the cart\n        const insertQuery = `\n            INSERT INTO carts (user_id, product_id, quantity, price, total_price)\n            VALUES (?, ?, ?, ?, ?)\n        `;\n        await queryDatabase(insertQuery, [userId, product_id, quantity, price, total_price]);\n\n        res.status(200).json({ message: 'Product added to cart successfully' });\n    } catch (err) {\n        res.status(500).json({ error: 'Database error:' + err });\n    }\n});\n\n// API route to update the quantity of a product in a user's cart\nusersRouter.put('/api/users/:userId/cart/:cartItemId', async (req, res) => {\n    const { userId, cartItemId } = req.params;\n    const { quantity } = req.body;\n\n    try {\n        // Fetch the cart item details\n        const cartItem = await queryDatabase('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        if (!cartItem[0]) {\n            res.status(404).json('Could not find cart item!');\n            return;\n        }\n\n        // Fetch product details from the products table\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [cartItem[0].product_id]);\n        if (!product[0]) {\n            res.status(404).json('Could not find product!');\n            return;\n        }\n\n        // Calculate total price based on updated quantity\n        const price = parseFloat(product[0].price);\n        const total_price = price * quantity;\n\n        // Update the cart item with new quantity and total price\n        const updateQuery = `\n            UPDATE carts\n            SET quantity = ?, price = ?, total_price = ?\n            WHERE id = ?\n        `;\n        await queryDatabase(updateQuery, [quantity, price, total_price, cartItemId]);\n\n        res.status(200).json({ message: 'Cart item updated successfully' });\n    } catch (err) {\n        res.status(500).json({ error: 'Database error' });\n    }\n});\n\nusersRouter.delete('/api/users/:userId/cart/:cartItemId', async (req, res) => {\n    const { userId, cartItemId } = req.params;\n\n    try {\n        // Fetch the cart item details\n        const cartItem = await queryDatabase('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        if (!cartItem[0]) {\n            res.status(404).json({ message: 'Could not find cart item!' });\n            return;\n        }\n\n        // Delete the item from the cart\n        const deleteQuery = `\n            DELETE FROM carts\n            WHERE id = ? AND user_id = ?\n        `;\n        await queryDatabase(deleteQuery, [cartItemId, userId]);\n\n        res.status(200).json({ message: 'Product removed from cart successfully' });\n    } catch (err) {\n        res.status(500).json({ message: 'Database error' });\n    }\n});\n\n"],"mappings":";;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,GAAA,GAAAD,OAAA;AACA,IAAAE,SAAA,GAAAH,sBAAA,CAAAC,OAAA;AAEO,IAAMG,WAAW,GAAGC,mBAAO,CAACC,MAAM,CAAC,CAAC;AAACC,OAAA,CAAAH,WAAA,GAAAA,WAAA;AAE5CA,WAAW,CAACI,GAAG,CAAC,yBAAyB;EAAA,IAAAC,IAAA,OAAAC,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAC,QAAOC,GAAG,EAAEC,GAAG;IAAA,IAAAC,MAAA,EAAAC,SAAA;IAAA,OAAAN,YAAA,YAAAO,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAC9CN,MAAM,GAAKF,GAAG,CAACS,MAAM,CAArBP,MAAM;UAAAI,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAE,IAAA;UAAA,OAGc,IAAAE,iBAAa,EACjC,0CAA0C,GAC1C,eAAe,GACf,yCAAyC,GACzC,qBAAqB,EACrB,CAACR,MAAM,CACX,CAAC;QAAA;UANKC,SAAS,GAAAG,QAAA,CAAAK,IAAA;UAOfV,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACV,SAAS,CAAC;UAACG,QAAA,CAAAE,IAAA;UAAA;QAAA;UAAAF,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAQ,EAAA,GAAAR,QAAA;UAEhCL,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;YAAEE,KAAK,EAAE;UAAiB,CAAC,CAAC;QAAC;QAAA;UAAA,OAAAT,QAAA,CAAAU,IAAA;MAAA;IAAA,GAAAjB,OAAA;EAAA,CAEzD;EAAA,iBAAAkB,EAAA,EAAAC,GAAA;IAAA,OAAAvB,IAAA,CAAAwB,KAAA,OAAAC,SAAA;EAAA;AAAA,IAAC;;AAEF;AACA9B,WAAW,CAAC+B,IAAI,CAAC,yBAAyB;EAAA,IAAAC,KAAA,OAAA1B,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAyB,SAAOvB,GAAG,EAAEC,GAAG;IAAA,IAAAC,MAAA,EAAAsB,SAAA,EAAAC,UAAA,EAAAC,QAAA,EAAAC,OAAA,EAAAC,QAAA,EAAAC,MAAA,EAAAC,YAAA,EAAAC,WAAA,EAAAC,KAAA,EAAAC,WAAA,EAAAC,WAAA;IAAA,OAAArC,YAAA,YAAAO,IAAA,UAAA+B,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAA7B,IAAA,GAAA6B,SAAA,CAAA5B,IAAA;QAAA;UAC/CN,MAAM,GAAKF,GAAG,CAACS,MAAM,CAArBP,MAAM;UAAAsB,SAAA,GACmBxB,GAAG,CAACqC,IAAI,EAAjCZ,UAAU,GAAAD,SAAA,CAAVC,UAAU,EAAEC,QAAQ,GAAAF,SAAA,CAARE,QAAQ;UAAAU,SAAA,CAAA7B,IAAA;UAAA6B,SAAA,CAAA5B,IAAA;UAAA,OAIF,IAAAE,iBAAa,EAAC,qCAAqC,EAAE,CAACe,UAAU,CAAC,CAAC;QAAA;UAAlFE,OAAO,GAAAS,SAAA,CAAAzB,IAAA;UAAA,IACRgB,OAAO,CAAC,CAAC,CAAC;YAAAS,SAAA,CAAA5B,IAAA;YAAA;UAAA;UACXP,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,yBAAyB,CAAC;UAAC,OAAAuB,SAAA,CAAAE,MAAA;QAAA;UAAAF,SAAA,CAAA5B,IAAA;UAAA,OAK7B,IAAAE,iBAAa,EAAC,0DAA0D,EAAE,CAACe,UAAU,EAAEvB,MAAM,CAAC,CAAC;QAAA;UAAhH0B,QAAQ,GAAAQ,SAAA,CAAAzB,IAAA;UAAA,KACViB,QAAQ,CAAC,CAAC,CAAC;YAAAQ,SAAA,CAAA5B,IAAA;YAAA;UAAA;UACX;UACA;UACMwB,MAAK,GAAGO,UAAU,CAACZ,OAAO,CAAC,CAAC,CAAC,CAACK,KAAK,CAAC;UACpCC,YAAW,GAAGD,MAAK,GAAGN,QAAQ,EAEpC;UACMK,WAAW;UAAAK,SAAA,CAAA5B,IAAA;UAAA,OAKX,IAAAE,iBAAa,EAACqB,WAAW,EAAE,CAACL,QAAQ,EAAEM,MAAK,EAAEC,YAAW,EAAER,UAAU,CAAC,CAAC;QAAA;UAE5ExB,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;YAAE2B,OAAO,EAAE;UAAiC,CAAC,CAAC;UAAC,OAAAJ,SAAA,CAAAE,MAAA;QAAA;UAIxE;UACMN,KAAK,GAAGO,UAAU,CAACZ,OAAO,CAAC,CAAC,CAAC,CAACK,KAAK,CAAC;UACpCC,WAAW,GAAGD,KAAK,GAAGN,QAAQ,EAEpC;UACMQ,WAAW;UAAAE,SAAA,CAAA5B,IAAA;UAAA,OAIX,IAAAE,iBAAa,EAACwB,WAAW,EAAE,CAAChC,MAAM,EAAEuB,UAAU,EAAEC,QAAQ,EAAEM,KAAK,EAAEC,WAAW,CAAC,CAAC;QAAA;UAEpFhC,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;YAAE2B,OAAO,EAAE;UAAqC,CAAC,CAAC;UAACJ,SAAA,CAAA5B,IAAA;UAAA;QAAA;UAAA4B,SAAA,CAAA7B,IAAA;UAAA6B,SAAA,CAAAtB,EAAA,GAAAsB,SAAA;UAExEnC,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;YAAEE,KAAK,EAAE,iBAAiB,GAAAqB,SAAA,CAAAtB;UAAO,CAAC,CAAC;QAAC;QAAA;UAAA,OAAAsB,SAAA,CAAApB,IAAA;MAAA;IAAA,GAAAO,QAAA;EAAA,CAEhE;EAAA,iBAAAkB,GAAA,EAAAC,GAAA;IAAA,OAAApB,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,IAAC;;AAEF;AACA9B,WAAW,CAACqD,GAAG,CAAC,qCAAqC;EAAA,IAAAC,KAAA,OAAAhD,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAA+C,SAAO7C,GAAG,EAAEC,GAAG;IAAA,IAAA6C,WAAA,EAAA5C,MAAA,EAAA6C,UAAA,EAAArB,QAAA,EAAAE,QAAA,EAAAD,OAAA,EAAAK,KAAA,EAAAC,WAAA,EAAAF,WAAA;IAAA,OAAAlC,YAAA,YAAAO,IAAA,UAAA4C,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAA1C,IAAA,GAAA0C,SAAA,CAAAzC,IAAA;QAAA;UAAAsC,WAAA,GACnC9C,GAAG,CAACS,MAAM,EAAjCP,MAAM,GAAA4C,WAAA,CAAN5C,MAAM,EAAE6C,UAAU,GAAAD,WAAA,CAAVC,UAAU;UAClBrB,QAAQ,GAAK1B,GAAG,CAACqC,IAAI,CAArBX,QAAQ;UAAAuB,SAAA,CAAA1C,IAAA;UAAA0C,SAAA,CAAAzC,IAAA;UAAA,OAIW,IAAAE,iBAAa,EAAC,kDAAkD,EAAE,CAACqC,UAAU,EAAE7C,MAAM,CAAC,CAAC;QAAA;UAAxG0B,QAAQ,GAAAqB,SAAA,CAAAtC,IAAA;UAAA,IACTiB,QAAQ,CAAC,CAAC,CAAC;YAAAqB,SAAA,CAAAzC,IAAA;YAAA;UAAA;UACZP,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,2BAA2B,CAAC;UAAC,OAAAoC,SAAA,CAAAX,MAAA;QAAA;UAAAW,SAAA,CAAAzC,IAAA;UAAA,OAKhC,IAAAE,iBAAa,EAAC,qCAAqC,EAAE,CAACkB,QAAQ,CAAC,CAAC,CAAC,CAACH,UAAU,CAAC,CAAC;QAAA;UAA9FE,OAAO,GAAAsB,SAAA,CAAAtC,IAAA;UAAA,IACRgB,OAAO,CAAC,CAAC,CAAC;YAAAsB,SAAA,CAAAzC,IAAA;YAAA;UAAA;UACXP,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,yBAAyB,CAAC;UAAC,OAAAoC,SAAA,CAAAX,MAAA;QAAA;UAIpD;UACMN,KAAK,GAAGO,UAAU,CAACZ,OAAO,CAAC,CAAC,CAAC,CAACK,KAAK,CAAC;UACpCC,WAAW,GAAGD,KAAK,GAAGN,QAAQ,EAEpC;UACMK,WAAW;UAAAkB,SAAA,CAAAzC,IAAA;UAAA,OAKX,IAAAE,iBAAa,EAACqB,WAAW,EAAE,CAACL,QAAQ,EAAEM,KAAK,EAAEC,WAAW,EAAEc,UAAU,CAAC,CAAC;QAAA;UAE5E9C,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;YAAE2B,OAAO,EAAE;UAAiC,CAAC,CAAC;UAACS,SAAA,CAAAzC,IAAA;UAAA;QAAA;UAAAyC,SAAA,CAAA1C,IAAA;UAAA0C,SAAA,CAAAnC,EAAA,GAAAmC,SAAA;UAEpEhD,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;YAAEE,KAAK,EAAE;UAAiB,CAAC,CAAC;QAAC;QAAA;UAAA,OAAAkC,SAAA,CAAAjC,IAAA;MAAA;IAAA,GAAA6B,QAAA;EAAA,CAEzD;EAAA,iBAAAK,GAAA,EAAAC,GAAA;IAAA,OAAAP,KAAA,CAAAzB,KAAA,OAAAC,SAAA;EAAA;AAAA,IAAC;AAEF9B,WAAW,UAAO,CAAC,qCAAqC;EAAA,IAAA8D,KAAA,OAAAxD,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAE,SAAAuD,SAAOrD,GAAG,EAAEC,GAAG;IAAA,IAAAqD,YAAA,EAAApD,MAAA,EAAA6C,UAAA,EAAAnB,QAAA,EAAA2B,WAAA;IAAA,OAAA1D,YAAA,YAAAO,IAAA,UAAAoD,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAAlD,IAAA,GAAAkD,SAAA,CAAAjD,IAAA;QAAA;UAAA8C,YAAA,GACtCtD,GAAG,CAACS,MAAM,EAAjCP,MAAM,GAAAoD,YAAA,CAANpD,MAAM,EAAE6C,UAAU,GAAAO,YAAA,CAAVP,UAAU;UAAAU,SAAA,CAAAlD,IAAA;UAAAkD,SAAA,CAAAjD,IAAA;UAAA,OAIC,IAAAE,iBAAa,EAAC,kDAAkD,EAAE,CAACqC,UAAU,EAAE7C,MAAM,CAAC,CAAC;QAAA;UAAxG0B,QAAQ,GAAA6B,SAAA,CAAA9C,IAAA;UAAA,IACTiB,QAAQ,CAAC,CAAC,CAAC;YAAA6B,SAAA,CAAAjD,IAAA;YAAA;UAAA;UACZP,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;YAAE2B,OAAO,EAAE;UAA4B,CAAC,CAAC;UAAC,OAAAiB,SAAA,CAAAnB,MAAA;QAAA;UAInE;UACMiB,WAAW;UAAAE,SAAA,CAAAjD,IAAA;UAAA,OAIX,IAAAE,iBAAa,EAAC6C,WAAW,EAAE,CAACR,UAAU,EAAE7C,MAAM,CAAC,CAAC;QAAA;UAEtDD,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;YAAE2B,OAAO,EAAE;UAAyC,CAAC,CAAC;UAACiB,SAAA,CAAAjD,IAAA;UAAA;QAAA;UAAAiD,SAAA,CAAAlD,IAAA;UAAAkD,SAAA,CAAA3C,EAAA,GAAA2C,SAAA;UAE5ExD,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;YAAE2B,OAAO,EAAE;UAAiB,CAAC,CAAC;QAAC;QAAA;UAAA,OAAAiB,SAAA,CAAAzC,IAAA;MAAA;IAAA,GAAAqC,QAAA;EAAA,CAE3D;EAAA,iBAAAK,GAAA,EAAAC,GAAA;IAAA,OAAAP,KAAA,CAAAjC,KAAA,OAAAC,SAAA;EAAA;AAAA,IAAC"}},"mtime":1692968369828},"{\"assumptions\":{},\"sourceRoot\":\"/home/muteeb/Desktop/e-store-backend/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/muteeb/Desktop/e-store-backend\",\"filename\":\"/home/muteeb/Desktop/e-store-backend/src/routes/authentication.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/muteeb/Desktop/e-store-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.authenticationRouter = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _passportGoogleOauth = require(\"passport-google-oauth2\");\nvar _passportFacebook = require(\"passport-facebook\");\nvar _expressSession = _interopRequireDefault(require(\"express-session\"));\nvar _db = require(\"../db\");\nvar authenticationRouter = _express[\"default\"].Router();\n\n// Initialize expressSession before initializing passport\nexports.authenticationRouter = authenticationRouter;\nauthenticationRouter.use((0, _expressSession[\"default\"])({\n  secret: 'shoestoreapp',\n  resave: true,\n  saveUninitialized: true\n}));\n\n// Initialize Passport and expressSession\nauthenticationRouter.use(_passport[\"default\"].initialize());\nauthenticationRouter.use(_passport[\"default\"].session());\n\n// For Google\nvar GOOGLE_CLIENT_ID = '612009756713-fevv7ilgb1ltpvrc7cnsolno8bjadb3c.apps.googleusercontent.com';\nvar GOOGLE_CLIENT_SECRET = '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';\n_passport[\"default\"].use(new _passportGoogleOauth.Strategy({\n  clientID: GOOGLE_CLIENT_ID,\n  clientSecret: GOOGLE_CLIENT_SECRET,\n  callbackURL: '/google/callback'\n}, function (accessToken, refreshToken, profile, callback) {\n  callback(null, profile);\n}));\n\n// For Facebook\nvar FACEBOOK_CLIENT_ID = '676764303980550';\nvar FACEBOOK_CLIENT_SECRET = 'eea4293b945fb06207084ae63b231f06';\n_passport[\"default\"].use(new _passportFacebook.Strategy({\n  clientID: FACEBOOK_CLIENT_ID,\n  clientSecret: FACEBOOK_CLIENT_SECRET,\n  callbackURL: '/facebook/callback',\n  profileFields: ['emails', 'displayName', 'name', 'picture']\n}, function (accessToken, refreshToken, profile, callback) {\n  callback(null, profile);\n}));\n_passport[\"default\"].serializeUser(function (user, callback) {\n  callback(null, user);\n});\n_passport[\"default\"].deserializeUser(function (user, callback) {\n  callback(null, user);\n});\n\n// API route for user login\nauthenticationRouter.post('/api/login', /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n    var _req$body, email, password, user;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _req$body = req.body, email = _req$body.email, password = _req$body.password;\n          _context.prev = 1;\n          _context.next = 4;\n          return (0, _db.queryDatabase)('SELECT * FROM users WHERE email = ? AND password = ?', [email, password]);\n        case 4:\n          user = _context.sent;\n          if (user[0]) {\n            _context.next = 8;\n            break;\n          }\n          res.status(401).json({\n            message: 'Invalid email or password'\n          });\n          return _context.abrupt(\"return\");\n        case 8:\n          res.status(200).json({\n            message: 'Login successful',\n            user: user[0]\n          });\n          _context.next = 14;\n          break;\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](1);\n          res.status(500).json({\n            message: 'Database error'\n          });\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 11]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// API route for user registration\nauthenticationRouter.post('/api/register', /*#__PURE__*/function () {\n  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res) {\n    var _req$body2, email, password, username, phoneNo, usernameExists, emailExists, phoneNoExists, insertQuery;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _req$body2 = req.body, email = _req$body2.email, password = _req$body2.password, username = _req$body2.username, phoneNo = _req$body2.phoneNo;\n          _context2.prev = 1;\n          _context2.next = 4;\n          return (0, _db.queryDatabase)('SELECT * FROM users WHERE username = ?', [username]);\n        case 4:\n          usernameExists = _context2.sent;\n          if (!usernameExists[0]) {\n            _context2.next = 8;\n            break;\n          }\n          res.status(400).json({\n            message: 'Username already exists'\n          });\n          return _context2.abrupt(\"return\");\n        case 8:\n          _context2.next = 10;\n          return (0, _db.queryDatabase)('SELECT * FROM users WHERE email = ?', [email]);\n        case 10:\n          emailExists = _context2.sent;\n          if (!emailExists[0]) {\n            _context2.next = 14;\n            break;\n          }\n          res.status(400).json({\n            message: 'Email already exists'\n          });\n          return _context2.abrupt(\"return\");\n        case 14:\n          _context2.next = 16;\n          return (0, _db.queryDatabase)('SELECT * FROM users WHERE phoneNo = ?', [phoneNo]);\n        case 16:\n          phoneNoExists = _context2.sent;\n          if (!phoneNoExists[0]) {\n            _context2.next = 20;\n            break;\n          }\n          res.status(400).json({\n            message: 'Phone number already exists'\n          });\n          return _context2.abrupt(\"return\");\n        case 20:\n          insertQuery = \"\\n            INSERT INTO users (username, email, phoneNo, password)\\n            VALUES (?, ?, ?, ?)\\n        \";\n          _context2.next = 23;\n          return (0, _db.queryDatabase)(insertQuery, [username, email, phoneNo, password]);\n        case 23:\n          res.status(201).json({\n            message: 'User registered successfully'\n          });\n          _context2.next = 29;\n          break;\n        case 26:\n          _context2.prev = 26;\n          _context2.t0 = _context2[\"catch\"](1);\n          res.status(500).json({\n            message: 'Database error'\n          });\n        case 29:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[1, 26]]);\n  }));\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nauthenticationRouter.get('/login/google', _passport[\"default\"].authenticate('google', {\n  scope: ['profile', 'email']\n}));\nauthenticationRouter.get('/login/facebook', _passport[\"default\"].authenticate('facebook', {\n  scope: ['email']\n}));\nauthenticationRouter.get('/google/callback', _passport[\"default\"].authenticate('google'), function (req, res) {\n  res.redirect('http://localhost:8080/');\n});\nauthenticationRouter.get('/facebook/callback', _passport[\"default\"].authenticate('facebook'), function (req, res) {\n  res.redirect('http://localhost:8080/');\n});\nauthenticationRouter.get('/logout', function (req, res) {\n  req.logout();\n  res.redirect('/notlogged');\n});\nauthenticationRouter.get('/notlogged', function (req, res) {\n  res.send(req.user ? req.user : 'Not logged in. Login with Google or Facebook.');\n});\nvar _default = authenticationRouter;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3Bhc3Nwb3J0IiwiX3Bhc3Nwb3J0R29vZ2xlT2F1dGgiLCJfcGFzc3BvcnRGYWNlYm9vayIsIl9leHByZXNzU2Vzc2lvbiIsIl9kYiIsImF1dGhlbnRpY2F0aW9uUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImV4cG9ydHMiLCJ1c2UiLCJleHByZXNzU2Vzc2lvbiIsInNlY3JldCIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwicGFzc3BvcnQiLCJpbml0aWFsaXplIiwic2Vzc2lvbiIsIkdPT0dMRV9DTElFTlRfSUQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsIkdvb2dsZVN0cmF0ZWd5IiwiY2xpZW50SUQiLCJjbGllbnRTZWNyZXQiLCJjYWxsYmFja1VSTCIsImFjY2Vzc1Rva2VuIiwicmVmcmVzaFRva2VuIiwicHJvZmlsZSIsImNhbGxiYWNrIiwiRkFDRUJPT0tfQ0xJRU5UX0lEIiwiRkFDRUJPT0tfQ0xJRU5UX1NFQ1JFVCIsIkZhY2Vib29rU3RyYXRlZ3kiLCJwcm9maWxlRmllbGRzIiwic2VyaWFsaXplVXNlciIsInVzZXIiLCJkZXNlcmlhbGl6ZVVzZXIiLCJwb3N0IiwiX3JlZiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWdlbmVyYXRvciIsIm1hcmsiLCJfY2FsbGVlIiwicmVxIiwicmVzIiwiX3JlcSRib2R5IiwiZW1haWwiLCJwYXNzd29yZCIsIndyYXAiLCJfY2FsbGVlJCIsIl9jb250ZXh0IiwicHJldiIsIm5leHQiLCJib2R5IiwicXVlcnlEYXRhYmFzZSIsInNlbnQiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImFicnVwdCIsInQwIiwic3RvcCIsIl94IiwiX3gyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfcmVmMiIsIl9jYWxsZWUyIiwiX3JlcSRib2R5MiIsInVzZXJuYW1lIiwicGhvbmVObyIsInVzZXJuYW1lRXhpc3RzIiwiZW1haWxFeGlzdHMiLCJwaG9uZU5vRXhpc3RzIiwiaW5zZXJ0UXVlcnkiLCJfY2FsbGVlMiQiLCJfY29udGV4dDIiLCJfeDMiLCJfeDQiLCJnZXQiLCJhdXRoZW50aWNhdGUiLCJzY29wZSIsInJlZGlyZWN0IiwibG9nb3V0Iiwic2VuZCIsIl9kZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9tdXRlZWIvRGVza3RvcC9lLXN0b3JlLWJhY2tlbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0JztcbmltcG9ydCB7IFN0cmF0ZWd5IGFzIEdvb2dsZVN0cmF0ZWd5IH0gZnJvbSAncGFzc3BvcnQtZ29vZ2xlLW9hdXRoMic7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBGYWNlYm9va1N0cmF0ZWd5IH0gZnJvbSAncGFzc3BvcnQtZmFjZWJvb2snO1xuaW1wb3J0IGV4cHJlc3NTZXNzaW9uIGZyb20gJ2V4cHJlc3Mtc2Vzc2lvbic7XG5pbXBvcnQgeyBxdWVyeURhdGFiYXNlIH0gZnJvbSBcIi4uL2RiXCI7XG5cbmV4cG9ydCBjb25zdCBhdXRoZW50aWNhdGlvblJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8vIEluaXRpYWxpemUgZXhwcmVzc1Nlc3Npb24gYmVmb3JlIGluaXRpYWxpemluZyBwYXNzcG9ydFxuYXV0aGVudGljYXRpb25Sb3V0ZXIudXNlKGV4cHJlc3NTZXNzaW9uKHtcbiAgICBzZWNyZXQ6ICdzaG9lc3RvcmVhcHAnLFxuICAgIHJlc2F2ZTogdHJ1ZSxcbiAgICBzYXZlVW5pbml0aWFsaXplZDogdHJ1ZVxufSkpO1xuXG4vLyBJbml0aWFsaXplIFBhc3Nwb3J0IGFuZCBleHByZXNzU2Vzc2lvblxuYXV0aGVudGljYXRpb25Sb3V0ZXIudXNlKHBhc3Nwb3J0LmluaXRpYWxpemUoKSk7XG5hdXRoZW50aWNhdGlvblJvdXRlci51c2UocGFzc3BvcnQuc2Vzc2lvbigpKTtcblxuLy8gRm9yIEdvb2dsZVxuY29uc3QgR09PR0xFX0NMSUVOVF9JRCA9ICc2MTIwMDk3NTY3MTMtZmV2djdpbGdiMWx0cHZyYzdjbnNvbG5vOGJqYWRiM2MuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20nO1xuY29uc3QgR09PR0xFX0NMSUVOVF9TRUNSRVQgPSAnR09DU1BYLXVXUzZ3MXp5czdvd0hiWm5LWXdwVVowWXA0SlcnO1xuXG5wYXNzcG9ydC51c2UobmV3IEdvb2dsZVN0cmF0ZWd5KHtcbiAgICBjbGllbnRJRDogR09PR0xFX0NMSUVOVF9JRCxcbiAgICBjbGllbnRTZWNyZXQ6IEdPT0dMRV9DTElFTlRfU0VDUkVULFxuICAgIGNhbGxiYWNrVVJMOiAnL2dvb2dsZS9jYWxsYmFjaydcbn0sIChhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBwcm9maWxlLCBjYWxsYmFjaykgPT4ge1xuICAgIGNhbGxiYWNrKG51bGwsIHByb2ZpbGUpO1xufSkpO1xuXG4vLyBGb3IgRmFjZWJvb2tcbmNvbnN0IEZBQ0VCT09LX0NMSUVOVF9JRCA9ICc2NzY3NjQzMDM5ODA1NTAnO1xuY29uc3QgRkFDRUJPT0tfQ0xJRU5UX1NFQ1JFVCA9ICdlZWE0MjkzYjk0NWZiMDYyMDcwODRhZTYzYjIzMWYwNic7XG5cbnBhc3Nwb3J0LnVzZShuZXcgRmFjZWJvb2tTdHJhdGVneSh7XG4gICAgY2xpZW50SUQ6IEZBQ0VCT09LX0NMSUVOVF9JRCxcbiAgICBjbGllbnRTZWNyZXQ6IEZBQ0VCT09LX0NMSUVOVF9TRUNSRVQsXG4gICAgY2FsbGJhY2tVUkw6ICcvZmFjZWJvb2svY2FsbGJhY2snLFxuICAgIHByb2ZpbGVGaWVsZHM6IFsnZW1haWxzJywgJ2Rpc3BsYXlOYW1lJywgJ25hbWUnLCAncGljdHVyZSddXG59LCAoYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgcHJvZmlsZSwgY2FsbGJhY2spID0+IHtcbiAgICBjYWxsYmFjayhudWxsLCBwcm9maWxlKTtcbn0pKTtcblxucGFzc3BvcnQuc2VyaWFsaXplVXNlcigodXNlciwgY2FsbGJhY2spID0+IHtcbiAgICBjYWxsYmFjayhudWxsLCB1c2VyKTtcbn0pO1xuXG5wYXNzcG9ydC5kZXNlcmlhbGl6ZVVzZXIoKHVzZXIsIGNhbGxiYWNrKSA9PiB7XG4gICAgY2FsbGJhY2sobnVsbCwgdXNlcik7XG59KTtcblxuLy8gQVBJIHJvdXRlIGZvciB1c2VyIGxvZ2luXG5hdXRoZW50aWNhdGlvblJvdXRlci5wb3N0KCcvYXBpL2xvZ2luJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgZW1haWwgPSA/IEFORCBwYXNzd29yZCA9ID8nLCBbZW1haWwsIHBhc3N3b3JkXSk7XG4gICAgICAgIGlmICghdXNlclswXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnTG9naW4gc3VjY2Vzc2Z1bCcsIHVzZXI6IHVzZXJbMF0gfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0RhdGFiYXNlIGVycm9yJyB9KTtcbiAgICB9XG59KTtcblxuLy8gQVBJIHJvdXRlIGZvciB1c2VyIHJlZ2lzdHJhdGlvblxuYXV0aGVudGljYXRpb25Sb3V0ZXIucG9zdCgnL2FwaS9yZWdpc3RlcicsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCB1c2VybmFtZSwgcGhvbmVObyB9ID0gcmVxLmJvZHk7XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VybmFtZUV4aXN0cyA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/JywgW3VzZXJuYW1lXSk7XG4gICAgICAgIGlmICh1c2VybmFtZUV4aXN0c1swXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlcm5hbWUgYWxyZWFkeSBleGlzdHMnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW1haWxFeGlzdHMgPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gPycsIFtlbWFpbF0pO1xuICAgICAgICBpZiAoZW1haWxFeGlzdHNbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0VtYWlsIGFscmVhZHkgZXhpc3RzJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBob25lTm9FeGlzdHMgPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIHBob25lTm8gPSA/JywgW3Bob25lTm9dKTtcbiAgICAgICAgaWYgKHBob25lTm9FeGlzdHNbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bob25lIG51bWJlciBhbHJlYWR5IGV4aXN0cycgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbnNlcnRRdWVyeSA9IGBcbiAgICAgICAgICAgIElOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgZW1haWwsIHBob25lTm8sIHBhc3N3b3JkKVxuICAgICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/KVxuICAgICAgICBgO1xuICAgICAgICBhd2FpdCBxdWVyeURhdGFiYXNlKGluc2VydFF1ZXJ5LCBbdXNlcm5hbWUsIGVtYWlsLCBwaG9uZU5vLCBwYXNzd29yZF0pO1xuXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdEYXRhYmFzZSBlcnJvcicgfSk7XG4gICAgfVxufSk7XG5cbmF1dGhlbnRpY2F0aW9uUm91dGVyLmdldCgnL2xvZ2luL2dvb2dsZScsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnZ29vZ2xlJywgeyBzY29wZTogWydwcm9maWxlJywgJ2VtYWlsJ10gfSkpO1xuYXV0aGVudGljYXRpb25Sb3V0ZXIuZ2V0KCcvbG9naW4vZmFjZWJvb2snLCBwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2ZhY2Vib29rJywgeyBzY29wZTogWydlbWFpbCddIH0pKTtcblxuYXV0aGVudGljYXRpb25Sb3V0ZXIuZ2V0KCcvZ29vZ2xlL2NhbGxiYWNrJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdnb29nbGUnKSwgKHJlcSwgcmVzKSA9PiB7XG4gICAgcmVzLnJlZGlyZWN0KCdodHRwOi8vbG9jYWxob3N0OjgwODAvJyk7XG59KTtcblxuYXV0aGVudGljYXRpb25Sb3V0ZXIuZ2V0KCcvZmFjZWJvb2svY2FsbGJhY2snLCBwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2ZhY2Vib29rJyksIChyZXEsIHJlcykgPT4ge1xuICAgIHJlcy5yZWRpcmVjdCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwLycpO1xufSk7XG5cbmF1dGhlbnRpY2F0aW9uUm91dGVyLmdldCgnL2xvZ291dCcsIChyZXEsIHJlcykgPT4ge1xuICAgIHJlcS5sb2dvdXQoKTtcbiAgICByZXMucmVkaXJlY3QoJy9ub3Rsb2dnZWQnKTtcbn0pO1xuXG5hdXRoZW50aWNhdGlvblJvdXRlci5nZXQoJy9ub3Rsb2dnZWQnLCAocmVxLCByZXMpID0+IHtcbiAgICByZXMuc2VuZChyZXEudXNlciA/IHJlcS51c2VyIDogJ05vdCBsb2dnZWQgaW4uIExvZ2luIHdpdGggR29vZ2xlIG9yIEZhY2Vib29rLicpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGF1dGhlbnRpY2F0aW9uUm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxvQkFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsaUJBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLGVBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLEdBQUEsR0FBQUwsT0FBQTtBQUVPLElBQU1NLG9CQUFvQixHQUFHQyxtQkFBTyxDQUFDQyxNQUFNLENBQUMsQ0FBQzs7QUFFcEQ7QUFBQUMsT0FBQSxDQUFBSCxvQkFBQSxHQUFBQSxvQkFBQTtBQUNBQSxvQkFBb0IsQ0FBQ0ksR0FBRyxDQUFDLElBQUFDLDBCQUFjLEVBQUM7RUFDcENDLE1BQU0sRUFBRSxjQUFjO0VBQ3RCQyxNQUFNLEVBQUUsSUFBSTtFQUNaQyxpQkFBaUIsRUFBRTtBQUN2QixDQUFDLENBQUMsQ0FBQzs7QUFFSDtBQUNBUixvQkFBb0IsQ0FBQ0ksR0FBRyxDQUFDSyxvQkFBUSxDQUFDQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQy9DVixvQkFBb0IsQ0FBQ0ksR0FBRyxDQUFDSyxvQkFBUSxDQUFDRSxPQUFPLENBQUMsQ0FBQyxDQUFDOztBQUU1QztBQUNBLElBQU1DLGdCQUFnQixHQUFHLDBFQUEwRTtBQUNuRyxJQUFNQyxvQkFBb0IsR0FBRyxxQ0FBcUM7QUFFbEVKLG9CQUFRLENBQUNMLEdBQUcsQ0FBQyxJQUFJVSw2QkFBYyxDQUFDO0VBQzVCQyxRQUFRLEVBQUVILGdCQUFnQjtFQUMxQkks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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_passport","_passportGoogleOauth","_passportFacebook","_expressSession","_db","authenticationRouter","express","Router","exports","use","expressSession","secret","resave","saveUninitialized","passport","initialize","session","GOOGLE_CLIENT_ID","GOOGLE_CLIENT_SECRET","GoogleStrategy","clientID","clientSecret","callbackURL","accessToken","refreshToken","profile","callback","FACEBOOK_CLIENT_ID","FACEBOOK_CLIENT_SECRET","FacebookStrategy","profileFields","serializeUser","user","deserializeUser","post","_ref","_asyncToGenerator2","_regenerator","mark","_callee","req","res","_req$body","email","password","wrap","_callee$","_context","prev","next","body","queryDatabase","sent","status","json","message","abrupt","t0","stop","_x","_x2","apply","arguments","_ref2","_callee2","_req$body2","username","phoneNo","usernameExists","emailExists","phoneNoExists","insertQuery","_callee2$","_context2","_x3","_x4","get","authenticate","scope","redirect","logout","send","_default"],"sourceRoot":"/home/muteeb/Desktop/e-store-backend/src/routes/","sources":["authentication.js"],"sourcesContent":["import express from 'express';\nimport passport from 'passport';\nimport { Strategy as GoogleStrategy } from 'passport-google-oauth2';\nimport { Strategy as FacebookStrategy } from 'passport-facebook';\nimport expressSession from 'express-session';\nimport { queryDatabase } from \"../db\";\n\nexport const authenticationRouter = express.Router();\n\n// Initialize expressSession before initializing passport\nauthenticationRouter.use(expressSession({\n    secret: 'shoestoreapp',\n    resave: true,\n    saveUninitialized: true\n}));\n\n// Initialize Passport and expressSession\nauthenticationRouter.use(passport.initialize());\nauthenticationRouter.use(passport.session());\n\n// For Google\nconst GOOGLE_CLIENT_ID = '612009756713-fevv7ilgb1ltpvrc7cnsolno8bjadb3c.apps.googleusercontent.com';\nconst GOOGLE_CLIENT_SECRET = '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';\n\npassport.use(new GoogleStrategy({\n    clientID: GOOGLE_CLIENT_ID,\n    clientSecret: GOOGLE_CLIENT_SECRET,\n    callbackURL: '/google/callback'\n}, (accessToken, refreshToken, profile, callback) => {\n    callback(null, profile);\n}));\n\n// For Facebook\nconst FACEBOOK_CLIENT_ID = '676764303980550';\nconst FACEBOOK_CLIENT_SECRET = 'eea4293b945fb06207084ae63b231f06';\n\npassport.use(new FacebookStrategy({\n    clientID: FACEBOOK_CLIENT_ID,\n    clientSecret: FACEBOOK_CLIENT_SECRET,\n    callbackURL: '/facebook/callback',\n    profileFields: ['emails', 'displayName', 'name', 'picture']\n}, (accessToken, refreshToken, profile, callback) => {\n    callback(null, profile);\n}));\n\npassport.serializeUser((user, callback) => {\n    callback(null, user);\n});\n\npassport.deserializeUser((user, callback) => {\n    callback(null, user);\n});\n\n// API route for user login\nauthenticationRouter.post('/api/login', async (req, res) => {\n    const { email, password } = req.body;\n\n    try {\n        const user = await queryDatabase('SELECT * FROM users WHERE email = ? AND password = ?', [email, password]);\n        if (!user[0]) {\n            res.status(401).json({ message: 'Invalid email or password' });\n            return;\n        }\n        res.status(200).json({ message: 'Login successful', user: user[0] });\n    } catch (err) {\n        res.status(500).json({ message: 'Database error' });\n    }\n});\n\n// API route for user registration\nauthenticationRouter.post('/api/register', async (req, res) => {\n    const { email, password, username, phoneNo } = req.body;\n\n    try {\n        const usernameExists = await queryDatabase('SELECT * FROM users WHERE username = ?', [username]);\n        if (usernameExists[0]) {\n            res.status(400).json({ message: 'Username already exists' });\n            return;\n        }\n\n        const emailExists = await queryDatabase('SELECT * FROM users WHERE email = ?', [email]);\n        if (emailExists[0]) {\n            res.status(400).json({ message: 'Email already exists' });\n            return;\n        }\n\n        const phoneNoExists = await queryDatabase('SELECT * FROM users WHERE phoneNo = ?', [phoneNo]);\n        if (phoneNoExists[0]) {\n            res.status(400).json({ message: 'Phone number already exists' });\n            return;\n        }\n\n        const insertQuery = `\n            INSERT INTO users (username, email, phoneNo, password)\n            VALUES (?, ?, ?, ?)\n        `;\n        await queryDatabase(insertQuery, [username, email, phoneNo, password]);\n\n        res.status(201).json({ message: 'User registered successfully' });\n    } catch (err) {\n        res.status(500).json({ message: 'Database error' });\n    }\n});\n\nauthenticationRouter.get('/login/google', passport.authenticate('google', { scope: ['profile', 'email'] }));\nauthenticationRouter.get('/login/facebook', passport.authenticate('facebook', { scope: ['email'] }));\n\nauthenticationRouter.get('/google/callback', passport.authenticate('google'), (req, res) => {\n    res.redirect('http://localhost:8080/');\n});\n\nauthenticationRouter.get('/facebook/callback', passport.authenticate('facebook'), (req, res) => {\n    res.redirect('http://localhost:8080/');\n});\n\nauthenticationRouter.get('/logout', (req, res) => {\n    req.logout();\n    res.redirect('/notlogged');\n});\n\nauthenticationRouter.get('/notlogged', (req, res) => {\n    res.send(req.user ? req.user : 'Not logged in. Login with Google or Facebook.');\n});\n\nexport default authenticationRouter;\n"],"mappings":"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"}},"mtime":1692969987715},"{\"assumptions\":{},\"sourceRoot\":\"/home/muteeb/Desktop/e-store-backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/muteeb/Desktop/e-store-backend\",\"filename\":\"/home/muteeb/Desktop/e-store-backend/src/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/muteeb/Desktop/e-store-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.db = void 0;\nexports.queryDatabase = queryDatabase;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _sqlite = _interopRequireDefault(require(\"sqlite3\"));\nvar _types = require(\"mysql/lib/protocol/constants/types\");\nvar db = new _sqlite[\"default\"].Database('./mock.db', _sqlite[\"default\"].OPEN_READWRITE | _sqlite[\"default\"].OPEN_CREATE, function (err) {\n  if (err) {\n    console.error(err.message);\n  } else {\n    console.log('Connected to the database');\n\n    // Create tables and perform other initializations here\n    // (Code for creating products, users, and carts tables)\n    db.run(\"\\n            CREATE TABLE IF NOT EXISTS products (\\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                name TEXT,\\n                price DOUBLE,\\n                description TEXT,\\n                imageUrl TEXT,\\n                averageRating TEXT\\n            )\\n        \", function (createErr) {\n      if (createErr) {\n        console.error('Error creating products table:', createErr.message);\n      } else {\n        console.log('Products table created successfully');\n      }\n    });\n\n    // Create the users table if it doesn't exist\n    db.run(\"\\n            CREATE TABLE IF NOT EXISTS users (\\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                username TEXT NOT NULL UNIQUE,\\n                email TEXT NOT NULL UNIQUE,\\n                phoneNo TEXT NOT NULL UNIQUE,\\n                password TEXT NOT NULL\\n            )\\n        \", function (createErr) {\n      if (createErr) {\n        console.error('Error creating users table:', createErr.message);\n      } else {\n        console.log('Users table created successfully');\n      }\n    });\n    db.run(\"\\n            CREATE TABLE IF NOT EXISTS carts (\\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                user_id INTEGER, \\n                cart_item_id INTEGER,\\n                product_id INTEGER,\\n                quantity INTEGER,\\n                price DECIMAL(10, 2),\\n                total_price DECIMAL(10, 2),\\n                FOREIGN KEY (user_id) REFERENCES users(id),\\n                FOREIGN KEY (product_id) REFERENCES products(id)\\n            )\\n        \", function (createErr) {\n      if (createErr) {\n        console.error('Error creating carts table:', createErr.message);\n      } else {\n        console.log('Carts table created successfully');\n      }\n    });\n    db.run(\"\\n            CREATE TABLE IF NOT EXISTS carts (\\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                user_id INTEGER, \\n                cart_item_id INTEGER,\\n                product_id INTEGER,\\n                quantity INTEGER,\\n                price DECIMAL(10, 2),\\n                total_price DECIMAL(10, 2),\\n                FOREIGN KEY (user_id) REFERENCES users(id),\\n                FOREIGN KEY (product_id) REFERENCES products(id)\\n            )\\n        \", function (createErr) {\n      if (createErr) {\n        console.error('Error creating carts table:', createErr.message);\n      } else {\n        console.log('Carts table created successfully');\n      }\n    });\n  }\n});\n\n// Function to query the database\nexports.db = db;\nfunction queryDatabase(_x, _x2) {\n  return _queryDatabase.apply(this, arguments);\n} // Export the initialized database and query function\nfunction _queryDatabase() {\n  _queryDatabase = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(query, params) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n            var db = new _sqlite[\"default\"].Database('./mock.db');\n            db.all(query, params, function (err, rows) {\n              if (err) {\n                reject(err);\n              } else {\n                resolve(rows);\n              }\n              db.close();\n            });\n          }));\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _queryDatabase.apply(this, arguments);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3FsaXRlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdHlwZXMiLCJkYiIsInNxbGl0ZTMiLCJEYXRhYmFzZSIsIk9QRU5fUkVBRFdSSVRFIiwiT1BFTl9DUkVBVEUiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJtZXNzYWdlIiwibG9nIiwicnVuIiwiY3JlYXRlRXJyIiwiZXhwb3J0cyIsInF1ZXJ5RGF0YWJhc2UiLCJfeCIsIl94MiIsIl9xdWVyeURhdGFiYXNlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVnZW5lcmF0b3IiLCJtYXJrIiwiX2NhbGxlZSIsInF1ZXJ5IiwicGFyYW1zIiwid3JhcCIsIl9jYWxsZWUkIiwiX2NvbnRleHQiLCJwcmV2IiwibmV4dCIsImFicnVwdCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiYWxsIiwicm93cyIsImNsb3NlIiwic3RvcCJdLCJzb3VyY2VSb290IjoiL2hvbWUvbXV0ZWViL0Rlc2t0b3AvZS1zdG9yZS1iYWNrZW5kL3NyYy8iLCJzb3VyY2VzIjpbImRiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzcWxpdGUzIGZyb20gJ3NxbGl0ZTMnO1xuaW1wb3J0IHtET1VCTEV9IGZyb20gXCJteXNxbC9saWIvcHJvdG9jb2wvY29uc3RhbnRzL3R5cGVzXCI7XG5cbmNvbnN0IGRiID0gbmV3IHNxbGl0ZTMuRGF0YWJhc2UoJy4vbW9jay5kYicsIHNxbGl0ZTMuT1BFTl9SRUFEV1JJVEUgfCBzcWxpdGUzLk9QRU5fQ1JFQVRFLCAoZXJyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIHRoZSBkYXRhYmFzZScpO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0YWJsZXMgYW5kIHBlcmZvcm0gb3RoZXIgaW5pdGlhbGl6YXRpb25zIGhlcmVcbiAgICAgICAgLy8gKENvZGUgZm9yIGNyZWF0aW5nIHByb2R1Y3RzLCB1c2VycywgYW5kIGNhcnRzIHRhYmxlcylcbiAgICAgICAgZGIucnVuKGBcbiAgICAgICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHByb2R1Y3RzIChcbiAgICAgICAgICAgICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICAgICAgICAgICAgbmFtZSBURVhULFxuICAgICAgICAgICAgICAgIHByaWNlIERPVUJMRSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgICAgICAgICAgICAgIGltYWdlVXJsIFRFWFQsXG4gICAgICAgICAgICAgICAgYXZlcmFnZVJhdGluZyBURVhUXG4gICAgICAgICAgICApXG4gICAgICAgIGAsIChjcmVhdGVFcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChjcmVhdGVFcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBwcm9kdWN0cyB0YWJsZTonLCBjcmVhdGVFcnIubWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQcm9kdWN0cyB0YWJsZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgdGhlIHVzZXJzIHRhYmxlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgZGIucnVuKGBcbiAgICAgICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVzZXJzIChcbiAgICAgICAgICAgICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICAgICAgICAgICAgdXNlcm5hbWUgVEVYVCBOT1QgTlVMTCBVTklRVUUsXG4gICAgICAgICAgICAgICAgZW1haWwgVEVYVCBOT1QgTlVMTCBVTklRVUUsXG4gICAgICAgICAgICAgICAgcGhvbmVObyBURVhUIE5PVCBOVUxMIFVOSVFVRSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZCBURVhUIE5PVCBOVUxMXG4gICAgICAgICAgICApXG4gICAgICAgIGAsIChjcmVhdGVFcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChjcmVhdGVFcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyB1c2VycyB0YWJsZTonLCBjcmVhdGVFcnIubWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VycyB0YWJsZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBkYi5ydW4oYFxuICAgICAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgY2FydHMgKFxuICAgICAgICAgICAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkIElOVEVHRVIsIFxuICAgICAgICAgICAgICAgIGNhcnRfaXRlbV9pZCBJTlRFR0VSLFxuICAgICAgICAgICAgICAgIHByb2R1Y3RfaWQgSU5URUdFUixcbiAgICAgICAgICAgICAgICBxdWFudGl0eSBJTlRFR0VSLFxuICAgICAgICAgICAgICAgIHByaWNlIERFQ0lNQUwoMTAsIDIpLFxuICAgICAgICAgICAgICAgIHRvdGFsX3ByaWNlIERFQ0lNQUwoMTAsIDIpLFxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIHVzZXJzKGlkKSxcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAocHJvZHVjdF9pZCkgUkVGRVJFTkNFUyBwcm9kdWN0cyhpZClcbiAgICAgICAgICAgIClcbiAgICAgICAgYCwgKGNyZWF0ZUVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGNyZWF0ZUVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhcnRzIHRhYmxlOicsIGNyZWF0ZUVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NhcnRzIHRhYmxlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkYi5ydW4oYFxuICAgICAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgY2FydHMgKFxuICAgICAgICAgICAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkIElOVEVHRVIsIFxuICAgICAgICAgICAgICAgIGNhcnRfaXRlbV9pZCBJTlRFR0VSLFxuICAgICAgICAgICAgICAgIHByb2R1Y3RfaWQgSU5URUdFUixcbiAgICAgICAgICAgICAgICBxdWFudGl0eSBJTlRFR0VSLFxuICAgICAgICAgICAgICAgIHByaWNlIERFQ0lNQUwoMTAsIDIpLFxuICAgICAgICAgICAgICAgIHRvdGFsX3ByaWNlIERFQ0lNQUwoMTAsIDIpLFxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIHVzZXJzKGlkKSxcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAocHJvZHVjdF9pZCkgUkVGRVJFTkNFUyBwcm9kdWN0cyhpZClcbiAgICAgICAgICAgIClcbiAgICAgICAgYCwgKGNyZWF0ZUVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGNyZWF0ZUVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhcnRzIHRhYmxlOicsIGNyZWF0ZUVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NhcnRzIHRhYmxlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5cblxuXG5cblxuLy8gRnVuY3Rpb24gdG8gcXVlcnkgdGhlIGRhdGFiYXNlXG5hc3luYyBmdW5jdGlvbiBxdWVyeURhdGFiYXNlKHF1ZXJ5LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKCcuL21vY2suZGInKTtcbiAgICAgICAgZGIuYWxsKHF1ZXJ5LCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyb3dzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8gRXhwb3J0IHRoZSBpbml0aWFsaXplZCBkYXRhYmFzZSBhbmQgcXVlcnkgZnVuY3Rpb25cbmV4cG9ydCB7IGRiLCBxdWVyeURhdGFiYXNlIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFELE9BQUE7QUFFQSxJQUFNRSxFQUFFLEdBQUcsSUFBSUMsa0JBQU8sQ0FBQ0MsUUFBUSxDQUFDLFdBQVcsRUFBRUQsa0JBQU8sQ0FBQ0UsY0FBYyxHQUFHRixrQkFBTyxDQUFDRyxXQUFXLEVBQUUsVUFBQ0MsR0FBRyxFQUFLO0VBQ2hHLElBQUlBLEdBQUcsRUFBRTtJQUNMQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0YsR0FBRyxDQUFDRyxPQUFPLENBQUM7RUFDOUIsQ0FBQyxNQUFN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","map":{"version":3,"names":["_sqlite","_interopRequireDefault","require","_types","db","sqlite3","Database","OPEN_READWRITE","OPEN_CREATE","err","console","error","message","log","run","createErr","exports","queryDatabase","_x","_x2","_queryDatabase","apply","arguments","_asyncToGenerator2","_regenerator","mark","_callee","query","params","wrap","_callee$","_context","prev","next","abrupt","Promise","resolve","reject","all","rows","close","stop"],"sourceRoot":"/home/muteeb/Desktop/e-store-backend/src/","sources":["db.js"],"sourcesContent":["import sqlite3 from 'sqlite3';\nimport {DOUBLE} from \"mysql/lib/protocol/constants/types\";\n\nconst db = new sqlite3.Database('./mock.db', sqlite3.OPEN_READWRITE | sqlite3.OPEN_CREATE, (err) => {\n    if (err) {\n        console.error(err.message);\n    } else {\n        console.log('Connected to the database');\n\n        // Create tables and perform other initializations here\n        // (Code for creating products, users, and carts tables)\n        db.run(`\n            CREATE TABLE IF NOT EXISTS products (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                name TEXT,\n                price DOUBLE,\n                description TEXT,\n                imageUrl TEXT,\n                averageRating TEXT\n            )\n        `, (createErr) => {\n            if (createErr) {\n                console.error('Error creating products table:', createErr.message);\n            } else {\n                console.log('Products table created successfully');\n            }\n        });\n\n        // Create the users table if it doesn't exist\n        db.run(`\n            CREATE TABLE IF NOT EXISTS users (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                username TEXT NOT NULL UNIQUE,\n                email TEXT NOT NULL UNIQUE,\n                phoneNo TEXT NOT NULL UNIQUE,\n                password TEXT NOT NULL\n            )\n        `, (createErr) => {\n            if (createErr) {\n                console.error('Error creating users table:', createErr.message);\n            } else {\n                console.log('Users table created successfully');\n            }\n        });\n\n        db.run(`\n            CREATE TABLE IF NOT EXISTS carts (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER, \n                cart_item_id INTEGER,\n                product_id INTEGER,\n                quantity INTEGER,\n                price DECIMAL(10, 2),\n                total_price DECIMAL(10, 2),\n                FOREIGN KEY (user_id) REFERENCES users(id),\n                FOREIGN KEY (product_id) REFERENCES products(id)\n            )\n        `, (createErr) => {\n            if (createErr) {\n                console.error('Error creating carts table:', createErr.message);\n            } else {\n                console.log('Carts table created successfully');\n            }\n        });\n        db.run(`\n            CREATE TABLE IF NOT EXISTS carts (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                user_id INTEGER, \n                cart_item_id INTEGER,\n                product_id INTEGER,\n                quantity INTEGER,\n                price DECIMAL(10, 2),\n                total_price DECIMAL(10, 2),\n                FOREIGN KEY (user_id) REFERENCES users(id),\n                FOREIGN KEY (product_id) REFERENCES products(id)\n            )\n        `, (createErr) => {\n            if (createErr) {\n                console.error('Error creating carts table:', createErr.message);\n            } else {\n                console.log('Carts table created successfully');\n            }\n        });\n    }\n});\n\n\n\n\n\n\n// Function to query the database\nasync function queryDatabase(query, params) {\n    return new Promise((resolve, reject) => {\n        const db = new sqlite3.Database('./mock.db');\n        db.all(query, params, (err, rows) => {\n            if (err) {\n                reject(err);\n            } else {\n                resolve(rows);\n            }\n            db.close();\n        });\n    });\n}\n// Export the initialized database and query function\nexport { db, queryDatabase };\n"],"mappings":";;;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAEA,IAAME,EAAE,GAAG,IAAIC,kBAAO,CAACC,QAAQ,CAAC,WAAW,EAAED,kBAAO,CAACE,cAAc,GAAGF,kBAAO,CAACG,WAAW,EAAE,UAACC,GAAG,EAAK;EAChG,IAAIA,GAAG,EAAE;IACLC,OAAO,CAACC,KAAK,CAACF,GAAG,CAACG,OAAO,CAAC;EAC9B,CAAC,MAAM;IACHF,OAAO,CAACG,GAAG,CAAC,2BAA2B,CAAC;;IAExC;IACA;IACAT,EAAE,CAACU,GAAG,0SASH,UAACC,SAAS,EAAK;MACd,IAAIA,SAAS,EAAE;QACXL,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEI,SAAS,CAACH,OAAO,CAAC;MACtE,CAAC,MAAM;QACHF,OAAO,CAACG,GAAG,CAAC,qCAAqC,CAAC;MACtD;IACJ,CAAC,CAAC;;IAEF;IACAT,EAAE,CAACU,GAAG,yTAQH,UAACC,SAAS,EAAK;MACd,IAAIA,SAAS,EAAE;QACXL,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEI,SAAS,CAACH,OAAO,CAAC;MACnE,CAAC,MAAM;QACHF,OAAO,CAACG,GAAG,CAAC,kCAAkC,CAAC;MACnD;IACJ,CAAC,CAAC;IAEFT,EAAE,CAACU,GAAG,0eAYH,UAACC,SAAS,EAAK;MACd,IAAIA,SAAS,EAAE;QACXL,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEI,SAAS,CAACH,OAAO,CAAC;MACnE,CAAC,MAAM;QACHF,OAAO,CAACG,GAAG,CAAC,kCAAkC,CAAC;MACnD;IACJ,CAAC,CAAC;IACFT,EAAE,CAACU,GAAG,0eAYH,UAACC,SAAS,EAAK;MACd,IAAIA,SAAS,EAAE;QACXL,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEI,SAAS,CAACH,OAAO,CAAC;MACnE,CAAC,MAAM;QACHF,OAAO,CAACG,GAAG,CAAC,kCAAkC,CAAC;MACnD;IACJ,CAAC,CAAC;EACN;AACJ,CAAC,CAAC;;AAOF;AAAAG,OAAA,CAAAZ,EAAA,GAAAA,EAAA;AAAA,SACea,aAAaA,CAAAC,EAAA,EAAAC,GAAA;EAAA,OAAAC,cAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA,EAa5B;AAAA,SAAAF,eAAA;EAAAA,cAAA,OAAAG,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAbA,SAAAC,QAA6BC,KAAK,EAAEC,MAAM;IAAA,OAAAJ,YAAA,YAAAK,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,OAAAF,QAAA,CAAAG,MAAA,WAC/B,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;YACpC,IAAMjC,EAAE,GAAG,IAAIC,kBAAO,CAACC,QAAQ,CAAC,WAAW,CAAC;YAC5CF,EAAE,CAACkC,GAAG,CAACX,KAAK,EAAEC,MAAM,EAAE,UAACnB,GAAG,EAAE8B,IAAI,EAAK;cACjC,IAAI9B,GAAG,EAAE;gBACL4B,MAAM,CAAC5B,GAAG,CAAC;cACf,CAAC,MAAM;gBACH2B,OAAO,CAACG,IAAI,CAAC;cACjB;cACAnC,EAAE,CAACoC,KAAK,CAAC,CAAC;YACd,CAAC,CAAC;UACN,CAAC,CAAC;QAAA;QAAA;UAAA,OAAAT,QAAA,CAAAU,IAAA;MAAA;IAAA,GAAAf,OAAA;EAAA,CACL;EAAA,OAAAN,cAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA"}},"mtime":1692973745848},"{\"assumptions\":{},\"sourceRoot\":\"/home/muteeb/Desktop/e-store-backend/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/muteeb/Desktop/e-store-backend\",\"filename\":\"/home/muteeb/Desktop/e-store-backend/src/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/muteeb/Desktop/e-store-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.usersRouter = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _db = require(\"../db\");\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar usersRouter = _express[\"default\"].Router();\nexports.usersRouter = usersRouter;\nusersRouter.get('/api/users/:userId/cart', /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n    var userId, cartItems;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          userId = req.params.userId;\n          _context.prev = 1;\n          _context.next = 4;\n          return (0, _db.queryDatabase)('SELECT c.*, p.name, p.price, p.imageUrl ' + 'FROM carts c ' + 'JOIN products p ON c.product_id = p.id ' + 'WHERE c.user_id = ?', [userId]);\n        case 4:\n          cartItems = _context.sent;\n          res.status(200).json(cartItems);\n          _context.next = 11;\n          break;\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](1);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 8]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// API route to add to cart\nusersRouter.post('/api/users/:userId/cart', /*#__PURE__*/function () {\n  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res) {\n    var userId, _req$body, product_id, quantity, product, cartItem, _price, _total_price, updateQuery, price, total_price, insertQuery;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          userId = req.params.userId;\n          _req$body = req.body, product_id = _req$body.product_id, quantity = _req$body.quantity;\n          _context2.prev = 2;\n          _context2.next = 5;\n          return (0, _db.queryDatabase)('SELECT * FROM products WHERE id = ?', [product_id]);\n        case 5:\n          product = _context2.sent;\n          if (product[0]) {\n            _context2.next = 9;\n            break;\n          }\n          res.status(404).json('Could not find product!');\n          return _context2.abrupt(\"return\");\n        case 9:\n          _context2.next = 11;\n          return (0, _db.queryDatabase)('SELECT * FROM carts WHERE product_id = ? AND user_id = ?', [product_id, userId]);\n        case 11:\n          cartItem = _context2.sent;\n          if (!cartItem[0]) {\n            _context2.next = 20;\n            break;\n          }\n          // Calculate total price based on updated quantity\n          // const _qty = parseInt(cartItem[0].quantity) + quantity;\n          _price = parseFloat(product[0].price);\n          _total_price = _price * quantity; // Update the cart item with new quantity and total price\n          updateQuery = \"\\n            UPDATE carts\\n            SET quantity = ?, price = ?, total_price = ?\\n            WHERE product_id = ?\\n        \";\n          _context2.next = 18;\n          return (0, _db.queryDatabase)(updateQuery, [quantity, _price, _total_price, product_id]);\n        case 18:\n          res.status(200).json({\n            message: 'Cart item updated successfully'\n          });\n          return _context2.abrupt(\"return\");\n        case 20:\n          // Calculate total price based on product price and quantity\n          price = parseFloat(product[0].price);\n          total_price = price * quantity; // Insert the item into the cart\n          insertQuery = \"\\n            INSERT INTO carts (user_id, product_id, quantity, price, total_price)\\n            VALUES (?, ?, ?, ?, ?)\\n        \";\n          _context2.next = 25;\n          return (0, _db.queryDatabase)(insertQuery, [userId, product_id, quantity, price, total_price]);\n        case 25:\n          res.status(200).json({\n            message: 'Product added to cart successfully'\n          });\n          _context2.next = 31;\n          break;\n        case 28:\n          _context2.prev = 28;\n          _context2.t0 = _context2[\"catch\"](2);\n          res.status(500).json({\n            error: 'Database error:' + _context2.t0\n          });\n        case 31:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[2, 28]]);\n  }));\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\n// API route to update the quantity of a product in a user's cart\nusersRouter.put('/api/users/:userId/cart/:cartItemId', /*#__PURE__*/function () {\n  var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res) {\n    var _req$params, userId, cartItemId, quantity, cartItem, product, price, total_price, updateQuery;\n    return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _req$params = req.params, userId = _req$params.userId, cartItemId = _req$params.cartItemId;\n          quantity = req.body.quantity;\n          _context3.prev = 2;\n          _context3.next = 5;\n          return (0, _db.queryDatabase)('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        case 5:\n          cartItem = _context3.sent;\n          if (cartItem[0]) {\n            _context3.next = 9;\n            break;\n          }\n          res.status(404).json('Could not find cart item!');\n          return _context3.abrupt(\"return\");\n        case 9:\n          _context3.next = 11;\n          return (0, _db.queryDatabase)('SELECT * FROM products WHERE id = ?', [cartItem[0].product_id]);\n        case 11:\n          product = _context3.sent;\n          if (product[0]) {\n            _context3.next = 15;\n            break;\n          }\n          res.status(404).json('Could not find product!');\n          return _context3.abrupt(\"return\");\n        case 15:\n          // Calculate total price based on updated quantity\n          price = parseFloat(product[0].price);\n          total_price = price * quantity; // Update the cart item with new quantity and total price\n          updateQuery = \"\\n            UPDATE carts\\n            SET quantity = ?, price = ?, total_price = ?\\n            WHERE id = ?\\n        \";\n          _context3.next = 20;\n          return (0, _db.queryDatabase)(updateQuery, [quantity, price, total_price, cartItemId]);\n        case 20:\n          res.status(200).json({\n            message: 'Cart item updated successfully'\n          });\n          _context3.next = 26;\n          break;\n        case 23:\n          _context3.prev = 23;\n          _context3.t0 = _context3[\"catch\"](2);\n          res.status(500).json({\n            error: 'Database error'\n          });\n        case 26:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[2, 23]]);\n  }));\n  return function (_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nusersRouter[\"delete\"]('/api/users/:userId/cart/:cartItemId', /*#__PURE__*/function () {\n  var _ref4 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res) {\n    var _req$params2, userId, cartItemId, cartItem, deleteQuery;\n    return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _req$params2 = req.params, userId = _req$params2.userId, cartItemId = _req$params2.cartItemId;\n          _context4.prev = 1;\n          _context4.next = 4;\n          return (0, _db.queryDatabase)('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        case 4:\n          cartItem = _context4.sent;\n          if (cartItem[0]) {\n            _context4.next = 8;\n            break;\n          }\n          res.status(404).json({\n            message: 'Could not find cart item!'\n          });\n          return _context4.abrupt(\"return\");\n        case 8:\n          // Delete the item from the cart\n          deleteQuery = \"\\n            DELETE FROM carts\\n            WHERE id = ? AND user_id = ?\\n        \";\n          _context4.next = 11;\n          return (0, _db.queryDatabase)(deleteQuery, [cartItemId, userId]);\n        case 11:\n          res.status(200).json({\n            message: 'Product removed from cart successfully'\n          });\n          _context4.next = 17;\n          break;\n        case 14:\n          _context4.prev = 14;\n          _context4.t0 = _context4[\"catch\"](1);\n          res.status(500).json({\n            message: 'Database error'\n          });\n        case 17:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[1, 14]]);\n  }));\n  return function (_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RiIiwiX3Bhc3Nwb3J0IiwidXNlcnNSb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwiZXhwb3J0cyIsImdldCIsIl9yZWYiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVnZW5lcmF0b3IiLCJtYXJrIiwiX2NhbGxlZSIsInJlcSIsInJlcyIsInVzZXJJZCIsImNhcnRJdGVtcyIsIndyYXAiLCJfY2FsbGVlJCIsIl9jb250ZXh0IiwicHJldiIsIm5leHQiLCJwYXJhbXMiLCJxdWVyeURhdGFiYXNlIiwic2VudCIsInN0YXR1cyIsImpzb24iLCJ0MCIsImVycm9yIiwic3RvcCIsIl94IiwiX3gyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJwb3N0IiwiX3JlZjIiLCJfY2FsbGVlMiIsIl9yZXEkYm9keSIsInByb2R1Y3RfaWQiLCJxdWFudGl0eSIsInByb2R1Y3QiLCJjYXJ0SXRlbSIsIl9wcmljZSIsIl90b3RhbF9wcmljZSIsInVwZGF0ZVF1ZXJ5IiwicHJpY2UiLCJ0b3RhbF9wcmljZSIsImluc2VydFF1ZXJ5IiwiX2NhbGxlZTIkIiwiX2NvbnRleHQyIiwiYm9keSIsImFicnVwdCIsInBhcnNlRmxvYXQiLCJtZXNzYWdlIiwiX3gzIiwiX3g0IiwicHV0IiwiX3JlZjMiLCJfY2FsbGVlMyIsIl9yZXEkcGFyYW1zIiwiY2FydEl0ZW1JZCIsIl9jYWxsZWUzJCIsIl9jb250ZXh0MyIsIl94NSIsIl94NiIsIl9yZWY0IiwiX2NhbGxlZTQiLCJfcmVxJHBhcmFtczIiLCJkZWxldGVRdWVyeSIsIl9jYWxsZWU0JCIsIl9jb250ZXh0NCIsIl94NyIsIl94OCJdLCJzb3VyY2VSb290IjoiL2hvbWUvbXV0ZWViL0Rlc2t0b3AvZS1zdG9yZS1iYWNrZW5kL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJ1c2Vycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGRiLCBxdWVyeURhdGFiYXNlIH0gZnJvbSAnLi4vZGInO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0JztcblxuZXhwb3J0IGNvbnN0IHVzZXJzUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxudXNlcnNSb3V0ZXIuZ2V0KCcvYXBpL3VzZXJzLzp1c2VySWQvY2FydCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2FydEl0ZW1zID0gYXdhaXQgcXVlcnlEYXRhYmFzZShcbiAgICAgICAgICAgICdTRUxFQ1QgYy4qLCBwLm5hbWUsIHAucHJpY2UsIHAuaW1hZ2VVcmwgJyArXG4gICAgICAgICAgICAnRlJPTSBjYXJ0cyBjICcgK1xuICAgICAgICAgICAgJ0pPSU4gcHJvZHVjdHMgcCBPTiBjLnByb2R1Y3RfaWQgPSBwLmlkICcgK1xuICAgICAgICAgICAgJ1dIRVJFIGMudXNlcl9pZCA9ID8nLFxuICAgICAgICAgICAgW3VzZXJJZF1cbiAgICAgICAgKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oY2FydEl0ZW1zKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0RhdGFiYXNlIGVycm9yJyB9KTtcbiAgICB9XG59KTtcblxuLy8gQVBJIHJvdXRlIHRvIGFkZCB0byBjYXJ0XG51c2Vyc1JvdXRlci5wb3N0KCcvYXBpL3VzZXJzLzp1c2VySWQvY2FydCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgIGNvbnN0IHsgcHJvZHVjdF9pZCwgcXVhbnRpdHkgfSA9IHJlcS5ib2R5O1xuXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggcHJvZHVjdCBkZXRhaWxzIGZyb20gdGhlIHByb2R1Y3RzIHRhYmxlXG4gICAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIHByb2R1Y3RzIFdIRVJFIGlkID0gPycsIFtwcm9kdWN0X2lkXSk7XG4gICAgICAgIGlmICghcHJvZHVjdFswXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oJ0NvdWxkIG5vdCBmaW5kIHByb2R1Y3QhJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGZXRjaCB0aGUgY2FydCBpdGVtIGRldGFpbHNcbiAgICAgICAgY29uc3QgY2FydEl0ZW0gPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIGNhcnRzIFdIRVJFIHByb2R1Y3RfaWQgPSA/IEFORCB1c2VyX2lkID0gPycsIFtwcm9kdWN0X2lkLCB1c2VySWRdKTtcbiAgICAgICAgaWYgKGNhcnRJdGVtWzBdKSB7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgdG90YWwgcHJpY2UgYmFzZWQgb24gdXBkYXRlZCBxdWFudGl0eVxuICAgICAgICAgICAgLy8gY29uc3QgX3F0eSA9IHBhcnNlSW50KGNhcnRJdGVtWzBdLnF1YW50aXR5KSArIHF1YW50aXR5O1xuICAgICAgICAgICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KHByb2R1Y3RbMF0ucHJpY2UpO1xuICAgICAgICAgICAgY29uc3QgdG90YWxfcHJpY2UgPSBwcmljZSAqIHF1YW50aXR5O1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNhcnQgaXRlbSB3aXRoIG5ldyBxdWFudGl0eSBhbmQgdG90YWwgcHJpY2VcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVF1ZXJ5ID0gYFxuICAgICAgICAgICAgVVBEQVRFIGNhcnRzXG4gICAgICAgICAgICBTRVQgcXVhbnRpdHkgPSA/LCBwcmljZSA9ID8sIHRvdGFsX3ByaWNlID0gP1xuICAgICAgICAgICAgV0hFUkUgcHJvZHVjdF9pZCA9ID9cbiAgICAgICAgYDtcbiAgICAgICAgICAgIGF3YWl0IHF1ZXJ5RGF0YWJhc2UodXBkYXRlUXVlcnksIFtxdWFudGl0eSwgcHJpY2UsIHRvdGFsX3ByaWNlLCBwcm9kdWN0X2lkXSk7XG5cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0NhcnQgaXRlbSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxjdWxhdGUgdG90YWwgcHJpY2UgYmFzZWQgb24gcHJvZHVjdCBwcmljZSBhbmQgcXVhbnRpdHlcbiAgICAgICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KHByb2R1Y3RbMF0ucHJpY2UpO1xuICAgICAgICBjb25zdCB0b3RhbF9wcmljZSA9IHByaWNlICogcXVhbnRpdHk7XG5cbiAgICAgICAgLy8gSW5zZXJ0IHRoZSBpdGVtIGludG8gdGhlIGNhcnRcbiAgICAgICAgY29uc3QgaW5zZXJ0UXVlcnkgPSBgXG4gICAgICAgICAgICBJTlNFUlQgSU5UTyBjYXJ0cyAodXNlcl9pZCwgcHJvZHVjdF9pZCwgcXVhbnRpdHksIHByaWNlLCB0b3RhbF9wcmljZSlcbiAgICAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPylcbiAgICAgICAgYDtcbiAgICAgICAgYXdhaXQgcXVlcnlEYXRhYmFzZShpbnNlcnRRdWVyeSwgW3VzZXJJZCwgcHJvZHVjdF9pZCwgcXVhbnRpdHksIHByaWNlLCB0b3RhbF9wcmljZV0pO1xuXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1Byb2R1Y3QgYWRkZWQgdG8gY2FydCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRGF0YWJhc2UgZXJyb3I6JyArIGVyciB9KTtcbiAgICB9XG59KTtcblxuLy8gQVBJIHJvdXRlIHRvIHVwZGF0ZSB0aGUgcXVhbnRpdHkgb2YgYSBwcm9kdWN0IGluIGEgdXNlcidzIGNhcnRcbnVzZXJzUm91dGVyLnB1dCgnL2FwaS91c2Vycy86dXNlcklkL2NhcnQvOmNhcnRJdGVtSWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IHVzZXJJZCwgY2FydEl0ZW1JZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHF1YW50aXR5IH0gPSByZXEuYm9keTtcblxuICAgIHRyeSB7XG4gICAgICAgIC8vIEZldGNoIHRoZSBjYXJ0IGl0ZW0gZGV0YWlsc1xuICAgICAgICBjb25zdCBjYXJ0SXRlbSA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gY2FydHMgV0hFUkUgaWQgPSA/IEFORCB1c2VyX2lkID0gPycsIFtjYXJ0SXRlbUlkLCB1c2VySWRdKTtcbiAgICAgICAgaWYgKCFjYXJ0SXRlbVswXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oJ0NvdWxkIG5vdCBmaW5kIGNhcnQgaXRlbSEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZldGNoIHByb2R1Y3QgZGV0YWlscyBmcm9tIHRoZSBwcm9kdWN0cyB0YWJsZVxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgcXVlcnlEYXRhYmFzZSgnU0VMRUNUICogRlJPTSBwcm9kdWN0cyBXSEVSRSBpZCA9ID8nLCBbY2FydEl0ZW1bMF0ucHJvZHVjdF9pZF0pO1xuICAgICAgICBpZiAoIXByb2R1Y3RbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKCdDb3VsZCBub3QgZmluZCBwcm9kdWN0IScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHByaWNlIGJhc2VkIG9uIHVwZGF0ZWQgcXVhbnRpdHlcbiAgICAgICAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KHByb2R1Y3RbMF0ucHJpY2UpO1xuICAgICAgICBjb25zdCB0b3RhbF9wcmljZSA9IHByaWNlICogcXVhbnRpdHk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBjYXJ0IGl0ZW0gd2l0aCBuZXcgcXVhbnRpdHkgYW5kIHRvdGFsIHByaWNlXG4gICAgICAgIGNvbnN0IHVwZGF0ZVF1ZXJ5ID0gYFxuICAgICAgICAgICAgVVBEQVRFIGNhcnRzXG4gICAgICAgICAgICBTRVQgcXVhbnRpdHkgPSA/LCBwcmljZSA9ID8sIHRvdGFsX3ByaWNlID0gP1xuICAgICAgICAgICAgV0hFUkUgaWQgPSA/XG4gICAgICAgIGA7XG4gICAgICAgIGF3YWl0IHF1ZXJ5RGF0YWJhc2UodXBkYXRlUXVlcnksIFtxdWFudGl0eSwgcHJpY2UsIHRvdGFsX3ByaWNlLCBjYXJ0SXRlbUlkXSk7XG5cbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnQ2FydCBpdGVtIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0RhdGFiYXNlIGVycm9yJyB9KTtcbiAgICB9XG59KTtcblxudXNlcnNSb3V0ZXIuZGVsZXRlKCcvYXBpL3VzZXJzLzp1c2VySWQvY2FydC86Y2FydEl0ZW1JZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgdXNlcklkLCBjYXJ0SXRlbUlkIH0gPSByZXEucGFyYW1zO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggdGhlIGNhcnQgaXRlbSBkZXRhaWxzXG4gICAgICAgIGNvbnN0IGNhcnRJdGVtID0gYXdhaXQgcXVlcnlEYXRhYmFzZSgnU0VMRUNUICogRlJPTSBjYXJ0cyBXSEVSRSBpZCA9ID8gQU5EIHVzZXJfaWQgPSA/JywgW2NhcnRJdGVtSWQsIHVzZXJJZF0pO1xuICAgICAgICBpZiAoIWNhcnRJdGVtWzBdKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdDb3VsZCBub3QgZmluZCBjYXJ0IGl0ZW0hJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgaXRlbSBmcm9tIHRoZSBjYXJ0XG4gICAgICAgIGNvbnN0IGRlbGV0ZVF1ZXJ5ID0gYFxuICAgICAgICAgICAgREVMRVRFIEZST00gY2FydHNcbiAgICAgICAgICAgIFdIRVJFIGlkID0gPyBBTkQgdXNlcl9pZCA9ID9cbiAgICAgICAgYDtcbiAgICAgICAgYXdhaXQgcXVlcnlEYXRhYmFzZShkZWxldGVRdWVyeSwgW2NhcnRJdGVtSWQsIHVzZXJJZF0pO1xuXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1Byb2R1Y3QgcmVtb3ZlZCBmcm9tIGNhcnQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRGF0YWJhc2UgZXJyb3InIH0pO1xuICAgIH1cbn0pO1xuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEdBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFNBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUVPLElBQU1HLFdBQVcsR0FBR0MsbUJBQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFBQ0MsT0FBQSxDQUFBSCxXQUFBLEdBQUFBLFdBQUE7QUFFNUNBLFdBQVcsQ0FBQ0ksR0FBRyxDQUFDLHlCQUF5QjtFQUFBLElBQUFDLElBQUEsT0FBQUMsa0JBQUEsMkJBQUFDLFlBQUEsWUFBQUMsSUFBQSxDQUFFLFNBQUFDLFFBQU9DLEdBQUcsRUFBRUMsR0FBRztJQUFBLElBQUFDLE1BQUEsRUFBQUMsU0FBQTtJQUFBLE9BQUFOLFlBQUEsWUFBQU8sSUFBQSxVQUFBQyxTQUFBQyxRQUFBO01BQUEs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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_db","_passport","usersRouter","express","Router","exports","get","_ref","_asyncToGenerator2","_regenerator","mark","_callee","req","res","userId","cartItems","wrap","_callee$","_context","prev","next","params","queryDatabase","sent","status","json","t0","error","stop","_x","_x2","apply","arguments","post","_ref2","_callee2","_req$body","product_id","quantity","product","cartItem","_price","_total_price","updateQuery","price","total_price","insertQuery","_callee2$","_context2","body","abrupt","parseFloat","message","_x3","_x4","put","_ref3","_callee3","_req$params","cartItemId","_callee3$","_context3","_x5","_x6","_ref4","_callee4","_req$params2","deleteQuery","_callee4$","_context4","_x7","_x8"],"sourceRoot":"/home/muteeb/Desktop/e-store-backend/src/routes/","sources":["users.js"],"sourcesContent":["import express from 'express';\nimport { db, queryDatabase } from '../db';\nimport passport from 'passport';\n\nexport const usersRouter = express.Router();\n\nusersRouter.get('/api/users/:userId/cart', async (req, res) => {\n    const { userId } = req.params;\n\n    try {\n        const cartItems = await queryDatabase(\n            'SELECT c.*, p.name, p.price, p.imageUrl ' +\n            'FROM carts c ' +\n            'JOIN products p ON c.product_id = p.id ' +\n            'WHERE c.user_id = ?',\n            [userId]\n        );\n        res.status(200).json(cartItems);\n    } catch (err) {\n        res.status(500).json({ error: 'Database error' });\n    }\n});\n\n// API route to add to cart\nusersRouter.post('/api/users/:userId/cart', async (req, res) => {\n    const { userId } = req.params;\n    const { product_id, quantity } = req.body;\n\n    try {\n        // Fetch product details from the products table\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [product_id]);\n        if (!product[0]) {\n            res.status(404).json('Could not find product!');\n            return;\n        }\n\n        // Fetch the cart item details\n        const cartItem = await queryDatabase('SELECT * FROM carts WHERE product_id = ? AND user_id = ?', [product_id, userId]);\n        if (cartItem[0]) {\n            // Calculate total price based on updated quantity\n            // const _qty = parseInt(cartItem[0].quantity) + quantity;\n            const price = parseFloat(product[0].price);\n            const total_price = price * quantity;\n\n            // Update the cart item with new quantity and total price\n            const updateQuery = `\n            UPDATE carts\n            SET quantity = ?, price = ?, total_price = ?\n            WHERE product_id = ?\n        `;\n            await queryDatabase(updateQuery, [quantity, price, total_price, product_id]);\n\n            res.status(200).json({ message: 'Cart item updated successfully' });\n            return;\n        }\n\n        // Calculate total price based on product price and quantity\n        const price = parseFloat(product[0].price);\n        const total_price = price * quantity;\n\n        // Insert the item into the cart\n        const insertQuery = `\n            INSERT INTO carts (user_id, product_id, quantity, price, total_price)\n            VALUES (?, ?, ?, ?, ?)\n        `;\n        await queryDatabase(insertQuery, [userId, product_id, quantity, price, total_price]);\n\n        res.status(200).json({ message: 'Product added to cart successfully' });\n    } catch (err) {\n        res.status(500).json({ error: 'Database error:' + err });\n    }\n});\n\n// API route to update the quantity of a product in a user's cart\nusersRouter.put('/api/users/:userId/cart/:cartItemId', async (req, res) => {\n    const { userId, cartItemId } = req.params;\n    const { quantity } = req.body;\n\n    try {\n        // Fetch the cart item details\n        const cartItem = await queryDatabase('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        if (!cartItem[0]) {\n            res.status(404).json('Could not find cart item!');\n            return;\n        }\n\n        // Fetch product details from the products table\n        const product = await queryDatabase('SELECT * FROM products WHERE id = ?', [cartItem[0].product_id]);\n        if (!product[0]) {\n            res.status(404).json('Could not find product!');\n            return;\n        }\n\n        // Calculate total price based on updated quantity\n        const price = parseFloat(product[0].price);\n        const total_price = price * quantity;\n\n        // Update the cart item with new quantity and total price\n        const updateQuery = `\n            UPDATE carts\n            SET quantity = ?, price = ?, total_price = ?\n            WHERE id = ?\n        `;\n        await queryDatabase(updateQuery, [quantity, price, total_price, cartItemId]);\n\n        res.status(200).json({ message: 'Cart item updated successfully' });\n    } catch (err) {\n        res.status(500).json({ error: 'Database error' });\n    }\n});\n\nusersRouter.delete('/api/users/:userId/cart/:cartItemId', async (req, res) => {\n    const { userId, cartItemId } = req.params;\n\n    try {\n        // Fetch the cart item details\n        const cartItem = await queryDatabase('SELECT * FROM carts WHERE id = ? AND user_id = ?', [cartItemId, userId]);\n        if (!cartItem[0]) {\n            res.status(404).json({ message: 'Could not find cart item!' });\n            return;\n        }\n\n        // Delete the item from the cart\n        const deleteQuery = `\n            DELETE FROM carts\n            WHERE id = ? AND user_id = ?\n        `;\n        await queryDatabase(deleteQuery, [cartItemId, userId]);\n\n        res.status(200).json({ message: 'Product removed from cart successfully' });\n    } catch (err) {\n        res.status(500).json({ message: 'Database error' });\n    }\n});\n\n"],"mappings":"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"}},"mtime":1692968369828},"{\"assumptions\":{},\"sourceRoot\":\"/home/muteeb/Desktop/e-store-backend/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/muteeb/Desktop/e-store-backend\",\"filename\":\"/home/muteeb/Desktop/e-store-backend/src/routes/authentication.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/muteeb/Desktop/e-store-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.10:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.authenticationRouter = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _passportGoogleOauth = require(\"passport-google-oauth2\");\nvar _passportFacebook = require(\"passport-facebook\");\nvar _expressSession = _interopRequireDefault(require(\"express-session\"));\nvar _db = require(\"../db\");\nvar authenticationRouter = _express[\"default\"].Router();\n\n// Initialize expressSession before initializing passport\nexports.authenticationRouter = authenticationRouter;\nauthenticationRouter.use((0, _expressSession[\"default\"])({\n  secret: 'shoestoreapp',\n  resave: true,\n  saveUninitialized: true\n}));\n\n// Initialize Passport and expressSession\nauthenticationRouter.use(_passport[\"default\"].initialize());\nauthenticationRouter.use(_passport[\"default\"].session());\n\n// For Google\nvar GOOGLE_CLIENT_ID = '612009756713-fevv7ilgb1ltpvrc7cnsolno8bjadb3c.apps.googleusercontent.com';\nvar GOOGLE_CLIENT_SECRET = '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';\n_passport[\"default\"].use(new _passportGoogleOauth.Strategy({\n  clientID: GOOGLE_CLIENT_ID,\n  clientSecret: GOOGLE_CLIENT_SECRET,\n  callbackURL: '/google/callback'\n}, function (accessToken, refreshToken, profile, callback) {\n  callback(null, profile);\n}));\n\n// For Facebook\nvar FACEBOOK_CLIENT_ID = '676764303980550';\nvar FACEBOOK_CLIENT_SECRET = 'eea4293b945fb06207084ae63b231f06';\n_passport[\"default\"].use(new _passportFacebook.Strategy({\n  clientID: FACEBOOK_CLIENT_ID,\n  clientSecret: FACEBOOK_CLIENT_SECRET,\n  callbackURL: '/facebook/callback',\n  profileFields: ['emails', 'displayName', 'name', 'picture']\n}, function (accessToken, refreshToken, profile, callback) {\n  callback(null, profile);\n}));\n_passport[\"default\"].serializeUser(function (user, callback) {\n  callback(null, user);\n});\n_passport[\"default\"].deserializeUser(function (user, callback) {\n  callback(null, user);\n});\n\n// API route for user login\nauthenticationRouter.post('/api/login', /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n    var _req$body, email, password, user;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _req$body = req.body, email = _req$body.email, password = _req$body.password;\n          _context.prev = 1;\n          _context.next = 4;\n          return (0, _db.queryDatabase)('SELECT * FROM users WHERE email = ? AND password = ?', [email, password]);\n        case 4:\n          user = _context.sent;\n          if (user[0]) {\n            _context.next = 8;\n            break;\n          }\n          res.status(401).json({\n            message: 'Invalid email or password'\n          });\n          return _context.abrupt(\"return\");\n        case 8:\n          res.status(200).json({\n            message: 'Login successful',\n            user: user[0]\n          });\n          _context.next = 14;\n          break;\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](1);\n          res.status(500).json({\n            message: 'Database error'\n          });\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 11]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// API route for user registration\nauthenticationRouter.post('/api/register', /*#__PURE__*/function () {\n  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res) {\n    var _req$body2, email, password, username, phoneNo, usernameExists, emailExists, phoneNoExists, insertQuery;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _req$body2 = req.body, email = _req$body2.email, password = _req$body2.password, username = _req$body2.username, phoneNo = _req$body2.phoneNo;\n          _context2.prev = 1;\n          _context2.next = 4;\n          return (0, _db.queryDatabase)('SELECT * FROM users WHERE username = ?', [username]);\n        case 4:\n          usernameExists = _context2.sent;\n          if (!usernameExists[0]) {\n            _context2.next = 8;\n            break;\n          }\n          res.status(400).json({\n            message: 'Username already exists'\n          });\n          return _context2.abrupt(\"return\");\n        case 8:\n          _context2.next = 10;\n          return (0, _db.queryDatabase)('SELECT * FROM users WHERE email = ?', [email]);\n        case 10:\n          emailExists = _context2.sent;\n          if (!emailExists[0]) {\n            _context2.next = 14;\n            break;\n          }\n          res.status(400).json({\n            message: 'Email already exists'\n          });\n          return _context2.abrupt(\"return\");\n        case 14:\n          _context2.next = 16;\n          return (0, _db.queryDatabase)('SELECT * FROM users WHERE phoneNo = ?', [phoneNo]);\n        case 16:\n          phoneNoExists = _context2.sent;\n          if (!phoneNoExists[0]) {\n            _context2.next = 20;\n            break;\n          }\n          res.status(400).json({\n            message: 'Phone number already exists'\n          });\n          return _context2.abrupt(\"return\");\n        case 20:\n          insertQuery = \"\\n            INSERT INTO users (username, email, phoneNo, password)\\n            VALUES (?, ?, ?, ?)\\n        \";\n          _context2.next = 23;\n          return (0, _db.queryDatabase)(insertQuery, [username, email, phoneNo, password]);\n        case 23:\n          res.status(201).json({\n            message: 'User registered successfully'\n          });\n          _context2.next = 29;\n          break;\n        case 26:\n          _context2.prev = 26;\n          _context2.t0 = _context2[\"catch\"](1);\n          res.status(500).json({\n            message: 'Database error'\n          });\n        case 29:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[1, 26]]);\n  }));\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nauthenticationRouter.get('/login/google', _passport[\"default\"].authenticate('google', {\n  scope: ['profile', 'email']\n}));\nauthenticationRouter.get('/login/facebook', _passport[\"default\"].authenticate('facebook', {\n  scope: ['email']\n}));\nauthenticationRouter.get('/google/callback', _passport[\"default\"].authenticate('google'), function (req, res) {\n  res.redirect('http://localhost:8080/');\n});\nauthenticationRouter.get('/facebook/callback', _passport[\"default\"].authenticate('facebook'), function (req, res) {\n  res.redirect('http://localhost:8080/');\n});\nauthenticationRouter.get('/logout', function (req, res) {\n  req.logout();\n  res.redirect('/notlogged');\n});\nauthenticationRouter.get('/notlogged', function (req, res) {\n  res.send(req.user ? req.user : 'Not logged in. Login with Google or Facebook.');\n});\nvar _default = authenticationRouter;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3Bhc3Nwb3J0IiwiX3Bhc3Nwb3J0R29vZ2xlT2F1dGgiLCJfcGFzc3BvcnRGYWNlYm9vayIsIl9leHByZXNzU2Vzc2lvbiIsIl9kYiIsImF1dGhlbnRpY2F0aW9uUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImV4cG9ydHMiLCJ1c2UiLCJleHByZXNzU2Vzc2lvbiIsInNlY3JldCIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwicGFzc3BvcnQiLCJpbml0aWFsaXplIiwic2Vzc2lvbiIsIkdPT0dMRV9DTElFTlRfSUQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsIkdvb2dsZVN0cmF0ZWd5IiwiY2xpZW50SUQiLCJjbGllbnRTZWNyZXQiLCJjYWxsYmFja1VSTCIsImFjY2Vzc1Rva2VuIiwicmVmcmVzaFRva2VuIiwicHJvZmlsZSIsImNhbGxiYWNrIiwiRkFDRUJPT0tfQ0xJRU5UX0lEIiwiRkFDRUJPT0tfQ0xJRU5UX1NFQ1JFVCIsIkZhY2Vib29rU3RyYXRlZ3kiLCJwcm9maWxlRmllbGRzIiwic2VyaWFsaXplVXNlciIsInVzZXIiLCJkZXNlcmlhbGl6ZVVzZXIiLCJwb3N0IiwiX3JlZiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWdlbmVyYXRvciIsIm1hcmsiLCJfY2FsbGVlIiwicmVxIiwicmVzIiwiX3JlcSRib2R5IiwiZW1haWwiLCJwYXNzd29yZCIsIndyYXAiLCJfY2FsbGVlJCIsIl9jb250ZXh0IiwicHJldiIsIm5leHQiLCJib2R5IiwicXVlcnlEYXRhYmFzZSIsInNlbnQiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImFicnVwdCIsInQwIiwic3RvcCIsIl94IiwiX3gyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfcmVmMiIsIl9jYWxsZWUyIiwiX3JlcSRib2R5MiIsInVzZXJuYW1lIiwicGhvbmVObyIsInVzZXJuYW1lRXhpc3RzIiwiZW1haWxFeGlzdHMiLCJwaG9uZU5vRXhpc3RzIiwiaW5zZXJ0UXVlcnkiLCJfY2FsbGVlMiQiLCJfY29udGV4dDIiLCJfeDMiLCJfeDQiLCJnZXQiLCJhdXRoZW50aWNhdGUiLCJzY29wZSIsInJlZGlyZWN0IiwibG9nb3V0Iiwic2VuZCIsIl9kZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9tdXRlZWIvRGVza3RvcC9lLXN0b3JlLWJhY2tlbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0JztcbmltcG9ydCB7IFN0cmF0ZWd5IGFzIEdvb2dsZVN0cmF0ZWd5IH0gZnJvbSAncGFzc3BvcnQtZ29vZ2xlLW9hdXRoMic7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBGYWNlYm9va1N0cmF0ZWd5IH0gZnJvbSAncGFzc3BvcnQtZmFjZWJvb2snO1xuaW1wb3J0IGV4cHJlc3NTZXNzaW9uIGZyb20gJ2V4cHJlc3Mtc2Vzc2lvbic7XG5pbXBvcnQgeyBxdWVyeURhdGFiYXNlIH0gZnJvbSBcIi4uL2RiXCI7XG5cbmV4cG9ydCBjb25zdCBhdXRoZW50aWNhdGlvblJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8vIEluaXRpYWxpemUgZXhwcmVzc1Nlc3Npb24gYmVmb3JlIGluaXRpYWxpemluZyBwYXNzcG9ydFxuYXV0aGVudGljYXRpb25Sb3V0ZXIudXNlKGV4cHJlc3NTZXNzaW9uKHtcbiAgICBzZWNyZXQ6ICdzaG9lc3RvcmVhcHAnLFxuICAgIHJlc2F2ZTogdHJ1ZSxcbiAgICBzYXZlVW5pbml0aWFsaXplZDogdHJ1ZVxufSkpO1xuXG4vLyBJbml0aWFsaXplIFBhc3Nwb3J0IGFuZCBleHByZXNzU2Vzc2lvblxuYXV0aGVudGljYXRpb25Sb3V0ZXIudXNlKHBhc3Nwb3J0LmluaXRpYWxpemUoKSk7XG5hdXRoZW50aWNhdGlvblJvdXRlci51c2UocGFzc3BvcnQuc2Vzc2lvbigpKTtcblxuLy8gRm9yIEdvb2dsZVxuY29uc3QgR09PR0xFX0NMSUVOVF9JRCA9ICc2MTIwMDk3NTY3MTMtZmV2djdpbGdiMWx0cHZyYzdjbnNvbG5vOGJqYWRiM2MuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20nO1xuY29uc3QgR09PR0xFX0NMSUVOVF9TRUNSRVQgPSAnR09DU1BYLXVXUzZ3MXp5czdvd0hiWm5LWXdwVVowWXA0SlcnO1xuXG5wYXNzcG9ydC51c2UobmV3IEdvb2dsZVN0cmF0ZWd5KHtcbiAgICBjbGllbnRJRDogR09PR0xFX0NMSUVOVF9JRCxcbiAgICBjbGllbnRTZWNyZXQ6IEdPT0dMRV9DTElFTlRfU0VDUkVULFxuICAgIGNhbGxiYWNrVVJMOiAnL2dvb2dsZS9jYWxsYmFjaydcbn0sIChhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBwcm9maWxlLCBjYWxsYmFjaykgPT4ge1xuICAgIGNhbGxiYWNrKG51bGwsIHByb2ZpbGUpO1xufSkpO1xuXG4vLyBGb3IgRmFjZWJvb2tcbmNvbnN0IEZBQ0VCT09LX0NMSUVOVF9JRCA9ICc2NzY3NjQzMDM5ODA1NTAnO1xuY29uc3QgRkFDRUJPT0tfQ0xJRU5UX1NFQ1JFVCA9ICdlZWE0MjkzYjk0NWZiMDYyMDcwODRhZTYzYjIzMWYwNic7XG5cbnBhc3Nwb3J0LnVzZShuZXcgRmFjZWJvb2tTdHJhdGVneSh7XG4gICAgY2xpZW50SUQ6IEZBQ0VCT09LX0NMSUVOVF9JRCxcbiAgICBjbGllbnRTZWNyZXQ6IEZBQ0VCT09LX0NMSUVOVF9TRUNSRVQsXG4gICAgY2FsbGJhY2tVUkw6ICcvZmFjZWJvb2svY2FsbGJhY2snLFxuICAgIHByb2ZpbGVGaWVsZHM6IFsnZW1haWxzJywgJ2Rpc3BsYXlOYW1lJywgJ25hbWUnLCAncGljdHVyZSddXG59LCAoYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgcHJvZmlsZSwgY2FsbGJhY2spID0+IHtcbiAgICBjYWxsYmFjayhudWxsLCBwcm9maWxlKTtcbn0pKTtcblxucGFzc3BvcnQuc2VyaWFsaXplVXNlcigodXNlciwgY2FsbGJhY2spID0+IHtcbiAgICBjYWxsYmFjayhudWxsLCB1c2VyKTtcbn0pO1xuXG5wYXNzcG9ydC5kZXNlcmlhbGl6ZVVzZXIoKHVzZXIsIGNhbGxiYWNrKSA9PiB7XG4gICAgY2FsbGJhY2sobnVsbCwgdXNlcik7XG59KTtcblxuLy8gQVBJIHJvdXRlIGZvciB1c2VyIGxvZ2luXG5hdXRoZW50aWNhdGlvblJvdXRlci5wb3N0KCcvYXBpL2xvZ2luJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgZW1haWwgPSA/IEFORCBwYXNzd29yZCA9ID8nLCBbZW1haWwsIHBhc3N3b3JkXSk7XG4gICAgICAgIGlmICghdXNlclswXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnTG9naW4gc3VjY2Vzc2Z1bCcsIHVzZXI6IHVzZXJbMF0gfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0RhdGFiYXNlIGVycm9yJyB9KTtcbiAgICB9XG59KTtcblxuLy8gQVBJIHJvdXRlIGZvciB1c2VyIHJlZ2lzdHJhdGlvblxuYXV0aGVudGljYXRpb25Sb3V0ZXIucG9zdCgnL2FwaS9yZWdpc3RlcicsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCB1c2VybmFtZSwgcGhvbmVObyB9ID0gcmVxLmJvZHk7XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VybmFtZUV4aXN0cyA9IGF3YWl0IHF1ZXJ5RGF0YWJhc2UoJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/JywgW3VzZXJuYW1lXSk7XG4gICAgICAgIGlmICh1c2VybmFtZUV4aXN0c1swXSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlcm5hbWUgYWxyZWFkeSBleGlzdHMnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW1haWxFeGlzdHMgPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gPycsIFtlbWFpbF0pO1xuICAgICAgICBpZiAoZW1haWxFeGlzdHNbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0VtYWlsIGFscmVhZHkgZXhpc3RzJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBob25lTm9FeGlzdHMgPSBhd2FpdCBxdWVyeURhdGFiYXNlKCdTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIHBob25lTm8gPSA/JywgW3Bob25lTm9dKTtcbiAgICAgICAgaWYgKHBob25lTm9FeGlzdHNbMF0pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bob25lIG51bWJlciBhbHJlYWR5IGV4aXN0cycgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbnNlcnRRdWVyeSA9IGBcbiAgICAgICAgICAgIElOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgZW1haWwsIHBob25lTm8sIHBhc3N3b3JkKVxuICAgICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/KVxuICAgICAgICBgO1xuICAgICAgICBhd2FpdCBxdWVyeURhdGFiYXNlKGluc2VydFF1ZXJ5LCBbdXNlcm5hbWUsIGVtYWlsLCBwaG9uZU5vLCBwYXNzd29yZF0pO1xuXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdEYXRhYmFzZSBlcnJvcicgfSk7XG4gICAgfVxufSk7XG5cbmF1dGhlbnRpY2F0aW9uUm91dGVyLmdldCgnL2xvZ2luL2dvb2dsZScsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnZ29vZ2xlJywgeyBzY29wZTogWydwcm9maWxlJywgJ2VtYWlsJ10gfSkpO1xuYXV0aGVudGljYXRpb25Sb3V0ZXIuZ2V0KCcvbG9naW4vZmFjZWJvb2snLCBwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2ZhY2Vib29rJywgeyBzY29wZTogWydlbWFpbCddIH0pKTtcblxuYXV0aGVudGljYXRpb25Sb3V0ZXIuZ2V0KCcvZ29vZ2xlL2NhbGxiYWNrJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdnb29nbGUnKSwgKHJlcSwgcmVzKSA9PiB7XG4gICAgcmVzLnJlZGlyZWN0KCdodHRwOi8vbG9jYWxob3N0OjgwODAvJyk7XG59KTtcblxuYXV0aGVudGljYXRpb25Sb3V0ZXIuZ2V0KCcvZmFjZWJvb2svY2FsbGJhY2snLCBwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2ZhY2Vib29rJyksIChyZXEsIHJlcykgPT4ge1xuICAgIHJlcy5yZWRpcmVjdCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwLycpO1xufSk7XG5cbmF1dGhlbnRpY2F0aW9uUm91dGVyLmdldCgnL2xvZ291dCcsIChyZXEsIHJlcykgPT4ge1xuICAgIHJlcS5sb2dvdXQoKTtcbiAgICByZXMucmVkaXJlY3QoJy9ub3Rsb2dnZWQnKTtcbn0pO1xuXG5hdXRoZW50aWNhdGlvblJvdXRlci5nZXQoJy9ub3Rsb2dnZWQnLCAocmVxLCByZXMpID0+IHtcbiAgICByZXMuc2VuZChyZXEudXNlciA/IHJlcS51c2VyIDogJ05vdCBsb2dnZWQgaW4uIExvZ2luIHdpdGggR29vZ2xlIG9yIEZhY2Vib29rLicpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGF1dGhlbnRpY2F0aW9uUm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxvQkFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsaUJBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLGVBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLEdBQUEsR0FBQUwsT0FBQTtBQUVPLElBQU1NLG9CQUFvQixHQUFHQyxtQkFBTyxDQUFDQyxNQUFNLENBQUMsQ0FBQzs7QUFFcEQ7QUFBQUMsT0FBQSxDQUFBSCxvQkFBQSxHQUFBQSxvQkFBQTtBQUNBQSxvQkFBb0IsQ0FBQ0ksR0FBRyxDQUFDLElBQUFDLDBCQUFjLEVBQUM7RUFDcENDLE1BQU0sRUFBRSxjQUFjO0VBQ3RCQyxNQUFNLEVBQUUsSUFBSTtFQUNaQyxpQkFBaUIsRUFBRTtBQUN2QixDQUFDLENBQUMsQ0FBQzs7QUFFSDtBQUNBUixvQkFBb0IsQ0FBQ0ksR0FBRyxDQUFDSyxvQkFBUSxDQUFDQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQy9DVixvQkFBb0IsQ0FBQ0ksR0FBRyxDQUFDSyxvQkFBUSxDQUFDRSxPQUFPLENBQUMsQ0FBQyxDQUFDOztBQUU1QztBQUNBLElBQU1DLGdCQUFnQixHQUFHLDBFQUEwRTtBQUNuRyxJQUFNQyxvQkFBb0IsR0FBRyxxQ0FBcUM7QUFFbEVKLG9CQUFRLENBQUNMLEdBQUcsQ0FBQyxJQUFJVSw2QkFBYyxDQUFDO0VBQzVCQyxRQUFRLEVBQUVILGdCQUFnQjtFQUMxQkks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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_passport","_passportGoogleOauth","_passportFacebook","_expressSession","_db","authenticationRouter","express","Router","exports","use","expressSession","secret","resave","saveUninitialized","passport","initialize","session","GOOGLE_CLIENT_ID","GOOGLE_CLIENT_SECRET","GoogleStrategy","clientID","clientSecret","callbackURL","accessToken","refreshToken","profile","callback","FACEBOOK_CLIENT_ID","FACEBOOK_CLIENT_SECRET","FacebookStrategy","profileFields","serializeUser","user","deserializeUser","post","_ref","_asyncToGenerator2","_regenerator","mark","_callee","req","res","_req$body","email","password","wrap","_callee$","_context","prev","next","body","queryDatabase","sent","status","json","message","abrupt","t0","stop","_x","_x2","apply","arguments","_ref2","_callee2","_req$body2","username","phoneNo","usernameExists","emailExists","phoneNoExists","insertQuery","_callee2$","_context2","_x3","_x4","get","authenticate","scope","redirect","logout","send","_default"],"sourceRoot":"/home/muteeb/Desktop/e-store-backend/src/routes/","sources":["authentication.js"],"sourcesContent":["import express from 'express';\nimport passport from 'passport';\nimport { Strategy as GoogleStrategy } from 'passport-google-oauth2';\nimport { Strategy as FacebookStrategy } from 'passport-facebook';\nimport expressSession from 'express-session';\nimport { queryDatabase } from \"../db\";\n\nexport const authenticationRouter = express.Router();\n\n// Initialize expressSession before initializing passport\nauthenticationRouter.use(expressSession({\n    secret: 'shoestoreapp',\n    resave: true,\n    saveUninitialized: true\n}));\n\n// Initialize Passport and expressSession\nauthenticationRouter.use(passport.initialize());\nauthenticationRouter.use(passport.session());\n\n// For Google\nconst GOOGLE_CLIENT_ID = '612009756713-fevv7ilgb1ltpvrc7cnsolno8bjadb3c.apps.googleusercontent.com';\nconst GOOGLE_CLIENT_SECRET = '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';\n\npassport.use(new GoogleStrategy({\n    clientID: GOOGLE_CLIENT_ID,\n    clientSecret: GOOGLE_CLIENT_SECRET,\n    callbackURL: '/google/callback'\n}, (accessToken, refreshToken, profile, callback) => {\n    callback(null, profile);\n}));\n\n// For Facebook\nconst FACEBOOK_CLIENT_ID = '676764303980550';\nconst FACEBOOK_CLIENT_SECRET = 'eea4293b945fb06207084ae63b231f06';\n\npassport.use(new FacebookStrategy({\n    clientID: FACEBOOK_CLIENT_ID,\n    clientSecret: FACEBOOK_CLIENT_SECRET,\n    callbackURL: '/facebook/callback',\n    profileFields: ['emails', 'displayName', 'name', 'picture']\n}, (accessToken, refreshToken, profile, callback) => {\n    callback(null, profile);\n}));\n\npassport.serializeUser((user, callback) => {\n    callback(null, user);\n});\n\npassport.deserializeUser((user, callback) => {\n    callback(null, user);\n});\n\n// API route for user login\nauthenticationRouter.post('/api/login', async (req, res) => {\n    const { email, password } = req.body;\n\n    try {\n        const user = await queryDatabase('SELECT * FROM users WHERE email = ? AND password = ?', [email, password]);\n        if (!user[0]) {\n            res.status(401).json({ message: 'Invalid email or password' });\n            return;\n        }\n        res.status(200).json({ message: 'Login successful', user: user[0] });\n    } catch (err) {\n        res.status(500).json({ message: 'Database error' });\n    }\n});\n\n// API route for user registration\nauthenticationRouter.post('/api/register', async (req, res) => {\n    const { email, password, username, phoneNo } = req.body;\n\n    try {\n        const usernameExists = await queryDatabase('SELECT * FROM users WHERE username = ?', [username]);\n        if (usernameExists[0]) {\n            res.status(400).json({ message: 'Username already exists' });\n            return;\n        }\n\n        const emailExists = await queryDatabase('SELECT * FROM users WHERE email = ?', [email]);\n        if (emailExists[0]) {\n            res.status(400).json({ message: 'Email already exists' });\n            return;\n        }\n\n        const phoneNoExists = await queryDatabase('SELECT * FROM users WHERE phoneNo = ?', [phoneNo]);\n        if (phoneNoExists[0]) {\n            res.status(400).json({ message: 'Phone number already exists' });\n            return;\n        }\n\n        const insertQuery = `\n            INSERT INTO users (username, email, phoneNo, password)\n            VALUES (?, ?, ?, ?)\n        `;\n        await queryDatabase(insertQuery, [username, email, phoneNo, password]);\n\n        res.status(201).json({ message: 'User registered successfully' });\n    } catch (err) {\n        res.status(500).json({ message: 'Database error' });\n    }\n});\n\nauthenticationRouter.get('/login/google', passport.authenticate('google', { scope: ['profile', 'email'] }));\nauthenticationRouter.get('/login/facebook', passport.authenticate('facebook', { scope: ['email'] }));\n\nauthenticationRouter.get('/google/callback', passport.authenticate('google'), (req, res) => {\n    res.redirect('http://localhost:8080/');\n});\n\nauthenticationRouter.get('/facebook/callback', passport.authenticate('facebook'), (req, res) => {\n    res.redirect('http://localhost:8080/');\n});\n\nauthenticationRouter.get('/logout', (req, res) => {\n    req.logout();\n    res.redirect('/notlogged');\n});\n\nauthenticationRouter.get('/notlogged', (req, res) => {\n    res.send(req.user ? req.user : 'Not logged in. Login with Google or Facebook.');\n});\n\nexport default authenticationRouter;\n"],"mappings":"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"}},"mtime":1692969987715}}